import{y as b}from"./graph-DUYOh00p-BL1uhDTN.BX_yF7Vs.js";import{w as je,_ as s,b as S,y as Me,E as D,m as x,O as m,i as fe,n as Le,S as L,a as R,U as Ce,c as he,d as $e,M as ee}from"./baseUniq-DRFSKfuj-B0UglZZz.C_H-WQbm.js";import{i as Se,f as j,e as N,F as Fe,c as I,l as p,s as ge,a as ve,R as F,p as Ge,v as U,t as Ve}from"./basePickBy-CdA63Yk3-C10GSIx9.B-UKW_vv.js";import{c as Be,N as Y,O as z,D as Xe,f as qe,z as le,n as pe,g as Ye,h as ze,A as Ae,j as De,p as Ue,l as Je}from"./theme.B1sdK41g.js";function We(e){return Xe(qe(e,void 0,N),e+"")}var Ze=1,Qe=4;function He(e){return Ce(e,Ze|Qe)}function Ke(e,r){return e==null?e:Ue(e,he(r),Je)}function er(e,r){return e&&fe(e,he(r))}function rr(e,r){return e>r}function C(e,r){var t={};return r=D(r),fe(e,function(n,o,i){ze(t,o,r(n,o,i))}),t}function y(e){return e&&e.length?ve(e,pe,rr):void 0}function J(e,r){return e&&e.length?ve(e,D(r),Ve):void 0}function tr(e,r){var t=e.length;for(e.sort(r);t--;)e[t]=e[t].value;return e}function nr(e,r){if(e!==r){var t=e!==void 0,n=e===null,o=e===e,i=ee(e),a=r!==void 0,u=r===null,d=r===r,c=ee(r);if(!u&&!c&&!i&&e>r||i&&a&&d&&!u&&!c||n&&a&&d||!t&&d||!o)return 1;if(!n&&!i&&!c&&e<r||c&&t&&o&&!n&&!i||u&&t&&o||!a&&o||!d)return-1}return 0}function or(e,r,t){for(var n=-1,o=e.criteria,i=r.criteria,a=o.length,u=t.length;++n<a;){var d=nr(o[n],i[n]);if(d){if(n>=u)return d;var c=t[n];return d*(c=="desc"?-1:1)}}return e.index-r.index}function ir(e,r,t){r.length?r=S(r,function(i){return le(i)?function(a){return Me(a,i.length===1?i[0]:i)}:i}):r=[pe];var n=-1;r=S(r,Ye(D));var o=Fe(e,function(i,a,u){var d=S(r,function(c){return c(i)});return{criteria:d,index:++n,value:i}});return tr(o,function(i,a){return or(i,a,t)})}function ar(e,r){return Ge(e,r,function(t,n){return $e(e,n)})}var M=We(function(e,r){return e==null?{}:ar(e,r)}),ur=Math.ceil,dr=Math.max;function cr(e,r,t,n){for(var o=-1,i=dr(ur((r-e)/(t||1)),0),a=Array(i);i--;)a[++o]=e,e+=t;return a}function sr(e){return function(r,t,n){return n&&typeof n!="number"&&Y(r,t,n)&&(t=n=void 0),r=F(r),t===void 0?(t=r,r=0):t=F(t),n=n===void 0?r<t?1:-1:F(n),cr(r,t,n)}}var E=sr(),T=Be(function(e,r){if(e==null)return[];var t=r.length;return t>1&&Y(e,r[0],r[1])?r=[]:t>2&&Y(r[0],r[1],r[2])&&(r=[r[0]]),ir(e,je(r),[])}),fr=0;function W(e){var r=++fr;return Le(e)+r}function hr(e,r,t){for(var n=-1,o=e.length,i=r.length,a={};++n<o;){var u=n<i?r[n]:void 0;t(a,e[n],u)}return a}function gr(e,r){return hr(e||[],r||[],De)}class vr{constructor(){var r={};r._next=r._prev=r,this._sentinel=r}dequeue(){var r=this._sentinel,t=r._prev;if(t!==r)return re(t),t}enqueue(r){var t=this._sentinel;r._prev&&r._next&&re(r),r._next=t._next,t._next._prev=r,t._next=r,r._prev=t}toString(){for(var r=[],t=this._sentinel,n=t._prev;n!==t;)r.push(JSON.stringify(n,lr)),n=n._prev;return"["+r.join(", ")+"]"}}function re(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function lr(e,r){if(e!=="_next"&&e!=="_prev")return r}var pr=Ae(1);function wr(e,r){if(e.nodeCount()<=1)return[];var t=br(e,r||pr),n=mr(t.graph,t.buckets,t.zeroIdx);return N(p(n,function(o){return e.outEdges(o.v,o.w)}))}function mr(e,r,t){for(var n=[],o=r[r.length-1],i=r[0],a;e.nodeCount();){for(;a=i.dequeue();)G(e,r,t,a);for(;a=o.dequeue();)G(e,r,t,a);if(e.nodeCount()){for(var u=r.length-2;u>0;--u)if(a=r[u].dequeue(),a){n=n.concat(G(e,r,t,a,!0));break}}}return n}function G(e,r,t,n,o){var i=o?[]:void 0;return s(e.inEdges(n.v),function(a){var u=e.edge(a),d=e.node(a.v);o&&i.push({v:a.v,w:a.w}),d.out-=u,A(r,t,d)}),s(e.outEdges(n.v),function(a){var u=e.edge(a),d=a.w,c=e.node(d);c.in-=u,A(r,t,c)}),e.removeNode(n.v),i}function br(e,r){var t=new b,n=0,o=0;s(e.nodes(),function(u){t.setNode(u,{v:u,in:0,out:0})}),s(e.edges(),function(u){var d=t.edge(u.v,u.w)||0,c=r(u),f=d+c;t.setEdge(u.v,u.w,f),o=Math.max(o,t.node(u.v).out+=c),n=Math.max(n,t.node(u.w).in+=c)});var i=E(o+n+3).map(function(){return new vr}),a=n+1;return s(t.nodes(),function(u){A(i,a,t.node(u))}),{graph:t,buckets:i,zeroIdx:a}}function A(e,r,t){t.out?t.in?e[t.out-t.in+r].enqueue(t):e[e.length-1].enqueue(t):e[0].enqueue(t)}function yr(e){var r=e.graph().acyclicer==="greedy"?wr(e,t(e)):kr(e);s(r,function(n){var o=e.edge(n);e.removeEdge(n),o.forwardName=n.name,o.reversed=!0,e.setEdge(n.w,n.v,o,W("rev"))});function t(n){return function(o){return n.edge(o).weight}}}function kr(e){var r=[],t={},n={};function o(i){Object.prototype.hasOwnProperty.call(n,i)||(n[i]=!0,t[i]=!0,s(e.outEdges(i),function(a){Object.prototype.hasOwnProperty.call(t,a.w)?r.push(a):o(a.w)}),delete t[i])}return s(e.nodes(),o),r}function xr(e){s(e.edges(),function(r){var t=e.edge(r);if(t.reversed){e.removeEdge(r);var n=t.forwardName;delete t.reversed,delete t.forwardName,e.setEdge(r.w,r.v,t,n)}})}function O(e,r,t,n){var o;do o=W(n);while(e.hasNode(o));return t.dummy=r,e.setNode(o,t),o}function Er(e){var r=new b().setGraph(e.graph());return s(e.nodes(),function(t){r.setNode(t,e.node(t))}),s(e.edges(),function(t){var n=r.edge(t.v,t.w)||{weight:0,minlen:1},o=e.edge(t);r.setEdge(t.v,t.w,{weight:n.weight+o.weight,minlen:Math.max(n.minlen,o.minlen)})}),r}function we(e){var r=new b({multigraph:e.isMultigraph()}).setGraph(e.graph());return s(e.nodes(),function(t){e.children(t).length||r.setNode(t,e.node(t))}),s(e.edges(),function(t){r.setEdge(t,e.edge(t))}),r}function te(e,r){var t=e.x,n=e.y,o=r.x-t,i=r.y-n,a=e.width/2,u=e.height/2;if(!o&&!i)throw new Error("Not possible to find intersection inside of the rectangle");var d,c;return Math.abs(i)*a>Math.abs(o)*u?(i<0&&(u=-u),d=u*o/i,c=u):(o<0&&(a=-a),d=a,c=a*i/o),{x:t+d,y:n+c}}function $(e){var r=p(E(me(e)+1),function(){return[]});return s(e.nodes(),function(t){var n=e.node(t),o=n.rank;m(o)||(r[o][n.order]=t)}),r}function Nr(e){var r=I(p(e.nodes(),function(t){return e.node(t).rank}));s(e.nodes(),function(t){var n=e.node(t);ge(n,"rank")&&(n.rank-=r)})}function Or(e){var r=I(p(e.nodes(),function(i){return e.node(i).rank})),t=[];s(e.nodes(),function(i){var a=e.node(i).rank-r;t[a]||(t[a]=[]),t[a].push(i)});var n=0,o=e.graph().nodeRankFactor;s(t,function(i,a){m(i)&&a%o!==0?--n:n&&s(i,function(u){e.node(u).rank+=n})})}function ne(e,r,t,n){var o={width:0,height:0};return arguments.length>=4&&(o.rank=t,o.order=n),O(e,"border",o,r)}function me(e){return y(p(e.nodes(),function(r){var t=e.node(r).rank;if(!m(t))return t}))}function _r(e,r){var t={lhs:[],rhs:[]};return s(e,function(n){r(n)?t.lhs.push(n):t.rhs.push(n)}),t}function Ir(e,r){return r()}function Pr(e){function r(t){var n=e.children(t),o=e.node(t);if(n.length&&s(n,r),Object.prototype.hasOwnProperty.call(o,"minRank")){o.borderLeft=[],o.borderRight=[];for(var i=o.minRank,a=o.maxRank+1;i<a;++i)oe(e,"borderLeft","_bl",t,o,i),oe(e,"borderRight","_br",t,o,i)}}s(e.children(),r)}function oe(e,r,t,n,o,i){var a={width:0,height:0,rank:i,borderType:r},u=o[r][i-1],d=O(e,"border",a,t);o[r][i]=d,e.setParent(d,n),u&&e.setEdge(u,d,{weight:1})}function Rr(e){var r=e.graph().rankdir.toLowerCase();(r==="lr"||r==="rl")&&be(e)}function Tr(e){var r=e.graph().rankdir.toLowerCase();(r==="bt"||r==="rl")&&jr(e),(r==="lr"||r==="rl")&&(Mr(e),be(e))}function be(e){s(e.nodes(),function(r){ie(e.node(r))}),s(e.edges(),function(r){ie(e.edge(r))})}function ie(e){var r=e.width;e.width=e.height,e.height=r}function jr(e){s(e.nodes(),function(r){V(e.node(r))}),s(e.edges(),function(r){var t=e.edge(r);s(t.points,V),Object.prototype.hasOwnProperty.call(t,"y")&&V(t)})}function V(e){e.y=-e.y}function Mr(e){s(e.nodes(),function(r){B(e.node(r))}),s(e.edges(),function(r){var t=e.edge(r);s(t.points,B),Object.prototype.hasOwnProperty.call(t,"x")&&B(t)})}function B(e){var r=e.x;e.x=e.y,e.y=r}function Lr(e){e.graph().dummyChains=[],s(e.edges(),function(r){Cr(e,r)})}function Cr(e,r){var t=r.v,n=e.node(t).rank,o=r.w,i=e.node(o).rank,a=r.name,u=e.edge(r),d=u.labelRank;if(i!==n+1){e.removeEdge(r);var c=void 0,f,h;for(h=0,++n;n<i;++h,++n)u.points=[],c={width:0,height:0,edgeLabel:u,edgeObj:r,rank:n},f=O(e,"edge",c,"_d"),n===d&&(c.width=u.width,c.height=u.height,c.dummy="edge-label",c.labelpos=u.labelpos),e.setEdge(t,f,{weight:u.weight},a),h===0&&e.graph().dummyChains.push(f),t=f;e.setEdge(t,o,{weight:u.weight},a)}}function $r(e){s(e.graph().dummyChains,function(r){var t=e.node(r),n=t.edgeLabel,o;for(e.setEdge(t.edgeObj,n);t.dummy;)o=e.successors(r)[0],e.removeNode(r),n.points.push({x:t.x,y:t.y}),t.dummy==="edge-label"&&(n.x=t.x,n.y=t.y,n.width=t.width,n.height=t.height),r=o,t=e.node(r)})}function Z(e){var r={};function t(n){var o=e.node(n);if(Object.prototype.hasOwnProperty.call(r,n))return o.rank;r[n]=!0;var i=I(p(e.outEdges(n),function(a){return t(a.w)-e.edge(a).minlen}));return(i===Number.POSITIVE_INFINITY||i===void 0||i===null)&&(i=0),o.rank=i}s(e.sources(),t)}function P(e,r){return e.node(r.w).rank-e.node(r.v).rank-e.edge(r).minlen}function ye(e){var r=new b({directed:!1}),t=e.nodes()[0],n=e.nodeCount();r.setNode(t,{});for(var o,i;Sr(r,e)<n;)o=Fr(r,e),i=r.hasNode(o.v)?P(e,o):-P(e,o),Gr(r,e,i);return r}function Sr(e,r){function t(n){s(r.nodeEdges(n),function(o){var i=o.v,a=n===i?o.w:i;!e.hasNode(a)&&!P(r,o)&&(e.setNode(a,{}),e.setEdge(n,a,{}),t(a))})}return s(e.nodes(),t),e.nodeCount()}function Fr(e,r){return J(r.edges(),function(t){if(e.hasNode(t.v)!==e.hasNode(t.w))return P(r,t)})}function Gr(e,r,t){s(e.nodes(),function(n){r.node(n).rank+=t})}function ke(e,r,t){le(r)||(r=[r]);var n=(e.isDirected()?e.successors:e.neighbors).bind(e),o=[],i={};return s(r,function(a){if(!e.hasNode(a))throw new Error("Graph does not have node: "+a);xe(e,a,t==="post",i,n,o)}),o}function xe(e,r,t,n,o,i){Object.prototype.hasOwnProperty.call(n,r)||(n[r]=!0,t||i.push(r),s(o(r),function(a){xe(e,a,t,n,o,i)}),t&&i.push(r))}function Vr(e,r){return ke(e,r,"post")}function Br(e,r){return ke(e,r,"pre")}k.initLowLimValues=H;k.initCutValues=Q;k.calcCutValue=Ee;k.leaveEdge=Oe;k.enterEdge=_e;k.exchangeEdges=Ie;function k(e){e=Er(e),Z(e);var r=ye(e);H(r),Q(r,e);for(var t,n;t=Oe(r);)n=_e(r,e,t),Ie(r,e,t,n)}function Q(e,r){var t=Vr(e,e.nodes());t=t.slice(0,t.length-1),s(t,function(n){Xr(e,r,n)})}function Xr(e,r,t){var n=e.node(t),o=n.parent;e.edge(t,o).cutvalue=Ee(e,r,t)}function Ee(e,r,t){var n=e.node(t),o=n.parent,i=!0,a=r.edge(t,o),u=0;return a||(i=!1,a=r.edge(o,t)),u=a.weight,s(r.nodeEdges(t),function(d){var c=d.v===t,f=c?d.w:d.v;if(f!==o){var h=c===i,g=r.edge(d).weight;if(u+=h?g:-g,Yr(e,t,f)){var v=e.edge(t,f).cutvalue;u+=h?-v:v}}}),u}function H(e,r){arguments.length<2&&(r=e.nodes()[0]),Ne(e,{},1,r)}function Ne(e,r,t,n,o){var i=t,a=e.node(n);return r[n]=!0,s(e.neighbors(n),function(u){Object.prototype.hasOwnProperty.call(r,u)||(t=Ne(e,r,t,u,n))}),a.low=i,a.lim=t++,o?a.parent=o:delete a.parent,t}function Oe(e){return U(e.edges(),function(r){return e.edge(r).cutvalue<0})}function _e(e,r,t){var n=t.v,o=t.w;r.hasEdge(n,o)||(n=t.w,o=t.v);var i=e.node(n),a=e.node(o),u=i,d=!1;i.lim>a.lim&&(u=a,d=!0);var c=R(r.edges(),function(f){return d===ae(e,e.node(f.v),u)&&d!==ae(e,e.node(f.w),u)});return J(c,function(f){return P(r,f)})}function Ie(e,r,t,n){var o=t.v,i=t.w;e.removeEdge(o,i),e.setEdge(n.v,n.w,{}),H(e),Q(e,r),qr(e,r)}function qr(e,r){var t=U(e.nodes(),function(o){return!r.node(o).parent}),n=Br(e,t);n=n.slice(1),s(n,function(o){var i=e.node(o).parent,a=r.edge(o,i),u=!1;a||(a=r.edge(i,o),u=!0),r.node(o).rank=r.node(i).rank+(u?a.minlen:-a.minlen)})}function Yr(e,r,t){return e.hasEdge(r,t)}function ae(e,r,t){return t.low<=r.lim&&r.lim<=t.lim}function zr(e){switch(e.graph().ranker){case"network-simplex":ue(e);break;case"tight-tree":Dr(e);break;case"longest-path":Ar(e);break;default:ue(e)}}var Ar=Z;function Dr(e){Z(e),ye(e)}function ue(e){k(e)}function Ur(e){var r=O(e,"root",{},"_root"),t=Jr(e),n=y(x(t))-1,o=2*n+1;e.graph().nestingRoot=r,s(e.edges(),function(a){e.edge(a).minlen*=o});var i=Wr(e)+1;s(e.children(),function(a){Pe(e,r,o,i,n,t,a)}),e.graph().nodeRankFactor=o}function Pe(e,r,t,n,o,i,a){var u=e.children(a);if(!u.length){a!==r&&e.setEdge(r,a,{weight:0,minlen:t});return}var d=ne(e,"_bt"),c=ne(e,"_bb"),f=e.node(a);e.setParent(d,a),f.borderTop=d,e.setParent(c,a),f.borderBottom=c,s(u,function(h){Pe(e,r,t,n,o,i,h);var g=e.node(h),v=g.borderTop?g.borderTop:h,l=g.borderBottom?g.borderBottom:h,w=g.borderTop?n:2*n,_=v!==l?1:o-i[a]+1;e.setEdge(d,v,{weight:w,minlen:_,nestingEdge:!0}),e.setEdge(l,c,{weight:w,minlen:_,nestingEdge:!0})}),e.parent(a)||e.setEdge(r,d,{weight:0,minlen:o+i[a]})}function Jr(e){var r={};function t(n,o){var i=e.children(n);i&&i.length&&s(i,function(a){t(a,o+1)}),r[n]=o}return s(e.children(),function(n){t(n,1)}),r}function Wr(e){return L(e.edges(),function(r,t){return r+e.edge(t).weight},0)}function Zr(e){var r=e.graph();e.removeNode(r.nestingRoot),delete r.nestingRoot,s(e.edges(),function(t){var n=e.edge(t);n.nestingEdge&&e.removeEdge(t)})}function Qr(e,r,t){var n={},o;s(t,function(i){for(var a=e.parent(i),u,d;a;){if(u=e.parent(a),u?(d=n[u],n[u]=a):(d=o,o=a),d&&d!==a){r.setEdge(d,a);return}a=u}})}function Hr(e,r,t){var n=Kr(e),o=new b({compound:!0}).setGraph({root:n}).setDefaultNodeLabel(function(i){return e.node(i)});return s(e.nodes(),function(i){var a=e.node(i),u=e.parent(i);(a.rank===r||a.minRank<=r&&r<=a.maxRank)&&(o.setNode(i),o.setParent(i,u||n),s(e[t](i),function(d){var c=d.v===i?d.w:d.v,f=o.edge(c,i),h=m(f)?0:f.weight;o.setEdge(c,i,{weight:e.edge(d).weight+h})}),Object.prototype.hasOwnProperty.call(a,"minRank")&&o.setNode(i,{borderLeft:a.borderLeft[r],borderRight:a.borderRight[r]}))}),o}function Kr(e){for(var r;e.hasNode(r=W("_root")););return r}function et(e,r){for(var t=0,n=1;n<r.length;++n)t+=rt(e,r[n-1],r[n]);return t}function rt(e,r,t){for(var n=gr(t,p(t,function(c,f){return f})),o=N(p(r,function(c){return T(p(e.outEdges(c),function(f){return{pos:n[f.w],weight:e.edge(f).weight}}),"pos")})),i=1;i<t.length;)i<<=1;var a=2*i-1;i-=1;var u=p(new Array(a),function(){return 0}),d=0;return s(o.forEach(function(c){var f=c.pos+i;u[f]+=c.weight;for(var h=0;f>0;)f%2&&(h+=u[f+1]),f=f-1>>1,u[f]+=c.weight;d+=c.weight*h})),d}function tt(e){var r={},t=R(e.nodes(),function(u){return!e.children(u).length}),n=y(p(t,function(u){return e.node(u).rank})),o=p(E(n+1),function(){return[]});function i(u){if(!ge(r,u)){r[u]=!0;var d=e.node(u);o[d.rank].push(u),s(e.successors(u),i)}}var a=T(t,function(u){return e.node(u).rank});return s(a,i),o}function nt(e,r){return p(r,function(t){var n=e.inEdges(t);if(n.length){var o=L(n,function(i,a){var u=e.edge(a),d=e.node(a.v);return{sum:i.sum+u.weight*d.order,weight:i.weight+u.weight}},{sum:0,weight:0});return{v:t,barycenter:o.sum/o.weight,weight:o.weight}}else return{v:t}})}function ot(e,r){var t={};s(e,function(o,i){var a=t[o.v]={indegree:0,in:[],out:[],vs:[o.v],i};m(o.barycenter)||(a.barycenter=o.barycenter,a.weight=o.weight)}),s(r.edges(),function(o){var i=t[o.v],a=t[o.w];!m(i)&&!m(a)&&(a.indegree++,i.out.push(t[o.w]))});var n=R(t,function(o){return!o.indegree});return it(n)}function it(e){var r=[];function t(i){return function(a){a.merged||(m(a.barycenter)||m(i.barycenter)||a.barycenter>=i.barycenter)&&at(i,a)}}function n(i){return function(a){a.in.push(i),--a.indegree===0&&e.push(a)}}for(;e.length;){var o=e.pop();r.push(o),s(o.in.reverse(),t(o)),s(o.out,n(o))}return p(R(r,function(i){return!i.merged}),function(i){return M(i,["vs","i","barycenter","weight"])})}function at(e,r){var t=0,n=0;e.weight&&(t+=e.barycenter*e.weight,n+=e.weight),r.weight&&(t+=r.barycenter*r.weight,n+=r.weight),e.vs=r.vs.concat(e.vs),e.barycenter=t/n,e.weight=n,e.i=Math.min(r.i,e.i),r.merged=!0}function ut(e,r){var t=_r(e,function(f){return Object.prototype.hasOwnProperty.call(f,"barycenter")}),n=t.lhs,o=T(t.rhs,function(f){return-f.i}),i=[],a=0,u=0,d=0;n.sort(dt(!!r)),d=de(i,o,d),s(n,function(f){d+=f.vs.length,i.push(f.vs),a+=f.barycenter*f.weight,u+=f.weight,d=de(i,o,d)});var c={vs:N(i)};return u&&(c.barycenter=a/u,c.weight=u),c}function de(e,r,t){for(var n;r.length&&(n=j(r)).i<=t;)r.pop(),e.push(n.vs),t++;return t}function dt(e){return function(r,t){return r.barycenter<t.barycenter?-1:r.barycenter>t.barycenter?1:e?t.i-r.i:r.i-t.i}}function Re(e,r,t,n){var o=e.children(r),i=e.node(r),a=i?i.borderLeft:void 0,u=i?i.borderRight:void 0,d={};a&&(o=R(o,function(l){return l!==a&&l!==u}));var c=nt(e,o);s(c,function(l){if(e.children(l.v).length){var w=Re(e,l.v,t,n);d[l.v]=w,Object.prototype.hasOwnProperty.call(w,"barycenter")&&st(l,w)}});var f=ot(c,t);ct(f,d);var h=ut(f,n);if(a&&(h.vs=N([a,h.vs,u]),e.predecessors(a).length)){var g=e.node(e.predecessors(a)[0]),v=e.node(e.predecessors(u)[0]);Object.prototype.hasOwnProperty.call(h,"barycenter")||(h.barycenter=0,h.weight=0),h.barycenter=(h.barycenter*h.weight+g.order+v.order)/(h.weight+2),h.weight+=2}return h}function ct(e,r){s(e,function(t){t.vs=N(t.vs.map(function(n){return r[n]?r[n].vs:n}))})}function st(e,r){m(e.barycenter)?(e.barycenter=r.barycenter,e.weight=r.weight):(e.barycenter=(e.barycenter*e.weight+r.barycenter*r.weight)/(e.weight+r.weight),e.weight+=r.weight)}function ft(e){var r=me(e),t=ce(e,E(1,r+1),"inEdges"),n=ce(e,E(r-1,-1,-1),"outEdges"),o=tt(e);se(e,o);for(var i=Number.POSITIVE_INFINITY,a,u=0,d=0;d<4;++u,++d){ht(u%2?t:n,u%4>=2),o=$(e);var c=et(e,o);c<i&&(d=0,a=He(o),i=c)}se(e,a)}function ce(e,r,t){return p(r,function(n){return Hr(e,n,t)})}function ht(e,r){var t=new b;s(e,function(n){var o=n.graph().root,i=Re(n,o,t,r);s(i.vs,function(a,u){n.node(a).order=u}),Qr(n,t,i.vs)})}function se(e,r){s(r,function(t){s(t,function(n,o){e.node(n).order=o})})}function gt(e){var r=lt(e);s(e.graph().dummyChains,function(t){for(var n=e.node(t),o=n.edgeObj,i=vt(e,r,o.v,o.w),a=i.path,u=i.lca,d=0,c=a[d],f=!0;t!==o.w;){if(n=e.node(t),f){for(;(c=a[d])!==u&&e.node(c).maxRank<n.rank;)d++;c===u&&(f=!1)}if(!f){for(;d<a.length-1&&e.node(c=a[d+1]).minRank<=n.rank;)d++;c=a[d]}e.setParent(t,c),t=e.successors(t)[0]}})}function vt(e,r,t,n){var o=[],i=[],a=Math.min(r[t].low,r[n].low),u=Math.max(r[t].lim,r[n].lim),d,c;d=t;do d=e.parent(d),o.push(d);while(d&&(r[d].low>a||u>r[d].lim));for(c=d,d=n;(d=e.parent(d))!==c;)i.push(d);return{path:o.concat(i.reverse()),lca:c}}function lt(e){var r={},t=0;function n(o){var i=t;s(e.children(o),n),r[o]={low:i,lim:t++}}return s(e.children(),n),r}function pt(e,r){var t={};function n(o,i){var a=0,u=0,d=o.length,c=j(i);return s(i,function(f,h){var g=mt(e,f),v=g?e.node(g).order:d;(g||f===c)&&(s(i.slice(u,h+1),function(l){s(e.predecessors(l),function(w){var _=e.node(w),K=_.order;(K<a||v<K)&&!(_.dummy&&e.node(l).dummy)&&Te(t,w,l)})}),u=h+1,a=v)}),i}return L(r,n),t}function wt(e,r){var t={};function n(i,a,u,d,c){var f;s(E(a,u),function(h){f=i[h],e.node(f).dummy&&s(e.predecessors(f),function(g){var v=e.node(g);v.dummy&&(v.order<d||v.order>c)&&Te(t,g,f)})})}function o(i,a){var u=-1,d,c=0;return s(a,function(f,h){if(e.node(f).dummy==="border"){var g=e.predecessors(f);g.length&&(d=e.node(g[0]).order,n(a,c,h,u,d),c=h,u=d)}n(a,c,a.length,d,i.length)}),a}return L(r,o),t}function mt(e,r){if(e.node(r).dummy)return U(e.predecessors(r),function(t){return e.node(t).dummy})}function Te(e,r,t){if(r>t){var n=r;r=t,t=n}var o=e[r];o||(e[r]=o={}),o[t]=!0}function bt(e,r,t){if(r>t){var n=r;r=t,t=n}return!!e[r]&&Object.prototype.hasOwnProperty.call(e[r],t)}function yt(e,r,t,n){var o={},i={},a={};return s(r,function(u){s(u,function(d,c){o[d]=d,i[d]=d,a[d]=c})}),s(r,function(u){var d=-1;s(u,function(c){var f=n(c);if(f.length){f=T(f,function(w){return a[w]});for(var h=(f.length-1)/2,g=Math.floor(h),v=Math.ceil(h);g<=v;++g){var l=f[g];i[c]===c&&d<a[l]&&!bt(t,c,l)&&(i[l]=c,i[c]=o[c]=o[l],d=a[l])}}})}),{root:o,align:i}}function kt(e,r,t,n,o){var i={},a=xt(e,r,t,o),u=o?"borderLeft":"borderRight";function d(h,g){for(var v=a.nodes(),l=v.pop(),w={};l;)w[l]?h(l):(w[l]=!0,v.push(l),v=v.concat(g(l))),l=v.pop()}function c(h){i[h]=a.inEdges(h).reduce(function(g,v){return Math.max(g,i[v.v]+a.edge(v))},0)}function f(h){var g=a.outEdges(h).reduce(function(l,w){return Math.min(l,i[w.w]-a.edge(w))},Number.POSITIVE_INFINITY),v=e.node(h);g!==Number.POSITIVE_INFINITY&&v.borderType!==u&&(i[h]=Math.max(i[h],g))}return d(c,a.predecessors.bind(a)),d(f,a.successors.bind(a)),s(n,function(h){i[h]=i[t[h]]}),i}function xt(e,r,t,n){var o=new b,i=e.graph(),a=It(i.nodesep,i.edgesep,n);return s(r,function(u){var d;s(u,function(c){var f=t[c];if(o.setNode(f),d){var h=t[d],g=o.edge(h,f);o.setEdge(h,f,Math.max(a(e,c,d),g||0))}d=c})}),o}function Et(e,r){return J(x(r),function(t){var n=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;return Ke(t,function(i,a){var u=Pt(e,a)/2;n=Math.max(i+u,n),o=Math.min(i-u,o)}),n-o})}function Nt(e,r){var t=x(r),n=I(t),o=y(t);s(["u","d"],function(i){s(["l","r"],function(a){var u=i+a,d=e[u],c;if(d!==r){var f=x(d);c=a==="l"?n-I(f):o-y(f),c&&(e[u]=C(d,function(h){return h+c}))}})})}function Ot(e,r){return C(e.ul,function(t,n){if(r)return e[r.toLowerCase()][n];var o=T(p(e,n));return(o[1]+o[2])/2})}function _t(e){var r=$(e),t=z(pt(e,r),wt(e,r)),n={},o;s(["u","d"],function(a){o=a==="u"?r:x(r).reverse(),s(["l","r"],function(u){u==="r"&&(o=p(o,function(h){return x(h).reverse()}));var d=(a==="u"?e.predecessors:e.successors).bind(e),c=yt(e,o,t,d),f=kt(e,o,c.root,c.align,u==="r");u==="r"&&(f=C(f,function(h){return-h})),n[a+u]=f})});var i=Et(e,n);return Nt(n,i),Ot(n,e.graph().align)}function It(e,r,t){return function(n,o,i){var a=n.node(o),u=n.node(i),d=0,c;if(d+=a.width/2,Object.prototype.hasOwnProperty.call(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":c=-a.width/2;break;case"r":c=a.width/2;break}if(c&&(d+=t?c:-c),c=0,d+=(a.dummy?r:e)/2,d+=(u.dummy?r:e)/2,d+=u.width/2,Object.prototype.hasOwnProperty.call(u,"labelpos"))switch(u.labelpos.toLowerCase()){case"l":c=u.width/2;break;case"r":c=-u.width/2;break}return c&&(d+=t?c:-c),c=0,d}}function Pt(e,r){return e.node(r).width}function Rt(e){e=we(e),Tt(e),er(_t(e),function(r,t){e.node(t).x=r})}function Tt(e){var r=$(e),t=e.graph().ranksep,n=0;s(r,function(o){var i=y(p(o,function(a){return e.node(a).height}));s(o,function(a){e.node(a).y=n+i/2}),n+=i+t})}function on(e,r){var t=Ir;t("layout",()=>{var n=t("  buildLayoutGraph",()=>Xt(e));t("  runLayout",()=>jt(n,t)),t("  updateInputGraph",()=>Mt(e,n))})}function jt(e,r){r("    makeSpaceForEdgeLabels",()=>qt(e)),r("    removeSelfEdges",()=>Qt(e)),r("    acyclic",()=>yr(e)),r("    nestingGraph.run",()=>Ur(e)),r("    rank",()=>zr(we(e))),r("    injectEdgeLabelProxies",()=>Yt(e)),r("    removeEmptyRanks",()=>Or(e)),r("    nestingGraph.cleanup",()=>Zr(e)),r("    normalizeRanks",()=>Nr(e)),r("    assignRankMinMax",()=>zt(e)),r("    removeEdgeLabelProxies",()=>At(e)),r("    normalize.run",()=>Lr(e)),r("    parentDummyChains",()=>gt(e)),r("    addBorderSegments",()=>Pr(e)),r("    order",()=>ft(e)),r("    insertSelfEdges",()=>Ht(e)),r("    adjustCoordinateSystem",()=>Rr(e)),r("    position",()=>Rt(e)),r("    positionSelfEdges",()=>Kt(e)),r("    removeBorderNodes",()=>Zt(e)),r("    normalize.undo",()=>$r(e)),r("    fixupEdgeLabelCoords",()=>Jt(e)),r("    undoCoordinateSystem",()=>Tr(e)),r("    translateGraph",()=>Dt(e)),r("    assignNodeIntersects",()=>Ut(e)),r("    reversePoints",()=>Wt(e)),r("    acyclic.undo",()=>xr(e))}function Mt(e,r){s(e.nodes(),function(t){var n=e.node(t),o=r.node(t);n&&(n.x=o.x,n.y=o.y,r.children(t).length&&(n.width=o.width,n.height=o.height))}),s(e.edges(),function(t){var n=e.edge(t),o=r.edge(t);n.points=o.points,Object.prototype.hasOwnProperty.call(o,"x")&&(n.x=o.x,n.y=o.y)}),e.graph().width=r.graph().width,e.graph().height=r.graph().height}var Lt=["nodesep","edgesep","ranksep","marginx","marginy"],Ct={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},$t=["acyclicer","ranker","rankdir","align"],St=["width","height"],Ft={width:0,height:0},Gt=["minlen","weight","width","height","labeloffset"],Vt={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Bt=["labelpos"];function Xt(e){var r=new b({multigraph:!0,compound:!0}),t=q(e.graph());return r.setGraph(z({},Ct,X(t,Lt),M(t,$t))),s(e.nodes(),function(n){var o=q(e.node(n));r.setNode(n,Se(X(o,St),Ft)),r.setParent(n,e.parent(n))}),s(e.edges(),function(n){var o=q(e.edge(n));r.setEdge(n,z({},Vt,X(o,Gt),M(o,Bt)))}),r}function qt(e){var r=e.graph();r.ranksep/=2,s(e.edges(),function(t){var n=e.edge(t);n.minlen*=2,n.labelpos.toLowerCase()!=="c"&&(r.rankdir==="TB"||r.rankdir==="BT"?n.width+=n.labeloffset:n.height+=n.labeloffset)})}function Yt(e){s(e.edges(),function(r){var t=e.edge(r);if(t.width&&t.height){var n=e.node(r.v),o=e.node(r.w),i={rank:(o.rank-n.rank)/2+n.rank,e:r};O(e,"edge-proxy",i,"_ep")}})}function zt(e){var r=0;s(e.nodes(),function(t){var n=e.node(t);n.borderTop&&(n.minRank=e.node(n.borderTop).rank,n.maxRank=e.node(n.borderBottom).rank,r=y(r,n.maxRank))}),e.graph().maxRank=r}function At(e){s(e.nodes(),function(r){var t=e.node(r);t.dummy==="edge-proxy"&&(e.edge(t.e).labelRank=t.rank,e.removeNode(r))})}function Dt(e){var r=Number.POSITIVE_INFINITY,t=0,n=Number.POSITIVE_INFINITY,o=0,i=e.graph(),a=i.marginx||0,u=i.marginy||0;function d(c){var f=c.x,h=c.y,g=c.width,v=c.height;r=Math.min(r,f-g/2),t=Math.max(t,f+g/2),n=Math.min(n,h-v/2),o=Math.max(o,h+v/2)}s(e.nodes(),function(c){d(e.node(c))}),s(e.edges(),function(c){var f=e.edge(c);Object.prototype.hasOwnProperty.call(f,"x")&&d(f)}),r-=a,n-=u,s(e.nodes(),function(c){var f=e.node(c);f.x-=r,f.y-=n}),s(e.edges(),function(c){var f=e.edge(c);s(f.points,function(h){h.x-=r,h.y-=n}),Object.prototype.hasOwnProperty.call(f,"x")&&(f.x-=r),Object.prototype.hasOwnProperty.call(f,"y")&&(f.y-=n)}),i.width=t-r+a,i.height=o-n+u}function Ut(e){s(e.edges(),function(r){var t=e.edge(r),n=e.node(r.v),o=e.node(r.w),i,a;t.points?(i=t.points[0],a=t.points[t.points.length-1]):(t.points=[],i=o,a=n),t.points.unshift(te(n,i)),t.points.push(te(o,a))})}function Jt(e){s(e.edges(),function(r){var t=e.edge(r);if(Object.prototype.hasOwnProperty.call(t,"x"))switch((t.labelpos==="l"||t.labelpos==="r")&&(t.width-=t.labeloffset),t.labelpos){case"l":t.x-=t.width/2+t.labeloffset;break;case"r":t.x+=t.width/2+t.labeloffset;break}})}function Wt(e){s(e.edges(),function(r){var t=e.edge(r);t.reversed&&t.points.reverse()})}function Zt(e){s(e.nodes(),function(r){if(e.children(r).length){var t=e.node(r),n=e.node(t.borderTop),o=e.node(t.borderBottom),i=e.node(j(t.borderLeft)),a=e.node(j(t.borderRight));t.width=Math.abs(a.x-i.x),t.height=Math.abs(o.y-n.y),t.x=i.x+t.width/2,t.y=n.y+t.height/2}}),s(e.nodes(),function(r){e.node(r).dummy==="border"&&e.removeNode(r)})}function Qt(e){s(e.edges(),function(r){if(r.v===r.w){var t=e.node(r.v);t.selfEdges||(t.selfEdges=[]),t.selfEdges.push({e:r,label:e.edge(r)}),e.removeEdge(r)}})}function Ht(e){var r=$(e);s(r,function(t){var n=0;s(t,function(o,i){var a=e.node(o);a.order=i+n,s(a.selfEdges,function(u){O(e,"selfedge",{width:u.label.width,height:u.label.height,rank:a.rank,order:i+ ++n,e:u.e,label:u.label},"_se")}),delete a.selfEdges})})}function Kt(e){s(e.nodes(),function(r){var t=e.node(r);if(t.dummy==="selfedge"){var n=e.node(t.e.v),o=n.x+n.width/2,i=n.y,a=t.x-o,u=n.height/2;e.setEdge(t.e,t.label),e.removeNode(r),t.label.points=[{x:o+2*a/3,y:i-u},{x:o+5*a/6,y:i-u},{x:o+a,y:i},{x:o+5*a/6,y:i+u},{x:o+2*a/3,y:i+u}],t.label.x=t.x,t.label.y=t.y}})}function X(e,r){return C(M(e,r),Number)}function q(e){var r={};return s(e,function(t,n){r[n.toLowerCase()]=t}),r}export{on as i};
