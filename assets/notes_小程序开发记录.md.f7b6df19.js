import{_ as s,c as n,o as a,a as l}from"./app.de42343b.js";const E=JSON.parse('{"title":"\u5C0F\u7A0B\u5E8F\u76F8\u5173\u8BB0\u5F55\uFF08\u6301\u7EED\u66F4\u65B0...\uFF09","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u5C0F\u7A0B\u5E8F\u53D1\u8D77\u5206\u4EAB (2021-02-24)","slug":"\u5C0F\u7A0B\u5E8F\u53D1\u8D77\u5206\u4EAB-2021-02-24","link":"#\u5C0F\u7A0B\u5E8F\u53D1\u8D77\u5206\u4EAB-2021-02-24","children":[]},{"level":2,"title":"scroll-view \u6A2A\u5411\u6EDA\u52A8\u6CE8\u610F\u70B9","slug":"scroll-view-\u6A2A\u5411\u6EDA\u52A8\u6CE8\u610F\u70B9","link":"#scroll-view-\u6A2A\u5411\u6EDA\u52A8\u6CE8\u610F\u70B9","children":[]},{"level":2,"title":"uniapp \u4E2D url \u4F20\u9012\u4E00\u4E2A obj \u7684\u65B9\u6CD5 (2021-02-24)","slug":"uniapp-\u4E2D-url-\u4F20\u9012\u4E00\u4E2A-obj-\u7684\u65B9\u6CD5-2021-02-24","link":"#uniapp-\u4E2D-url-\u4F20\u9012\u4E00\u4E2A-obj-\u7684\u65B9\u6CD5-2021-02-24","children":[]},{"level":2,"title":"\u5FAE\u4FE1\u516C\u4F17\u53F7 H5 \u5FAE\u4FE1\u6388\u6743\u83B7\u53D6 code (2021-02-24)","slug":"\u5FAE\u4FE1\u516C\u4F17\u53F7-h5-\u5FAE\u4FE1\u6388\u6743\u83B7\u53D6-code-2021-02-24","link":"#\u5FAE\u4FE1\u516C\u4F17\u53F7-h5-\u5FAE\u4FE1\u6388\u6743\u83B7\u53D6-code-2021-02-24","children":[]},{"level":2,"title":"\u7F51\u7EDC\u76D1\u63A7 (2021-02-24)","slug":"\u7F51\u7EDC\u76D1\u63A7-2021-02-24","link":"#\u7F51\u7EDC\u76D1\u63A7-2021-02-24","children":[]},{"level":2,"title":"uniapp \u5C0F\u7A0B\u5E8F\u957F\u6309\u4FDD\u5B58\u56FE\u7247 (\u6388\u6743\u540E\u4FDD\u5B58) (\u4E8C\u7EF4\u7801) (2021-03-01)","slug":"uniapp-\u5C0F\u7A0B\u5E8F\u957F\u6309\u4FDD\u5B58\u56FE\u7247-\u6388\u6743\u540E\u4FDD\u5B58-\u4E8C\u7EF4\u7801-2021-03-01","link":"#uniapp-\u5C0F\u7A0B\u5E8F\u957F\u6309\u4FDD\u5B58\u56FE\u7247-\u6388\u6743\u540E\u4FDD\u5B58-\u4E8C\u7EF4\u7801-2021-03-01","children":[]},{"level":2,"title":"Uniapp \u5B9E\u73B0\u4FDD\u5B58\u6D77\u62A5\u7EC4\u4EF6\u5F00\u53D1 (2021-03-01)","slug":"uniapp-\u5B9E\u73B0\u4FDD\u5B58\u6D77\u62A5\u7EC4\u4EF6\u5F00\u53D1-2021-03-01","link":"#uniapp-\u5B9E\u73B0\u4FDD\u5B58\u6D77\u62A5\u7EC4\u4EF6\u5F00\u53D1-2021-03-01","children":[{"level":3,"title":"\u901A\u8FC7 canvas \u7ED8\u5236\u6D77\u62A5\u5185\u5BB9\u7684\u987A\u5E8F\u5148\u540E\u95EE\u9898","slug":"\u901A\u8FC7-canvas-\u7ED8\u5236\u6D77\u62A5\u5185\u5BB9\u7684\u987A\u5E8F\u5148\u540E\u95EE\u9898","link":"#\u901A\u8FC7-canvas-\u7ED8\u5236\u6D77\u62A5\u5185\u5BB9\u7684\u987A\u5E8F\u5148\u540E\u95EE\u9898","children":[]},{"level":3,"title":"\u6CE8\u610F uni.getImageInfo()","slug":"\u6CE8\u610F-uni-getimageinfo","link":"#\u6CE8\u610F-uni-getimageinfo","children":[]},{"level":3,"title":"\u91CD\u70B9\u7EC4\u4EF6\u65B9\u6CD5\uFF0C\u53D8\u91CF\u4ECB\u7ECD","slug":"\u91CD\u70B9\u7EC4\u4EF6\u65B9\u6CD5\uFF0C\u53D8\u91CF\u4ECB\u7ECD","link":"#\u91CD\u70B9\u7EC4\u4EF6\u65B9\u6CD5\uFF0C\u53D8\u91CF\u4ECB\u7ECD","children":[]},{"level":3,"title":"\u5FEB\u901F\u4E0A\u624B","slug":"\u5FEB\u901F\u4E0A\u624B","link":"#\u5FEB\u901F\u4E0A\u624B","children":[]},{"level":3,"title":"\u5FEB\u901F\u4E0A\u624B\u793A\u4F8B\u6E90\u7801","slug":"\u5FEB\u901F\u4E0A\u624B\u793A\u4F8B\u6E90\u7801","link":"#\u5FEB\u901F\u4E0A\u624B\u793A\u4F8B\u6E90\u7801","children":[]},{"level":3,"title":"\u7EC4\u4EF6\u6E90\u7801","slug":"\u7EC4\u4EF6\u6E90\u7801","link":"#\u7EC4\u4EF6\u6E90\u7801","children":[]}]},{"level":2,"title":"\u5C0F\u7A0B\u5E8F\u767B\u5F55\u6388\u6743 \u83B7\u53D6 \u7528\u6237\u4FE1\u606F\u7684 API \u8BE6\u89E3 (2021-03-04)","slug":"\u5C0F\u7A0B\u5E8F\u767B\u5F55\u6388\u6743-\u83B7\u53D6-\u7528\u6237\u4FE1\u606F\u7684-api-\u8BE6\u89E3-2021-03-04","link":"#\u5C0F\u7A0B\u5E8F\u767B\u5F55\u6388\u6743-\u83B7\u53D6-\u7528\u6237\u4FE1\u606F\u7684-api-\u8BE6\u89E3-2021-03-04","children":[{"level":3,"title":"1. \u767B\u5F55 wx.login()","slug":"_1-\u767B\u5F55-wx-login","link":"#_1-\u767B\u5F55-wx-login","children":[]},{"level":3,"title":"2. wx.checkSession()","slug":"_2-wx-checksession","link":"#_2-wx-checksession","children":[]},{"level":3,"title":"3.\u6388\u6743 wx.authorize()","slug":"_3-\u6388\u6743-wx-authorize","link":"#_3-\u6388\u6743-wx-authorize","children":[]},{"level":3,"title":"4. \u7528\u6237\u4FE1\u606F wx.getUserInfo()","slug":"_4-\u7528\u6237\u4FE1\u606F-wx-getuserinfo","link":"#_4-\u7528\u6237\u4FE1\u606F-wx-getuserinfo","children":[]},{"level":3,"title":"\u5B57\u6BB5\u89E3\u91CA","slug":"\u5B57\u6BB5\u89E3\u91CA","link":"#\u5B57\u6BB5\u89E3\u91CA","children":[]},{"level":3,"title":"\u767B\u5F55\u6388\u6743\u6D41\u7A0B","slug":"\u767B\u5F55\u6388\u6743\u6D41\u7A0B","link":"#\u767B\u5F55\u6388\u6743\u6D41\u7A0B","children":[]}]},{"level":2,"title":"\u5FAE\u4FE1\u5C0F\u7A0B\u5E8F \u5F00\u53D1\u7248 \u4F53\u9A8C\u7248 \u6B63\u5F0F\u7248 \u73AF\u5883\u5224\u65AD (2021-03-08)","slug":"\u5FAE\u4FE1\u5C0F\u7A0B\u5E8F-\u5F00\u53D1\u7248-\u4F53\u9A8C\u7248-\u6B63\u5F0F\u7248-\u73AF\u5883\u5224\u65AD-2021-03-08","link":"#\u5FAE\u4FE1\u5C0F\u7A0B\u5E8F-\u5F00\u53D1\u7248-\u4F53\u9A8C\u7248-\u6B63\u5F0F\u7248-\u73AF\u5883\u5224\u65AD-2021-03-08","children":[]},{"level":2,"title":"\u9489\u9489\u5C0F\u7A0B\u5E8F \u5F00\u53D1\u7248 \u4F53\u9A8C\u7248 \u6B63\u5F0F\u7248 \u73AF\u5883\u5224\u65AD (2021-03-08)","slug":"\u9489\u9489\u5C0F\u7A0B\u5E8F-\u5F00\u53D1\u7248-\u4F53\u9A8C\u7248-\u6B63\u5F0F\u7248-\u73AF\u5883\u5224\u65AD-2021-03-08","link":"#\u9489\u9489\u5C0F\u7A0B\u5E8F-\u5F00\u53D1\u7248-\u4F53\u9A8C\u7248-\u6B63\u5F0F\u7248-\u73AF\u5883\u5224\u65AD-2021-03-08","children":[]},{"level":2,"title":"uniapp \u5C0F\u7A0B\u5E8F\u7B7E\u540D\u529F\u80FD\u57FA\u672C\u5B9E\u73B0 (2021-03-09)","slug":"uniapp-\u5C0F\u7A0B\u5E8F\u7B7E\u540D\u529F\u80FD\u57FA\u672C\u5B9E\u73B0-2021-03-09","link":"#uniapp-\u5C0F\u7A0B\u5E8F\u7B7E\u540D\u529F\u80FD\u57FA\u672C\u5B9E\u73B0-2021-03-09","children":[]},{"level":2,"title":"\u56FE\u7247\u8DEF\u5F84 (2021-03-12)","slug":"\u56FE\u7247\u8DEF\u5F84-2021-03-12","link":"#\u56FE\u7247\u8DEF\u5F84-2021-03-12","children":[]},{"level":2,"title":"\u5FAE\u4FE1\u5C0F\u7A0B\u5E8F base64 \u683C\u5F0F\u56FE\u7247\u8F6C http \u5730\u5740 (2021-03-17)","slug":"\u5FAE\u4FE1\u5C0F\u7A0B\u5E8F-base64-\u683C\u5F0F\u56FE\u7247\u8F6C-http-\u5730\u5740-2021-03-17","link":"#\u5FAE\u4FE1\u5C0F\u7A0B\u5E8F-base64-\u683C\u5F0F\u56FE\u7247\u8F6C-http-\u5730\u5740-2021-03-17","children":[]},{"level":2,"title":"uniapp \u5C0F\u7A0B\u5E8F\u9876\u90E8\u680F\u5207\u6362","slug":"uniapp-\u5C0F\u7A0B\u5E8F\u9876\u90E8\u680F\u5207\u6362","link":"#uniapp-\u5C0F\u7A0B\u5E8F\u9876\u90E8\u680F\u5207\u6362","children":[]},{"level":2,"title":"\u5C0F\u7A0B\u5E8F\u6253\u5F00 PDF \u6587\u4EF6","slug":"\u5C0F\u7A0B\u5E8F\u6253\u5F00-pdf-\u6587\u4EF6","link":"#\u5C0F\u7A0B\u5E8F\u6253\u5F00-pdf-\u6587\u4EF6","children":[]},{"level":2,"title":"\u624B\u5199 \u8FDB\u5EA6\u6761\u7EC4\u4EF6","slug":"\u624B\u5199-\u8FDB\u5EA6\u6761\u7EC4\u4EF6","link":"#\u624B\u5199-\u8FDB\u5EA6\u6761\u7EC4\u4EF6","children":[]},{"level":2,"title":"","slug":"","link":"#","children":[]}],"relativePath":"notes/\u5C0F\u7A0B\u5E8F\u5F00\u53D1\u8BB0\u5F55.md"}'),p={name:"notes/\u5C0F\u7A0B\u5E8F\u5F00\u53D1\u8BB0\u5F55.md"},o=l(`<h1 id="\u5C0F\u7A0B\u5E8F\u76F8\u5173\u8BB0\u5F55\uFF08\u6301\u7EED\u66F4\u65B0-\uFF09" tabindex="-1">\u5C0F\u7A0B\u5E8F\u76F8\u5173\u8BB0\u5F55\uFF08\u6301\u7EED\u66F4\u65B0...\uFF09 <a class="header-anchor" href="#\u5C0F\u7A0B\u5E8F\u76F8\u5173\u8BB0\u5F55\uFF08\u6301\u7EED\u66F4\u65B0-\uFF09" aria-hidden="true">#</a></h1><h2 id="\u5C0F\u7A0B\u5E8F\u53D1\u8D77\u5206\u4EAB-2021-02-24" tabindex="-1">\u5C0F\u7A0B\u5E8F\u53D1\u8D77\u5206\u4EAB (2021-02-24) <a class="header-anchor" href="#\u5C0F\u7A0B\u5E8F\u53D1\u8D77\u5206\u4EAB-2021-02-24" aria-hidden="true">#</a></h2><blockquote><p>\u5C0F\u7A0B\u5E8F\u53D1\u8D77\u5206\u4EAB \u53EA\u80FD\u8BBE\u7F6E\u5B98\u65B9\u63D0\u4F9B\u7684 button \u7EC4\u4EF6</p></blockquote><ol><li><p>\u7ED9 button \u7EC4\u4EF6\u8BBE\u7F6E <code>open-type=&quot;share&quot;</code></p></li><li><p>\u5F53\u7528\u6237\u70B9\u51FB\u6309\u94AE\u540E\u5C31\u4F1A\u89E6\u53D1 Page.onShareAppMessage \u81EA\u5B9A\u4E49\u7684\u4E8B\u4EF6 \uFF08\u901A\u8FC7\u8FD9\u4E2A\u4E8B\u4EF6\u53BB\u5B9A\u4E49\u8F6C\u53D1\u5185\u5BB9\u7684\u76F8\u5173\u4FE1\u606F\uFF09</p></li></ol><h2 id="scroll-view-\u6A2A\u5411\u6EDA\u52A8\u6CE8\u610F\u70B9" tabindex="-1">scroll-view \u6A2A\u5411\u6EDA\u52A8\u6CE8\u610F\u70B9 <a class="header-anchor" href="#scroll-view-\u6A2A\u5411\u6EDA\u52A8\u6CE8\u610F\u70B9" aria-hidden="true">#</a></h2><p>\u6CE8\u610F\uFF1A</p><ol><li>\u5FC5\u987B\u7ED9 scroll-X \u8BBE\u7F6E <code>white-space: nowrap;</code></li><li>\u5B50\u5185\u5BB9 scroll-con \u8BBE\u7F6E <code>display: inline-block;</code></li></ol><div class="language-js"><button class="copy"></button><span class="lang">js</span><pre class="vp-code-dark"><code><span class="line"><span style="color:#666666;">&lt;</span><span style="color:#B8A965;">scroll-view</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">scroll-x</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">true</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">class</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">scroll-X</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">block</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">v-for</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">(item, index) in Data</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#FDAEB7;">:key=&quot;index&quot;&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#FDAEB7;">&lt;view</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">class</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">scroll-con</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#FDAEB7;">@tap=&quot;goDetail(item.id)&quot;&gt;</span></span>
<span class="line"><span style="color:#666666;">      </span><span style="color:#758575DD;">// \u6EDA\u52A8\u7684\u76F8\u5173\u5185\u5BB9</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#FDAEB7;">&lt;/view&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#FDAEB7;">&lt;/block&gt;</span></span>
<span class="line"><span style="color:#FDAEB7;">&lt;/scroll-view&gt;</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#999999;">&lt;</span><span style="color:#998418;">scroll-view</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">scroll-x</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">true</span><span style="color:#B56959AA;">&quot;</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">class</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">scroll-X</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">block</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">v-for</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">(item, index) in Data</span><span style="color:#B56959AA;">&quot;</span><span style="color:#393A34;"> </span><span style="color:#B31D28;">:key=&quot;index&quot;&gt;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B31D28;">&lt;view</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">class</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">scroll-con</span><span style="color:#B56959AA;">&quot;</span><span style="color:#393A34;"> </span><span style="color:#B31D28;">@tap=&quot;goDetail(item.id)&quot;&gt;</span></span>
<span class="line"><span style="color:#999999;">      </span><span style="color:#A0ADA0;">// \u6EDA\u52A8\u7684\u76F8\u5173\u5185\u5BB9</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B31D28;">&lt;/view&gt;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B31D28;">&lt;/block&gt;</span></span>
<span class="line"><span style="color:#B31D28;">&lt;/scroll-view&gt;</span></span>
<span class="line"></span></code></pre></div><div class="language-css"><button class="copy"></button><span class="lang">css</span><pre class="vp-code-dark"><code><span class="line"><span style="color:#666666;">.</span><span style="color:#BD976A;">scroll-X</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">width</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">100</span><span style="color:#CB7676;">%</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">overflow</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C99076;">hidden</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">white-space</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C99076;">nowrap</span><span style="color:#666666;">;</span><span style="color:#DBD7CAEE;"> // \u6EDA\u52A8\u5FC5\u987B\u52A0\u7684\u5C5E\u6027</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#666666;">.</span><span style="color:#BD976A;">scroll-con</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">display</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C99076;">inline-block</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#999999;">.</span><span style="color:#B07D48;">scroll-X</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">width</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">100</span><span style="color:#AB5959;">%</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">overflow</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">hidden</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">white-space</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">nowrap</span><span style="color:#999999;">;</span><span style="color:#393A34;"> // \u6EDA\u52A8\u5FC5\u987B\u52A0\u7684\u5C5E\u6027</span></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#999999;">.</span><span style="color:#B07D48;">scroll-con</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">display</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">inline-block</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="uniapp-\u4E2D-url-\u4F20\u9012\u4E00\u4E2A-obj-\u7684\u65B9\u6CD5-2021-02-24" tabindex="-1">uniapp \u4E2D url \u4F20\u9012\u4E00\u4E2A obj \u7684\u65B9\u6CD5 (2021-02-24) <a class="header-anchor" href="#uniapp-\u4E2D-url-\u4F20\u9012\u4E00\u4E2A-obj-\u7684\u65B9\u6CD5-2021-02-24" aria-hidden="true">#</a></h2><div class="language-js"><button class="copy"></button><span class="lang">js</span><pre class="vp-code-dark"><code><span class="line"><span style="color:#BD976A;">uni</span><span style="color:#666666;">.</span><span style="color:#80A665;">navigateTo</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">url</span><span style="color:#666666;">:</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">xxx?item=</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">+</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">encodeURIComponent</span><span style="color:#666666;">(</span><span style="color:#BD976A;">JSON</span><span style="color:#666666;">.</span><span style="color:#80A665;">stringify</span><span style="color:#666666;">(</span><span style="color:#BD976A;">obj</span><span style="color:#666666;">))</span></span>
<span class="line"><span style="color:#666666;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#80A665;">onLoad</span><span style="color:#666666;">(</span><span style="color:#BD976A;">options</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#4D9375;">if</span><span style="color:#666666;">(</span><span style="color:#BD976A;">options</span><span style="color:#666666;">.</span><span style="color:#BD976A;">item</span><span style="color:#666666;">){</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">item</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">JSON</span><span style="color:#666666;">.</span><span style="color:#80A665;">parse</span><span style="color:#666666;">(</span><span style="color:#80A665;">decodeURIComponent</span><span style="color:#666666;">(</span><span style="color:#BD976A;">options</span><span style="color:#666666;">.</span><span style="color:#BD976A;">item</span><span style="color:#666666;">))</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#B07D48;">uni</span><span style="color:#999999;">.</span><span style="color:#59873A;">navigateTo</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">url</span><span style="color:#999999;">:</span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">xxx?item=</span><span style="color:#B56959AA;">&#39;</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">+</span><span style="color:#393A34;"> </span><span style="color:#59873A;">encodeURIComponent</span><span style="color:#999999;">(</span><span style="color:#B07D48;">JSON</span><span style="color:#999999;">.</span><span style="color:#59873A;">stringify</span><span style="color:#999999;">(</span><span style="color:#B07D48;">obj</span><span style="color:#999999;">))</span></span>
<span class="line"><span style="color:#999999;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#59873A;">onLoad</span><span style="color:#999999;">(</span><span style="color:#B07D48;">options</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#1E754F;">if</span><span style="color:#999999;">(</span><span style="color:#B07D48;">options</span><span style="color:#999999;">.</span><span style="color:#B07D48;">item</span><span style="color:#999999;">){</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">item</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">JSON</span><span style="color:#999999;">.</span><span style="color:#59873A;">parse</span><span style="color:#999999;">(</span><span style="color:#59873A;">decodeURIComponent</span><span style="color:#999999;">(</span><span style="color:#B07D48;">options</span><span style="color:#999999;">.</span><span style="color:#B07D48;">item</span><span style="color:#999999;">))</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="\u5FAE\u4FE1\u516C\u4F17\u53F7-h5-\u5FAE\u4FE1\u6388\u6743\u83B7\u53D6-code-2021-02-24" tabindex="-1">\u5FAE\u4FE1\u516C\u4F17\u53F7 H5 \u5FAE\u4FE1\u6388\u6743\u83B7\u53D6 code (2021-02-24) <a class="header-anchor" href="#\u5FAE\u4FE1\u516C\u4F17\u53F7-h5-\u5FAE\u4FE1\u6388\u6743\u83B7\u53D6-code-2021-02-24" aria-hidden="true">#</a></h2><blockquote><p>\u516C\u4F17\u53F7\u83B7\u53D6 code \u662F\u9700\u8981\u8DF3\u8F6C\u5230\u5FAE\u4FE1\u7684\u76F8\u5173\u7F51\u9875\uFF0C \u7F51\u9875\u56DE\u8DF3\u56DE\u4F60\u6307\u5B9A\u7684\u9875\u9762 url \u5E76\u4E14\u5728\u540E\u9762\u53C2\u6570\u643A\u5E26 code</p></blockquote><div class="language-js"><button class="copy"></button><span class="lang">js</span><pre class="vp-code-dark"><code><span class="line"><span style="color:#80A665;">getCode</span><span style="color:#666666;">()</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">// \u622A\u53D6\u8DEF\u5F84\u4E2D\u7684code\uFF0C\u5982\u679C\u6CA1\u6709\u5C31\u53BB\u5FAE\u4FE1\u6388\u6743\uFF0C\u5982\u679C\u5DF2\u7ECF\u83B7\u53D6\u5230\u4E86\u5C31\u76F4\u63A5\u4F20code\u7ED9\u540E\u53F0\u83B7\u53D6openId</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">// \u5224\u65AD\u662F\u5426\u6709token,\u6709\u5219\u76F4\u63A5\u5F80\u4E0B\u8C03\u7528\u4E1A\u52A1\u63A5\u53E3\uFF0C\u5982\u679C\u6CA1\u6709\uFF0C\u5219\u8C03\u6574\u6388\u6743\u94FE\u63A5newhref</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">// token\u5931\u6548\uFF0C\u628Atoken\u6E05\u7A7A\uFF0C\u7136\u540E\u8DF3\u6388\u6743\u94FE\u63A5</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#CB7676;">let</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">code</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#80A665;">GetQueryString</span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">code</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">local</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">http://xxxxxxxxxxxxx</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;">// \u8BE5\u516C\u4F17\u53F7\u7EBF\u4E0A\u5730\u5740</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">// \u9700\u8981\u516C\u4F17\u53F7\u7684appid:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#CB7676;">let</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">newhref</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">https://open.weixin.qq.com/connect/oauth2/authorize?appid=xxxx&amp;redirect_uri=</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#CB7676;">+</span><span style="color:#80A665;">encodeURIComponent</span><span style="color:#666666;">(</span><span style="color:#BD976A;">local</span><span style="color:#666666;">)</span><span style="color:#CB7676;">+</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">&amp;response_type=code&amp;scope=snsapi_userinfo&amp;state=STATE#wechat_redirect</span><span style="color:#C98A7DAA;">&#39;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#BD976A;">console</span><span style="color:#666666;">.</span><span style="color:#80A665;">log</span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">code</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">code</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#BD976A;">console</span><span style="color:#666666;">.</span><span style="color:#80A665;">log</span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">local</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">local</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#BD976A;">console</span><span style="color:#666666;">.</span><span style="color:#80A665;">log</span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">encodeURIComponent(local)</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">encodeURIComponent</span><span style="color:#666666;">(</span><span style="color:#BD976A;">local</span><span style="color:#666666;">))</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#4D9375;">if</span><span style="color:#666666;">(</span><span style="color:#BD976A;">code</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">==</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">null</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">||</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">code</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">===</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&#39;&#39;</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">location</span><span style="color:#666666;">.</span><span style="color:#80A665;">replace</span><span style="color:#666666;">(</span><span style="color:#BD976A;">newhref</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#80A665;">GetQueryString</span><span style="color:#666666;">(</span><span style="color:#BD976A;">name</span><span style="color:#666666;">){</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;">// \u5224\u65AD\u5730\u5740\u680F\u4E0A\u662F\u5426\u6709 code</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#CB7676;">var</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">reg</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">new</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">RegExp</span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">(^|&amp;)</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#CB7676;">+</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">name</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">+</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">=([^&amp;]*)(&amp;|$)</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#CB7676;">var</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">r</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">window</span><span style="color:#666666;">.</span><span style="color:#BD976A;">location</span><span style="color:#666666;">.</span><span style="color:#BD976A;">search</span><span style="color:#666666;">.</span><span style="color:#80A665;">substr</span><span style="color:#666666;">(</span><span style="color:#4C9A91;">1</span><span style="color:#666666;">).</span><span style="color:#80A665;">match</span><span style="color:#666666;">(</span><span style="color:#BD976A;">reg</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#4D9375;">if</span><span style="color:#666666;">(</span><span style="color:#BD976A;">r</span><span style="color:#CB7676;">!=null</span><span style="color:#666666;">)</span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;">  </span><span style="color:#80A665;">unescape</span><span style="color:#666666;">(</span><span style="color:#BD976A;">r</span><span style="color:#666666;">[</span><span style="color:#4C9A91;">2</span><span style="color:#666666;">]);</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">null</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#666666;">},</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#59873A;">getCode</span><span style="color:#999999;">()</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">// \u622A\u53D6\u8DEF\u5F84\u4E2D\u7684code\uFF0C\u5982\u679C\u6CA1\u6709\u5C31\u53BB\u5FAE\u4FE1\u6388\u6743\uFF0C\u5982\u679C\u5DF2\u7ECF\u83B7\u53D6\u5230\u4E86\u5C31\u76F4\u63A5\u4F20code\u7ED9\u540E\u53F0\u83B7\u53D6openId</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">// \u5224\u65AD\u662F\u5426\u6709token,\u6709\u5219\u76F4\u63A5\u5F80\u4E0B\u8C03\u7528\u4E1A\u52A1\u63A5\u53E3\uFF0C\u5982\u679C\u6CA1\u6709\uFF0C\u5219\u8C03\u6574\u6388\u6743\u94FE\u63A5newhref</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">// token\u5931\u6548\uFF0C\u628Atoken\u6E05\u7A7A\uFF0C\u7136\u540E\u8DF3\u6388\u6743\u94FE\u63A5</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">code</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#59873A;">GetQueryString</span><span style="color:#999999;">(</span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">code</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">local</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">http://xxxxxxxxxxxxx</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">;</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;">// \u8BE5\u516C\u4F17\u53F7\u7EBF\u4E0A\u5730\u5740</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">// \u9700\u8981\u516C\u4F17\u53F7\u7684appid:</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">newhref</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">https://open.weixin.qq.com/connect/oauth2/authorize?appid=xxxx&amp;redirect_uri=</span><span style="color:#B56959AA;">&#39;</span><span style="color:#AB5959;">+</span><span style="color:#59873A;">encodeURIComponent</span><span style="color:#999999;">(</span><span style="color:#B07D48;">local</span><span style="color:#999999;">)</span><span style="color:#AB5959;">+</span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">&amp;response_type=code&amp;scope=snsapi_userinfo&amp;state=STATE#wechat_redirect</span><span style="color:#B56959AA;">&#39;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B07D48;">console</span><span style="color:#999999;">.</span><span style="color:#59873A;">log</span><span style="color:#999999;">(</span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">code</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">code</span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B07D48;">console</span><span style="color:#999999;">.</span><span style="color:#59873A;">log</span><span style="color:#999999;">(</span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">local</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">local</span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B07D48;">console</span><span style="color:#999999;">.</span><span style="color:#59873A;">log</span><span style="color:#999999;">(</span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">encodeURIComponent(local)</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#59873A;">encodeURIComponent</span><span style="color:#999999;">(</span><span style="color:#B07D48;">local</span><span style="color:#999999;">))</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#1E754F;">if</span><span style="color:#999999;">(</span><span style="color:#B07D48;">code</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">==</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">null</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">||</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">code</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">===</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&#39;&#39;</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">location</span><span style="color:#999999;">.</span><span style="color:#59873A;">replace</span><span style="color:#999999;">(</span><span style="color:#B07D48;">newhref</span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#59873A;">GetQueryString</span><span style="color:#999999;">(</span><span style="color:#B07D48;">name</span><span style="color:#999999;">){</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;">// \u5224\u65AD\u5730\u5740\u680F\u4E0A\u662F\u5426\u6709 code</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#AB5959;">var</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">reg</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">new</span><span style="color:#393A34;"> </span><span style="color:#59873A;">RegExp</span><span style="color:#999999;">(</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">(^|&amp;)</span><span style="color:#B56959AA;">&quot;</span><span style="color:#AB5959;">+</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">name</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">+</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">=([^&amp;]*)(&amp;|$)</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#AB5959;">var</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">r</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">window</span><span style="color:#999999;">.</span><span style="color:#B07D48;">location</span><span style="color:#999999;">.</span><span style="color:#B07D48;">search</span><span style="color:#999999;">.</span><span style="color:#59873A;">substr</span><span style="color:#999999;">(</span><span style="color:#2F798A;">1</span><span style="color:#999999;">).</span><span style="color:#59873A;">match</span><span style="color:#999999;">(</span><span style="color:#B07D48;">reg</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#1E754F;">if</span><span style="color:#999999;">(</span><span style="color:#B07D48;">r</span><span style="color:#AB5959;">!=null</span><span style="color:#999999;">)</span><span style="color:#1E754F;">return</span><span style="color:#393A34;">  </span><span style="color:#59873A;">unescape</span><span style="color:#999999;">(</span><span style="color:#B07D48;">r</span><span style="color:#999999;">[</span><span style="color:#2F798A;">2</span><span style="color:#999999;">]);</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">null</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#999999;">},</span></span>
<span class="line"></span></code></pre></div><h2 id="\u7F51\u7EDC\u76D1\u63A7-2021-02-24" tabindex="-1">\u7F51\u7EDC\u76D1\u63A7 (2021-02-24) <a class="header-anchor" href="#\u7F51\u7EDC\u76D1\u63A7-2021-02-24" aria-hidden="true">#</a></h2><p>\u5728 <strong>App.vue</strong> \u4E2D\u653E\u5165\u7F51\u7EDC\u76D1\u63A7\uFF0C \u5F53\u7528\u6237\u65AD\u7F51\u662F\u5F39\u51FA\u65AD\u7F51\u5F39\u51FA\u7981\u6B62\u4E0B\u4E00\u6B65\u64CD\u4F5C\uFF0C\u518D\u6B21\u8054\u7F51\u7684\u65F6\u95F4 \u5173\u95ED\u5F39\u7A97</p><div class="language-js"><button class="copy"></button><span class="lang">js</span><pre class="vp-code-dark"><code><span class="line"><span style="color:#80A665;">onLaunch</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">function</span><span style="color:#666666;">()</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">uni</span><span style="color:#666666;">.</span><span style="color:#80A665;">onNetworkStatusChange</span><span style="color:#666666;">({</span><span style="color:#BD976A;">isConnected</span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#4D9375;">if</span><span style="color:#666666;">(</span><span style="color:#BD976A;">isConnected</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#BD976A;">uni</span><span style="color:#666666;">.</span><span style="color:#80A665;">hideToast</span><span style="color:#666666;">()</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">else</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#BD976A;">uni</span><span style="color:#666666;">.</span><span style="color:#80A665;">hideToast</span><span style="color:#666666;">()</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#BD976A;">uni</span><span style="color:#666666;">.</span><span style="color:#80A665;">showToast</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#B8A965;">title</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">\u60A8\u5DF2\u65AD\u7F51</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#B8A965;">icon</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">none</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#B8A965;">mask</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">true</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#B8A965;">duration</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">6000000</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#666666;">})</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">})</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#59873A;">onLaunch</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">function</span><span style="color:#999999;">()</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">uni</span><span style="color:#999999;">.</span><span style="color:#59873A;">onNetworkStatusChange</span><span style="color:#999999;">({</span><span style="color:#B07D48;">isConnected</span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#1E754F;">if</span><span style="color:#999999;">(</span><span style="color:#B07D48;">isConnected</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#B07D48;">uni</span><span style="color:#999999;">.</span><span style="color:#59873A;">hideToast</span><span style="color:#999999;">()</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">else</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#B07D48;">uni</span><span style="color:#999999;">.</span><span style="color:#59873A;">hideToast</span><span style="color:#999999;">()</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#B07D48;">uni</span><span style="color:#999999;">.</span><span style="color:#59873A;">showToast</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#998418;">title</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">\u60A8\u5DF2\u65AD\u7F51</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#998418;">icon</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">none</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#998418;">mask</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">true</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#998418;">duration</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">6000000</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#999999;">})</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">})</span></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="uniapp-\u5C0F\u7A0B\u5E8F\u957F\u6309\u4FDD\u5B58\u56FE\u7247-\u6388\u6743\u540E\u4FDD\u5B58-\u4E8C\u7EF4\u7801-2021-03-01" tabindex="-1">uniapp \u5C0F\u7A0B\u5E8F\u957F\u6309\u4FDD\u5B58\u56FE\u7247 (\u6388\u6743\u540E\u4FDD\u5B58) (\u4E8C\u7EF4\u7801) (2021-03-01) <a class="header-anchor" href="#uniapp-\u5C0F\u7A0B\u5E8F\u957F\u6309\u4FDD\u5B58\u56FE\u7247-\u6388\u6743\u540E\u4FDD\u5B58-\u4E8C\u7EF4\u7801-2021-03-01" aria-hidden="true">#</a></h2><blockquote><p>\u8BBE\u7F6E\u76F8\u5173\u77E5\u8BC6\u70B9\uFF1A uniapp \u7684 API \u3001\u957F\u6309\u4E8B\u4EF6</p></blockquote><ul><li><p><code>uni.getSetting()</code> \u83B7\u53D6\u5F53\u524D\u7528\u6237\u7684\u6743\u9650\u8BBE\u7F6E</p></li><li><p><code>uni.uni.authorize()</code> \u5411\u7528\u6237\u53D1\u8D77\u76F8\u5173\u7684\u6388\u6743\u8BF7\u6C42</p></li><li><p><code>uni.saveImageToPhotosAlbum()</code> \u628A\u56FE\u7247\u4FDD\u5B58\u672C\u5730\u76F8\u518C</p></li><li><p><code>@longpress=&quot;savePosterPath(qrCodeSrc)&quot;</code> \u957F\u6309\u4E8B\u4EF6 @longpress</p></li></ul><div class="language-js"><button class="copy"></button><span class="lang">js</span><pre class="vp-code-dark"><code><span class="line"><span style="color:#758575DD;">// \u5C0F\u7A0B\u5E8F\u4FDD\u5B58\u56FE\u7247</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#80A665;">savePosterPath</span><span style="color:#666666;">(</span><span style="color:#BD976A;">url</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">uni</span><span style="color:#666666;">.</span><span style="color:#80A665;">downloadFile</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">url</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#80A665;">success</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">resFile</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#BD976A;">console</span><span style="color:#666666;">.</span><span style="color:#80A665;">log</span><span style="color:#666666;">(</span><span style="color:#BD976A;">resFile</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">resFile</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">resFile</span><span style="color:#666666;">.</span><span style="color:#BD976A;">statusCode</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">===</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">200</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#BD976A;">uni</span><span style="color:#666666;">.</span><span style="color:#80A665;">getSetting</span><span style="color:#666666;">({</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;">// \u83B7\u53D6\u7528\u6237\u7684\u5F53\u524D\u8BBE\u7F6E</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#80A665;">success</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">res</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#CB7676;">!</span><span style="color:#BD976A;">res</span><span style="color:#666666;">.</span><span style="color:#BD976A;">authSetting</span><span style="color:#666666;">[</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">scope.writePhotosAlbum</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">])</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;">// \u5982\u679C\u6CA1\u6709\u6388\u6743\u4FDD\u5B58\u5230\u76F8\u518C\u7684\u6743\u9650</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                  </span><span style="color:#BD976A;">uni</span><span style="color:#666666;">.</span><span style="color:#80A665;">authorize</span><span style="color:#666666;">({</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;">// \u5411\u7528\u6237\u53D1\u8D77\u6388\u6743\u8BF7\u6C42</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                    </span><span style="color:#B8A965;">scope</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">scope.writePhotosAlbum</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;">// \u4FDD\u5B58\u5230\u76F8\u518C\u7684\u6743\u9650</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                    </span><span style="color:#80A665;">success</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">()</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                      </span><span style="color:#BD976A;">uni</span><span style="color:#666666;">.</span><span style="color:#80A665;">saveImageToPhotosAlbum</span><span style="color:#666666;">({</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;">// \u8C03\u7528\u4FDD\u5B58\u56FE\u7247\u5230\u76F8\u518C\u7684API</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                        </span><span style="color:#B8A965;">filePath</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">resFile</span><span style="color:#666666;">.</span><span style="color:#BD976A;">tempFilePath</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                        </span><span style="color:#80A665;">success</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">res</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;">// \u4FDD\u5B58\u6210\u529F</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                          </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">uni</span><span style="color:#666666;">.</span><span style="color:#80A665;">showToast</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                            </span><span style="color:#B8A965;">title</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">\u4FDD\u5B58\u6210\u529F\uFF01</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                          </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                        </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                        </span><span style="color:#80A665;">fail</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">res</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;">// \u4FDD\u5B58\u5931\u8D25</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                          </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">uni</span><span style="color:#666666;">.</span><span style="color:#80A665;">showToast</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                            </span><span style="color:#B8A965;">title</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">res</span><span style="color:#666666;">.</span><span style="color:#BD976A;">errMsg</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                          </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                        </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                        </span><span style="color:#80A665;">complete</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">res</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;">// \u65E0\u8BBA\u6210\u529F \u6216 \u5931\u8D25\u6267\u884C</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                          </span><span style="color:#BD976A;">console</span><span style="color:#666666;">.</span><span style="color:#80A665;">log</span><span style="color:#666666;">(</span><span style="color:#BD976A;">res</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                        </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                      </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                    </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                    </span><span style="color:#80A665;">fail</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">()</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;">// \u62D2\u7EDD\u83B7\u53D6\u76F8\u518C\u6743\u9650 \u6267\u884C</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                      </span><span style="color:#BD976A;">uni</span><span style="color:#666666;">.</span><span style="color:#80A665;">showModal</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                        </span><span style="color:#B8A965;">title</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">\u60A8\u5DF2\u62D2\u7EDD\u83B7\u53D6\u76F8\u518C\u6743\u9650</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                        </span><span style="color:#B8A965;">content</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">\u662F\u5426\u8FDB\u5165\u6743\u9650\u7BA1\u7406\uFF0C\u8C03\u6574\u6388\u6743\uFF1F</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                        </span><span style="color:#80A665;">success</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">res</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                          </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">res</span><span style="color:#666666;">.</span><span style="color:#BD976A;">confirm</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                            </span><span style="color:#BD976A;">uni</span><span style="color:#666666;">.</span><span style="color:#80A665;">openSetting</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                              </span><span style="color:#80A665;">success</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">res</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                                </span><span style="color:#BD976A;">console</span><span style="color:#666666;">.</span><span style="color:#80A665;">log</span><span style="color:#666666;">(</span><span style="color:#BD976A;">res</span><span style="color:#666666;">.</span><span style="color:#BD976A;">authSetting</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                              </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                            </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                          </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">else</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">res</span><span style="color:#666666;">.</span><span style="color:#BD976A;">cancel</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                            </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">uni</span><span style="color:#666666;">.</span><span style="color:#80A665;">showToast</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                              </span><span style="color:#B8A965;">title</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">\u5DF2\u53D6\u6D88\uFF01</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                            </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                          </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                        </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                      </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                    </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                  </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">else</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                  </span><span style="color:#BD976A;">uni</span><span style="color:#666666;">.</span><span style="color:#80A665;">saveImageToPhotosAlbum</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                    </span><span style="color:#B8A965;">filePath</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">resFile</span><span style="color:#666666;">.</span><span style="color:#BD976A;">tempFilePath</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                    </span><span style="color:#80A665;">success</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">res</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                      </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">uni</span><span style="color:#666666;">.</span><span style="color:#80A665;">showToast</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                        </span><span style="color:#B8A965;">title</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">\u4FDD\u5B58\u6210\u529F\uFF01</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                      </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                    </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                    </span><span style="color:#80A665;">fail</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">res</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                      </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">uni</span><span style="color:#666666;">.</span><span style="color:#80A665;">showToast</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                        </span><span style="color:#B8A965;">title</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">res</span><span style="color:#666666;">.</span><span style="color:#BD976A;">errMsg</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                      </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                    </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                    </span><span style="color:#80A665;">complete</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">res</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;">// \u65E0\u8BBA\u6210\u529F \u6216 \u5931\u8D25\u6267\u884C</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                      </span><span style="color:#BD976A;">console</span><span style="color:#666666;">.</span><span style="color:#80A665;">log</span><span style="color:#666666;">(</span><span style="color:#BD976A;">res</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                    </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                  </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#80A665;">fail</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">res</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">else</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;">// resFile.statusCode === 200 \u6CA1\u6709\u5BF9</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#BD976A;">console</span><span style="color:#666666;">.</span><span style="color:#80A665;">log</span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">resFile.statusCode === 200 \u6CA1\u6709\u5BF9</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">uni</span><span style="color:#666666;">.</span><span style="color:#80A665;">showToast</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#B8A965;">title</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">resFile</span><span style="color:#666666;">.</span><span style="color:#BD976A;">errMsg</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#80A665;">fail</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">res</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;">// uni.downloadFile \u8FDB\u5165 \u5931\u8D25\u56DE\u8C03</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#BD976A;">console</span><span style="color:#666666;">.</span><span style="color:#80A665;">log</span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">uni.downloadFile \u8FDB\u5165 \u5931\u8D25\u56DE\u8C03</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">uni</span><span style="color:#666666;">.</span><span style="color:#80A665;">showToast</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#B8A965;">title</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">res</span><span style="color:#666666;">.</span><span style="color:#BD976A;">errMsg</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">},</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#A0ADA0;">// \u5C0F\u7A0B\u5E8F\u4FDD\u5B58\u56FE\u7247</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#59873A;">savePosterPath</span><span style="color:#999999;">(</span><span style="color:#B07D48;">url</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">uni</span><span style="color:#999999;">.</span><span style="color:#59873A;">downloadFile</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">url</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#59873A;">success</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">resFile</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#B07D48;">console</span><span style="color:#999999;">.</span><span style="color:#59873A;">log</span><span style="color:#999999;">(</span><span style="color:#B07D48;">resFile</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">resFile</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">resFile</span><span style="color:#999999;">.</span><span style="color:#B07D48;">statusCode</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">===</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">200</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#B07D48;">uni</span><span style="color:#999999;">.</span><span style="color:#59873A;">getSetting</span><span style="color:#999999;">({</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;">// \u83B7\u53D6\u7528\u6237\u7684\u5F53\u524D\u8BBE\u7F6E</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#59873A;">success</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">res</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">                </span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#AB5959;">!</span><span style="color:#B07D48;">res</span><span style="color:#999999;">.</span><span style="color:#B07D48;">authSetting</span><span style="color:#999999;">[</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">scope.writePhotosAlbum</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">])</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;">// \u5982\u679C\u6CA1\u6709\u6388\u6743\u4FDD\u5B58\u5230\u76F8\u518C\u7684\u6743\u9650</span></span>
<span class="line"><span style="color:#393A34;">                  </span><span style="color:#B07D48;">uni</span><span style="color:#999999;">.</span><span style="color:#59873A;">authorize</span><span style="color:#999999;">({</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;">// \u5411\u7528\u6237\u53D1\u8D77\u6388\u6743\u8BF7\u6C42</span></span>
<span class="line"><span style="color:#393A34;">                    </span><span style="color:#998418;">scope</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">scope.writePhotosAlbum</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;">// \u4FDD\u5B58\u5230\u76F8\u518C\u7684\u6743\u9650</span></span>
<span class="line"><span style="color:#393A34;">                    </span><span style="color:#59873A;">success</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">()</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">                      </span><span style="color:#B07D48;">uni</span><span style="color:#999999;">.</span><span style="color:#59873A;">saveImageToPhotosAlbum</span><span style="color:#999999;">({</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;">// \u8C03\u7528\u4FDD\u5B58\u56FE\u7247\u5230\u76F8\u518C\u7684API</span></span>
<span class="line"><span style="color:#393A34;">                        </span><span style="color:#998418;">filePath</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">resFile</span><span style="color:#999999;">.</span><span style="color:#B07D48;">tempFilePath</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">                        </span><span style="color:#59873A;">success</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">res</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;">// \u4FDD\u5B58\u6210\u529F</span></span>
<span class="line"><span style="color:#393A34;">                          </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">uni</span><span style="color:#999999;">.</span><span style="color:#59873A;">showToast</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">                            </span><span style="color:#998418;">title</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">\u4FDD\u5B58\u6210\u529F\uFF01</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">                          </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">                        </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">                        </span><span style="color:#59873A;">fail</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">res</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;">// \u4FDD\u5B58\u5931\u8D25</span></span>
<span class="line"><span style="color:#393A34;">                          </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">uni</span><span style="color:#999999;">.</span><span style="color:#59873A;">showToast</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">                            </span><span style="color:#998418;">title</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">res</span><span style="color:#999999;">.</span><span style="color:#B07D48;">errMsg</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">                          </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">                        </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">                        </span><span style="color:#59873A;">complete</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">res</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;">// \u65E0\u8BBA\u6210\u529F \u6216 \u5931\u8D25\u6267\u884C</span></span>
<span class="line"><span style="color:#393A34;">                          </span><span style="color:#B07D48;">console</span><span style="color:#999999;">.</span><span style="color:#59873A;">log</span><span style="color:#999999;">(</span><span style="color:#B07D48;">res</span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#393A34;">                        </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">                      </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">                    </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">                    </span><span style="color:#59873A;">fail</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">()</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;">// \u62D2\u7EDD\u83B7\u53D6\u76F8\u518C\u6743\u9650 \u6267\u884C</span></span>
<span class="line"><span style="color:#393A34;">                      </span><span style="color:#B07D48;">uni</span><span style="color:#999999;">.</span><span style="color:#59873A;">showModal</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">                        </span><span style="color:#998418;">title</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">\u60A8\u5DF2\u62D2\u7EDD\u83B7\u53D6\u76F8\u518C\u6743\u9650</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">                        </span><span style="color:#998418;">content</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">\u662F\u5426\u8FDB\u5165\u6743\u9650\u7BA1\u7406\uFF0C\u8C03\u6574\u6388\u6743\uFF1F</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">                        </span><span style="color:#59873A;">success</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">res</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">                          </span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">res</span><span style="color:#999999;">.</span><span style="color:#B07D48;">confirm</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">                            </span><span style="color:#B07D48;">uni</span><span style="color:#999999;">.</span><span style="color:#59873A;">openSetting</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">                              </span><span style="color:#59873A;">success</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">res</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">                                </span><span style="color:#B07D48;">console</span><span style="color:#999999;">.</span><span style="color:#59873A;">log</span><span style="color:#999999;">(</span><span style="color:#B07D48;">res</span><span style="color:#999999;">.</span><span style="color:#B07D48;">authSetting</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">                              </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">                            </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">                          </span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">else</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">res</span><span style="color:#999999;">.</span><span style="color:#B07D48;">cancel</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">                            </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">uni</span><span style="color:#999999;">.</span><span style="color:#59873A;">showToast</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">                              </span><span style="color:#998418;">title</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">\u5DF2\u53D6\u6D88\uFF01</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">                            </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">                          </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">                        </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">                      </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">                    </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">                  </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">                </span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">else</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">                  </span><span style="color:#B07D48;">uni</span><span style="color:#999999;">.</span><span style="color:#59873A;">saveImageToPhotosAlbum</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">                    </span><span style="color:#998418;">filePath</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">resFile</span><span style="color:#999999;">.</span><span style="color:#B07D48;">tempFilePath</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">                    </span><span style="color:#59873A;">success</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">res</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">                      </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">uni</span><span style="color:#999999;">.</span><span style="color:#59873A;">showToast</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">                        </span><span style="color:#998418;">title</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">\u4FDD\u5B58\u6210\u529F\uFF01</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">                      </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">                    </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">                    </span><span style="color:#59873A;">fail</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">res</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">                      </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">uni</span><span style="color:#999999;">.</span><span style="color:#59873A;">showToast</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">                        </span><span style="color:#998418;">title</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">res</span><span style="color:#999999;">.</span><span style="color:#B07D48;">errMsg</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">                      </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">                    </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">                    </span><span style="color:#59873A;">complete</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">res</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;">// \u65E0\u8BBA\u6210\u529F \u6216 \u5931\u8D25\u6267\u884C</span></span>
<span class="line"><span style="color:#393A34;">                      </span><span style="color:#B07D48;">console</span><span style="color:#999999;">.</span><span style="color:#59873A;">log</span><span style="color:#999999;">(</span><span style="color:#B07D48;">res</span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#393A34;">                    </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">                  </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">                </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#59873A;">fail</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">res</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{},</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">else</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;">// resFile.statusCode === 200 \u6CA1\u6709\u5BF9</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#B07D48;">console</span><span style="color:#999999;">.</span><span style="color:#59873A;">log</span><span style="color:#999999;">(</span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">resFile.statusCode === 200 \u6CA1\u6709\u5BF9</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">uni</span><span style="color:#999999;">.</span><span style="color:#59873A;">showToast</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#998418;">title</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">resFile</span><span style="color:#999999;">.</span><span style="color:#B07D48;">errMsg</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#59873A;">fail</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">res</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;">// uni.downloadFile \u8FDB\u5165 \u5931\u8D25\u56DE\u8C03</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#B07D48;">console</span><span style="color:#999999;">.</span><span style="color:#59873A;">log</span><span style="color:#999999;">(</span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">uni.downloadFile \u8FDB\u5165 \u5931\u8D25\u56DE\u8C03</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">uni</span><span style="color:#999999;">.</span><span style="color:#59873A;">showToast</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#998418;">title</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">res</span><span style="color:#999999;">.</span><span style="color:#B07D48;">errMsg</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">},</span></span>
<span class="line"></span></code></pre></div><h2 id="uniapp-\u5B9E\u73B0\u4FDD\u5B58\u6D77\u62A5\u7EC4\u4EF6\u5F00\u53D1-2021-03-01" tabindex="-1">Uniapp \u5B9E\u73B0\u4FDD\u5B58\u6D77\u62A5\u7EC4\u4EF6\u5F00\u53D1 (2021-03-01) <a class="header-anchor" href="#uniapp-\u5B9E\u73B0\u4FDD\u5B58\u6D77\u62A5\u7EC4\u4EF6\u5F00\u53D1-2021-03-01" aria-hidden="true">#</a></h2><p>\u601D\u8DEF\uFF1A \u901A\u8FC7 canvas \u7ED8\u5236\u6D77\u62A5\u3002\u901A\u8FC7<code>uni.canvasToTempFilePath</code> \u5C06\u7ED8\u5236\u597D\u7684 canvas \u8F6C\u4E3A\u56FE\u7247\u3002\u901A\u8FC7<code>uni.saveImageToPhotosAlbum</code> \u5C06\u672C\u5730\u4E34\u65F6\u8DEF\u5F84\u7684\u56FE\u7247\u4FDD\u5B58\u81F3\u624B\u673A\u76F8\u518C\u4E2D\u3002</p><h3 id="\u901A\u8FC7-canvas-\u7ED8\u5236\u6D77\u62A5\u5185\u5BB9\u7684\u987A\u5E8F\u5148\u540E\u95EE\u9898" tabindex="-1">\u901A\u8FC7 canvas \u7ED8\u5236\u6D77\u62A5\u5185\u5BB9\u7684\u987A\u5E8F\u5148\u540E\u95EE\u9898 <a class="header-anchor" href="#\u901A\u8FC7-canvas-\u7ED8\u5236\u6D77\u62A5\u5185\u5BB9\u7684\u987A\u5E8F\u5148\u540E\u95EE\u9898" aria-hidden="true">#</a></h3><p>\u901A\u8FC7\u4F7F\u7528 promise \u5BF9\u8C61\u51B3\u5B9A\u7ED8\u5236\u6D77\u62A5\u5185\u5BB9\u7684\u987A\u5E8F\u5148\u540E\u3002<code>promise.all() </code>\u65B9\u6CD5\u8FDB\u884C canvas \u6700\u540E\u4E00\u6B65\u7684\u7ED8\u753B\u64CD\u4F5C <code>context.draw()</code></p><h3 id="\u6CE8\u610F-uni-getimageinfo" tabindex="-1">\u6CE8\u610F uni.getImageInfo() <a class="header-anchor" href="#\u6CE8\u610F-uni-getimageinfo" aria-hidden="true">#</a></h3><ol><li>\u5728\u7ED8\u5236\u56FE\u7247 \u548C \u5934\u50CF\u65F6\uFF0C\u7EC4\u4EF6\u901A\u8FC7<code>uni.getImageInfo() </code> \u53BB\u83B7\u53D6\u56FE\u7247\u7684\u76F8\u5173\u4FE1\u606F\uFF0C\u8C03\u7528\u8BE5\u65B9\u6CD5\u6210\u529F\u7684\u524D\u63D0\u662F\u9700\u8981\u5728\u5FAE\u578B\u5C0F\u7A0B\u5E8F\u540E\u53F0\u914D\u7F6E download \u57DF\u540D\u548C request \u57DF\u540D\u5F53\u7136\u6700\u597D\u628A uploadFile \u57DF\u540D\u4E5F\u4E00\u8D77\u914D\u7F6E\uFF0C\u9632\u6B62\u51FA\u5DEE\u9519\u3002\u4F46\u662F\u5B98\u65B9\u7ED9\u51FA\u7684\u63D0\u793A\u662F\u914D\u7F6E download \u57DF\u540D\u767D\u540D\u5355\u5373\u53EF\uFF0C\u4F46\u662F\u83B7\u53D6\u4E0D\u5230\u56FE\u7247\u4FE1\u606F\uFF0C\u8FD9\u7B97\u662F\u4E00\u4E2A\u5927\u5751\u4E86\u3002</li><li>\u5982\u679C\u6CA1\u6709\u8FDB\u884C\u76F8\u5173\u914D\u7F6E\uFF0C\u5728\u8C03\u8BD5\u65F6 \u6216\u8005 \u4F53\u9A8C\u7248 \u6B63\u5F0F\u7248\u7B49 \u6253\u5F00\u4E86 vconsole\u3002uni.getImageInfo() \u662F\u53EF\u4EE5\u83B7\u53D6\u5230\u56FE\u7247\u4FE1\u606F\u7684\uFF0C\u4E00\u65E6\u5173\u95ED\u4E86 vconsole uni.getImageInfo() \u5C06\u4F1A fail\uFF0C \u4E5F\u662F\u4E2A\u5751\u3002</li></ol><h3 id="\u91CD\u70B9\u7EC4\u4EF6\u65B9\u6CD5\uFF0C\u53D8\u91CF\u4ECB\u7ECD" tabindex="-1">\u91CD\u70B9\u7EC4\u4EF6\u65B9\u6CD5\uFF0C\u53D8\u91CF\u4ECB\u7ECD <a class="header-anchor" href="#\u91CD\u70B9\u7EC4\u4EF6\u65B9\u6CD5\uFF0C\u53D8\u91CF\u4ECB\u7ECD" aria-hidden="true">#</a></h3><h4 id="props" tabindex="-1">props <a class="header-anchor" href="#props" aria-hidden="true">#</a></h4><ol><li>canvasInfo Object \uFF08\u5FC5\u9700\uFF09 <ol><li>canvasWidth \u753B\u5E03\u5BBD\u5EA6</li><li>canvasHeight \u753B\u5E03\u9AD8\u5EA6</li><li>canvasId \u753B\u5E03\u6807\u8BC6</li></ol></li><li>isFullScreen Boolean <ol><li>\u4E3A ture \u65F6\u8868\u793A\u753B\u5E03\u4E3A\u624B\u673A\u5C4F\u5E55\u5168\u5C4F\uFF0CcanvasInfo \u8BBE\u7F6E\u7684\u5BBD\u9AD8\u5C06\u5931\u6548\u3002</li><li>\u9ED8\u8BA4\u4E3A false</li></ol></li></ol><h4 id="methods" tabindex="-1">methods <a class="header-anchor" href="#methods" aria-hidden="true">#</a></h4><ol><li>canvasInit(callback) canvas \u521D\u59CB\u5316\uFF0C\u6240\u6709\u6709\u5173\u753B\u5E03 canvas \u64CD\u4F5C\u9700\u5728\u5176\u56DE\u8C03\u51FD\u6570\u64CD\u4F5C\u3002</li><li>drawCanvasImage(context, src, _imageWidth, _imageHeight, dx, dy) \u5728 canvas \u7ED8\u5236\u4E00\u5F20\u56FE\u7247</li><li>drawCircularAvatar(context, url, _circularX, _circularY, _circularR) \u5728 canvas \u7ED8\u5236\u4E00\u5F20\u5706\u5F62\u56FE\u7247</li><li>drawText(options) \u5728 canvas \u7ED8\u5236\u5355\u884C\u3001\u591A\u884C\u6587\u672C</li><li>startDrawToImage(context, promiseArr, callback) \u5C06 canvas \u64CD\u4F5C draw()\u8FDB\u884C\u7ED8\u5236</li><li>posterToPhotosAlbum(filePath) \u4FDD\u5B58\u81F3\u624B\u673A\u76F8\u518C</li></ol><h3 id="\u5FEB\u901F\u4E0A\u624B" tabindex="-1">\u5FEB\u901F\u4E0A\u624B <a class="header-anchor" href="#\u5FEB\u901F\u4E0A\u624B" aria-hidden="true">#</a></h3><ol><li>\u5F15\u5165\u5E76\u7EC4\u4EF6\u6587\u4EF6</li></ol><div class="language-js"><button class="copy"></button><span class="lang">js</span><pre class="vp-code-dark"><code><span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">SavePosterCom</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">from</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">@/components/SavePosterCom/SavePosterCom.vue</span><span style="color:#C98A7DAA;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#80A665;">components</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">SavePosterCom</span></span>
<span class="line"><span style="color:#666666;">},</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">SavePosterCom</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">from</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">@/components/SavePosterCom/SavePosterCom.vue</span><span style="color:#B56959AA;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#59873A;">components</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">SavePosterCom</span></span>
<span class="line"><span style="color:#999999;">},</span></span>
<span class="line"></span></code></pre></div><ol start="2"><li>\u4F7F\u7528\u7EC4\u4EF6</li></ol><div class="language-vue"><button class="copy"></button><span class="lang">vue</span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CAEE;">canvasInfo: { canvasWidth: 350, canvasHeight: 550, canvasId: &#39;save-poster&#39; },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">&lt;save-poster-com ref=&quot;savePoster&quot; :canvasInfo=&quot;canvasInfo&quot;&gt;&lt;/save-poster-com&gt;</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">canvasInfo: { canvasWidth: 350, canvasHeight: 550, canvasId: &#39;save-poster&#39; },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">&lt;save-poster-com ref=&quot;savePoster&quot; :canvasInfo=&quot;canvasInfo&quot;&gt;&lt;/save-poster-com&gt;</span></span>
<span class="line"></span></code></pre></div><ol start="3"><li>\u7EC4\u4EF6\u7ED8\u5236\u64CD\u4F5C</li></ol><div class="language-js"><button class="copy"></button><span class="lang">js</span><pre class="vp-code-dark"><code><span class="line"><span style="color:#758575DD;">// drawCanvasImage, drawCircularAvatar, drawText \u65B9\u6CD5\u91CC\u90FD\u672A\u6D89\u53CA\u5230\u7EC4\u4EF6\u5B9E\u4F8Bthis\u76F8\u5173\u7684\u64CD\u4F5C\u53EF\u4EE5\u5355\u72EC\u63D0\u53D6\u51FA\u6765\u3002</span></span>
<span class="line"><span style="color:#CB7676;">let</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">drawCanvasImage</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">drawCircularAvatar</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">drawText</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">$refs</span><span style="color:#666666;">.</span><span style="color:#BD976A;">savePoster</span><span style="color:#666666;">.</span><span style="color:#BD976A;">$options</span><span style="color:#666666;">.</span><span style="color:#BD976A;">methods</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD;">// context \u4E3A\u7EC4\u4EF6\u753B\u5E03\u5B9E\u4F8B\uFF0C comThis\u4E3A\u7EC4\u4EF6this</span></span>
<span class="line"><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">$refs</span><span style="color:#666666;">.</span><span style="color:#BD976A;">savePoster</span><span style="color:#666666;">.</span><span style="color:#80A665;">canvasInit</span><span style="color:#666666;">(({</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">context</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">comThis</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">})</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">// \u83B7\u53D6\u753B\u5E03\u5BBD\u9AD8</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#CB7676;">let</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">canvasWH</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">comThis</span><span style="color:#666666;">.</span><span style="color:#BD976A;">canvasWH</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">// 1. \u7ED8\u5236\u6D77\u62A5\u80CC\u666F\u56FE</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#CB7676;">let</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">promise_1</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">drawCanvasImage</span><span style="color:#666666;">(</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">context</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">canvasBgUrl</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">canvasWH</span><span style="color:#666666;">.</span><span style="color:#BD976A;">canvasWidth</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">canvasWH</span><span style="color:#666666;">.</span><span style="color:#BD976A;">canvasHeight</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">// \u5FC5\u987B\u5148\u7ED8\u5236\u73A9\u6D77\u62A5\u80CC\u666F\u56FE \u518D\u53BB\u64CD\u4F5C\u5176\u4ED6\u7ED8\u5236\u5185\u5BB9\uFF0C\u9632\u6B62\u80CC\u666F\u56FE\u8986\u76D6\u5176\u5B83\u7ED8\u5236\u7684\u5185\u5BB9\u3002</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#BD976A;">promise_1</span><span style="color:#666666;">.</span><span style="color:#80A665;">then</span><span style="color:#666666;">((</span><span style="color:#BD976A;">res</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">// 2. \u7ED8\u5236\u7528\u6237\u5934\u50CF</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">let</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">promise_2</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">drawCircularAvatar</span><span style="color:#666666;">(</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">context</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">avatarUrl</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">canvasWH</span><span style="color:#666666;">.</span><span style="color:#BD976A;">canvasWidth</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">/</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">2</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">canvasWH</span><span style="color:#666666;">.</span><span style="color:#BD976A;">canvasHeight</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">/</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">7</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#4C9A91;">40</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">// 3. \u7ED8\u5236\u7528\u6237\u540D</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">let</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">promise_3</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">drawText</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">context</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">context</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">text</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">\u5DE5\u5177\u4EBA</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">dx</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">canvasWH</span><span style="color:#666666;">.</span><span style="color:#BD976A;">canvasWidth</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">/</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">2</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">+</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">30</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">dy</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">canvasWH</span><span style="color:#666666;">.</span><span style="color:#BD976A;">canvasHeight</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">/</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">3.6</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">fontSize</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">20</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">fontColor</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">red</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">// 4. \u7ED8\u5236\u4E8C\u7EF4\u7801</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">let</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">promise_4</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">drawCanvasImage</span><span style="color:#666666;">(</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">context</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">qrCodeUrl</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#4C9A91;">100</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#4C9A91;">100</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">canvasWH</span><span style="color:#666666;">.</span><span style="color:#BD976A;">canvasWidth</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">/</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">2</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">+</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">50</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">canvasWH</span><span style="color:#666666;">.</span><span style="color:#BD976A;">canvasHeight</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">-</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">100</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">// \u5728\u4E0A\u9762 1,2,3,4\u64CD\u4F5C\u540E\uFF0C\u8FDB\u884Cdraw()\uFF0C\u5728startDrawToImage \u7B2C\u4E09\u4E2A\u56DE\u8C03\u51FD\u6570\u4E2D\u8FD4\u56DE\u4E34\u65F6\u56FE\u7247\u8DEF\u5F84</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">$refs</span><span style="color:#666666;">.</span><span style="color:#BD976A;">savePoster</span><span style="color:#666666;">.</span><span style="color:#80A665;">startDrawToImage</span><span style="color:#666666;">(</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">context</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">[</span><span style="color:#BD976A;">promise_1</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">promise_2</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">promise_3</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">promise_4</span><span style="color:#666666;">],</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">(</span><span style="color:#BD976A;">tempFilePath</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">tempFilePath</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">tempFilePath</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#666666;">});</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#A0ADA0;">// drawCanvasImage, drawCircularAvatar, drawText \u65B9\u6CD5\u91CC\u90FD\u672A\u6D89\u53CA\u5230\u7EC4\u4EF6\u5B9E\u4F8Bthis\u76F8\u5173\u7684\u64CD\u4F5C\u53EF\u4EE5\u5355\u72EC\u63D0\u53D6\u51FA\u6765\u3002</span></span>
<span class="line"><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">drawCanvasImage</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">drawCircularAvatar</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">drawText</span><span style="color:#393A34;"> </span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">$refs</span><span style="color:#999999;">.</span><span style="color:#B07D48;">savePoster</span><span style="color:#999999;">.</span><span style="color:#B07D48;">$options</span><span style="color:#999999;">.</span><span style="color:#B07D48;">methods</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;">// context \u4E3A\u7EC4\u4EF6\u753B\u5E03\u5B9E\u4F8B\uFF0C comThis\u4E3A\u7EC4\u4EF6this</span></span>
<span class="line"><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">$refs</span><span style="color:#999999;">.</span><span style="color:#B07D48;">savePoster</span><span style="color:#999999;">.</span><span style="color:#59873A;">canvasInit</span><span style="color:#999999;">(({</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">context</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">comThis</span><span style="color:#393A34;"> </span><span style="color:#999999;">})</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">// \u83B7\u53D6\u753B\u5E03\u5BBD\u9AD8</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">canvasWH</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">comThis</span><span style="color:#999999;">.</span><span style="color:#B07D48;">canvasWH</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">// 1. \u7ED8\u5236\u6D77\u62A5\u80CC\u666F\u56FE</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">promise_1</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#59873A;">drawCanvasImage</span><span style="color:#999999;">(</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">context</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">canvasBgUrl</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">canvasWH</span><span style="color:#999999;">.</span><span style="color:#B07D48;">canvasWidth</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">canvasWH</span><span style="color:#999999;">.</span><span style="color:#B07D48;">canvasHeight</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">// \u5FC5\u987B\u5148\u7ED8\u5236\u73A9\u6D77\u62A5\u80CC\u666F\u56FE \u518D\u53BB\u64CD\u4F5C\u5176\u4ED6\u7ED8\u5236\u5185\u5BB9\uFF0C\u9632\u6B62\u80CC\u666F\u56FE\u8986\u76D6\u5176\u5B83\u7ED8\u5236\u7684\u5185\u5BB9\u3002</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B07D48;">promise_1</span><span style="color:#999999;">.</span><span style="color:#59873A;">then</span><span style="color:#999999;">((</span><span style="color:#B07D48;">res</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">// 2. \u7ED8\u5236\u7528\u6237\u5934\u50CF</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">promise_2</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#59873A;">drawCircularAvatar</span><span style="color:#999999;">(</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">context</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">avatarUrl</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">canvasWH</span><span style="color:#999999;">.</span><span style="color:#B07D48;">canvasWidth</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">/</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">2</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">canvasWH</span><span style="color:#999999;">.</span><span style="color:#B07D48;">canvasHeight</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">/</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">7</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#2F798A;">40</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">// 3. \u7ED8\u5236\u7528\u6237\u540D</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">promise_3</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#59873A;">drawText</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">context</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">context</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">text</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">\u5DE5\u5177\u4EBA</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">dx</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">canvasWH</span><span style="color:#999999;">.</span><span style="color:#B07D48;">canvasWidth</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">/</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">2</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">+</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">30</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">dy</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">canvasWH</span><span style="color:#999999;">.</span><span style="color:#B07D48;">canvasHeight</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">/</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">3.6</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">fontSize</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">20</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">fontColor</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">red</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">// 4. \u7ED8\u5236\u4E8C\u7EF4\u7801</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">promise_4</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#59873A;">drawCanvasImage</span><span style="color:#999999;">(</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">context</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">qrCodeUrl</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#2F798A;">100</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#2F798A;">100</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">canvasWH</span><span style="color:#999999;">.</span><span style="color:#B07D48;">canvasWidth</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">/</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">2</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">+</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">50</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">canvasWH</span><span style="color:#999999;">.</span><span style="color:#B07D48;">canvasHeight</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">100</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">// \u5728\u4E0A\u9762 1,2,3,4\u64CD\u4F5C\u540E\uFF0C\u8FDB\u884Cdraw()\uFF0C\u5728startDrawToImage \u7B2C\u4E09\u4E2A\u56DE\u8C03\u51FD\u6570\u4E2D\u8FD4\u56DE\u4E34\u65F6\u56FE\u7247\u8DEF\u5F84</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">$refs</span><span style="color:#999999;">.</span><span style="color:#B07D48;">savePoster</span><span style="color:#999999;">.</span><span style="color:#59873A;">startDrawToImage</span><span style="color:#999999;">(</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">context</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">[</span><span style="color:#B07D48;">promise_1</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">promise_2</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">promise_3</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">promise_4</span><span style="color:#999999;">],</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">(</span><span style="color:#B07D48;">tempFilePath</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">tempFilePath</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">tempFilePath</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#999999;">});</span></span>
<span class="line"></span></code></pre></div><ol start="4"><li>\u4FDD\u5B58\u56FE\u7247\u81F3\u624B\u673A\u76F8\u518C\u64CD\u4F5C</li></ol><div class="language-js"><button class="copy"></button><span class="lang">js</span><pre class="vp-code-dark"><code><span class="line"><span style="color:#80A665;">saveBtnFun</span><span style="color:#666666;">()</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">uni</span><span style="color:#666666;">.</span><span style="color:#80A665;">showModal</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">title</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">\u4FDD\u5B58\u6D77\u62A5</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">content</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">\u6D77\u62A5\u5C06\u4FDD\u5B58\u81F3\u672C\u5730\u76F8\u518C\u4E2D</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">confirmText</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">\u4FDD\u5B58</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#80A665;">success</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">res</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#4D9375;">if</span><span style="color:#666666;">(</span><span style="color:#BD976A;">res</span><span style="color:#666666;">.</span><span style="color:#BD976A;">confirm</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">$refs</span><span style="color:#666666;">.</span><span style="color:#BD976A;">savePoster</span><span style="color:#666666;">.</span><span style="color:#80A665;">posterToPhotosAlbum</span><span style="color:#666666;">(</span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">tempFilePath</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">})</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#59873A;">saveBtnFun</span><span style="color:#999999;">()</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">uni</span><span style="color:#999999;">.</span><span style="color:#59873A;">showModal</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">title</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">\u4FDD\u5B58\u6D77\u62A5</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">content</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">\u6D77\u62A5\u5C06\u4FDD\u5B58\u81F3\u672C\u5730\u76F8\u518C\u4E2D</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">confirmText</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">\u4FDD\u5B58</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#59873A;">success</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">res</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#1E754F;">if</span><span style="color:#999999;">(</span><span style="color:#B07D48;">res</span><span style="color:#999999;">.</span><span style="color:#B07D48;">confirm</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">                </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">$refs</span><span style="color:#999999;">.</span><span style="color:#B07D48;">savePoster</span><span style="color:#999999;">.</span><span style="color:#59873A;">posterToPhotosAlbum</span><span style="color:#999999;">(</span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">tempFilePath</span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">})</span></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"></span></code></pre></div><h3 id="\u5FEB\u901F\u4E0A\u624B\u793A\u4F8B\u6E90\u7801" tabindex="-1">\u5FEB\u901F\u4E0A\u624B\u793A\u4F8B\u6E90\u7801 <a class="header-anchor" href="#\u5FEB\u901F\u4E0A\u624B\u793A\u4F8B\u6E90\u7801" aria-hidden="true">#</a></h3><div class="language-vue"><button class="copy"></button><span class="lang">vue</span><pre class="vp-code-dark"><code><span class="line"><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">template</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">view</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">scroll-view</span></span>
<span class="line"><span style="color:#666666;">      </span><span style="color:#BD976A;">scroll-x</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">true</span><span style="color:#C98A7DAA;">&quot;</span></span>
<span class="line"><span style="color:#666666;">      </span><span style="color:#BD976A;">class</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">savePoster</span><span style="color:#C98A7DAA;">&quot;</span></span>
<span class="line"><span style="color:#666666;">      :</span><span style="color:#BD976A;">scroll-with-animation</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#4D9375;">true</span><span style="color:#C98A7DAA;">&quot;</span></span>
<span class="line"><span style="color:#666666;">      @</span><span style="color:#BD976A;">scroll</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#BD976A;">scroll</span><span style="color:#C98A7DAA;">&quot;</span></span>
<span class="line"><span style="color:#666666;">    &gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">view</span><span style="color:#666666;"> </span><span style="color:#BD976A;">class</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">savePosterItem</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">image</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">v-show</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#BD976A;">tempFilePath</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">:</span><span style="color:#BD976A;">src</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#BD976A;">tempFilePath</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">&gt;&lt;/</span><span style="color:#4D9375;">image</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">save-poster-com</span></span>
<span class="line"><span style="color:#666666;">          </span><span style="color:#BD976A;">v-show</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#CB7676;">!</span><span style="color:#BD976A;">tempFilePath</span><span style="color:#C98A7DAA;">&quot;</span></span>
<span class="line"><span style="color:#666666;">          </span><span style="color:#BD976A;">ref</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">savePoster</span><span style="color:#C98A7DAA;">&quot;</span></span>
<span class="line"><span style="color:#666666;">          :</span><span style="color:#BD976A;">canvasInfo</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#BD976A;">canvasInfo</span><span style="color:#C98A7DAA;">&quot;</span></span>
<span class="line"><span style="color:#666666;">        &gt;&lt;/</span><span style="color:#4D9375;">save-poster-com</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">&lt;/</span><span style="color:#4D9375;">view</span><span style="color:#666666;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">view</span><span style="color:#666666;"> </span><span style="color:#BD976A;">class</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">savePosterItem</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">image</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">v-show</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#BD976A;">tempFilePath</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">:</span><span style="color:#BD976A;">src</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#BD976A;">tempFilePath</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">&gt;&lt;/</span><span style="color:#4D9375;">image</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">save-poster-com</span></span>
<span class="line"><span style="color:#666666;">          </span><span style="color:#BD976A;">v-show</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#CB7676;">!</span><span style="color:#BD976A;">tempFilePath</span><span style="color:#C98A7DAA;">&quot;</span></span>
<span class="line"><span style="color:#666666;">          </span><span style="color:#BD976A;">ref</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">savePoster</span><span style="color:#C98A7DAA;">&quot;</span></span>
<span class="line"><span style="color:#666666;">          :</span><span style="color:#BD976A;">canvasInfo</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#BD976A;">canvasInfo</span><span style="color:#C98A7DAA;">&quot;</span></span>
<span class="line"><span style="color:#666666;">        &gt;&lt;/</span><span style="color:#4D9375;">save-poster-com</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">&lt;/</span><span style="color:#4D9375;">view</span><span style="color:#666666;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">view</span><span style="color:#666666;"> </span><span style="color:#BD976A;">class</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">savePosterItem</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">image</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">v-show</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#BD976A;">tempFilePath</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">:</span><span style="color:#BD976A;">src</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#BD976A;">tempFilePath</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">&gt;&lt;/</span><span style="color:#4D9375;">image</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">save-poster-com</span></span>
<span class="line"><span style="color:#666666;">          </span><span style="color:#BD976A;">v-show</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#CB7676;">!</span><span style="color:#BD976A;">tempFilePath</span><span style="color:#C98A7DAA;">&quot;</span></span>
<span class="line"><span style="color:#666666;">          </span><span style="color:#BD976A;">ref</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">savePoster</span><span style="color:#C98A7DAA;">&quot;</span></span>
<span class="line"><span style="color:#666666;">          :</span><span style="color:#BD976A;">canvasInfo</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#BD976A;">canvasInfo</span><span style="color:#C98A7DAA;">&quot;</span></span>
<span class="line"><span style="color:#666666;">        &gt;&lt;/</span><span style="color:#4D9375;">save-poster-com</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">&lt;/</span><span style="color:#4D9375;">view</span><span style="color:#666666;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">view</span><span style="color:#666666;"> </span><span style="color:#BD976A;">class</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">savePosterItem</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">image</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">v-show</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#BD976A;">tempFilePath</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">:</span><span style="color:#BD976A;">src</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#BD976A;">tempFilePath</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">&gt;&lt;/</span><span style="color:#4D9375;">image</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">save-poster-com</span></span>
<span class="line"><span style="color:#666666;">          </span><span style="color:#BD976A;">v-show</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#CB7676;">!</span><span style="color:#BD976A;">tempFilePath</span><span style="color:#C98A7DAA;">&quot;</span></span>
<span class="line"><span style="color:#666666;">          </span><span style="color:#BD976A;">ref</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">savePoster</span><span style="color:#C98A7DAA;">&quot;</span></span>
<span class="line"><span style="color:#666666;">          :</span><span style="color:#BD976A;">canvasInfo</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#BD976A;">canvasInfo</span><span style="color:#C98A7DAA;">&quot;</span></span>
<span class="line"><span style="color:#666666;">        &gt;&lt;/</span><span style="color:#4D9375;">save-poster-com</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">&lt;/</span><span style="color:#4D9375;">view</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">&lt;/</span><span style="color:#4D9375;">scroll-view</span><span style="color:#666666;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">button</span><span style="color:#666666;"> </span><span style="color:#BD976A;">class</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">savePosterBtn</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;"> </span><span style="color:#BD976A;">type</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">primary</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;"> @</span><span style="color:#BD976A;">click</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#BD976A;">saveBtnFun</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      \u4FDD\u5B58\u6D77\u62A5</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">&lt;/</span><span style="color:#4D9375;">button</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">&lt;/</span><span style="color:#4D9375;">view</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#666666;">&lt;/</span><span style="color:#4D9375;">template</span><span style="color:#666666;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">script</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">SavePosterCom</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">from</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">@/components/SavePosterCom/SavePosterCom.vue</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">export</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">default</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">name</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">savePosterTwo</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">components</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">SavePosterCom</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#80A665;">data</span><span style="color:#666666;">()</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">canvasInfo</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">canvasWidth</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">350</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">canvasHeight</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">550</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">canvasId</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">save-poster</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">canvasBgUrl</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">https://img0.baidu.com/it/u=3057618655,2802941403&amp;fm=26&amp;fmt=auto&amp;gp=0.jpg</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">avatarUrl</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">https://img0.baidu.com/it/u=1680160535,2861893475&amp;fm=26&amp;fmt=auto&amp;gp=0.jpg</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">qrCodeUrl</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">https://bkimg.cdn.bcebos.com/pic/2934349b033b5bb571dc8c5133d3d539b600bc12?x-bce-process=image/resize,m_lfit,w_268,limit_1/format,f_jpg</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">tempFilePath</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">};</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#80A665;">onLoad</span><span style="color:#666666;">()</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">let</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">drawCanvasImage</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">drawCircularAvatar</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">drawText</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">$refs</span><span style="color:#666666;">.</span><span style="color:#BD976A;">savePoster</span><span style="color:#666666;">.</span><span style="color:#BD976A;">$options</span><span style="color:#666666;">.</span><span style="color:#BD976A;">methods</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">$refs</span><span style="color:#666666;">.</span><span style="color:#BD976A;">savePoster</span><span style="color:#666666;">.</span><span style="color:#80A665;">canvasInit</span><span style="color:#666666;">(({</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">context</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">comThis</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">})</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">      </span><span style="color:#758575DD;">// \u83B7\u53D6\u753B\u5E03\u5BBD\u9AD8</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#CB7676;">let</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">canvasWH</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">comThis</span><span style="color:#666666;">.</span><span style="color:#BD976A;">canvasWH</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#666666;">      </span><span style="color:#758575DD;">// \u7ED8\u5236\u6D77\u62A5\u80CC\u666F\u56FE</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#CB7676;">let</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">promise_1</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">drawCanvasImage</span><span style="color:#666666;">(</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">context</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">canvasBgUrl</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">canvasWH</span><span style="color:#666666;">.</span><span style="color:#BD976A;">canvasWidth</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">canvasWH</span><span style="color:#666666;">.</span><span style="color:#BD976A;">canvasHeight</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#666666;">      </span><span style="color:#758575DD;">// \u5FC5\u987B\u5148\u7ED8\u5236\u73A9\u6D77\u62A5\u80CC\u666F\u56FE \u518D\u53BB\u64CD\u4F5C\u5176\u4ED6\u7ED8\u5236\u5185\u5BB9</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">promise_1</span><span style="color:#666666;">.</span><span style="color:#80A665;">then</span><span style="color:#666666;">((</span><span style="color:#BD976A;">res</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#CB7676;">let</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">promise_2</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">drawCircularAvatar</span><span style="color:#666666;">(</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#BD976A;">context</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">avatarUrl</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#BD976A;">canvasWH</span><span style="color:#666666;">.</span><span style="color:#BD976A;">canvasWidth</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">/</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">2</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#BD976A;">canvasWH</span><span style="color:#666666;">.</span><span style="color:#BD976A;">canvasHeight</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">/</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">7</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#4C9A91;">40</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#CB7676;">let</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">promise_3</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">drawText</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">context</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">context</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">text</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">\u5CB3\u4E91\u9E4F</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">dx</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">canvasWH</span><span style="color:#666666;">.</span><span style="color:#BD976A;">canvasWidth</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">/</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">2</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">+</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">30</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">dy</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">canvasWH</span><span style="color:#666666;">.</span><span style="color:#BD976A;">canvasHeight</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">/</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">3.6</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">fontSize</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">20</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">fontColor</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">red</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#CB7676;">let</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">promise_4</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">drawCanvasImage</span><span style="color:#666666;">(</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#BD976A;">context</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">qrCodeUrl</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#4C9A91;">100</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#4C9A91;">100</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#BD976A;">canvasWH</span><span style="color:#666666;">.</span><span style="color:#BD976A;">canvasWidth</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">/</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">2</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">+</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">50</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#BD976A;">canvasWH</span><span style="color:#666666;">.</span><span style="color:#BD976A;">canvasHeight</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">-</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">100</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">$refs</span><span style="color:#666666;">.</span><span style="color:#BD976A;">savePoster</span><span style="color:#666666;">.</span><span style="color:#80A665;">startDrawToImage</span><span style="color:#666666;">(</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#BD976A;">context</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#666666;">[</span><span style="color:#BD976A;">promise_1</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">promise_2</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">promise_3</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">promise_4</span><span style="color:#666666;">],</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#666666;">(</span><span style="color:#BD976A;">tempFilePath</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">tempFilePath</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">tempFilePath</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">methods</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#80A665;">scroll</span><span style="color:#666666;">(</span><span style="color:#BD976A;">e</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#CB7676;">let</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">scrollWidth</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">e</span><span style="color:#666666;">.</span><span style="color:#BD976A;">detail</span><span style="color:#666666;">.</span><span style="color:#BD976A;">scrollWidth</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#CB7676;">let</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">scrollLeft</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">e</span><span style="color:#666666;">.</span><span style="color:#BD976A;">detail</span><span style="color:#666666;">.</span><span style="color:#BD976A;">scrollLeft</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#CB7676;">let</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">scale</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">scrollLeft</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">/</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">scrollWidth</span><span style="color:#666666;">).</span><span style="color:#80A665;">toFixed</span><span style="color:#666666;">(</span><span style="color:#4C9A91;">2</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">console</span><span style="color:#666666;">.</span><span style="color:#80A665;">log</span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">scale</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">scale</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#80A665;">saveBtnFun</span><span style="color:#666666;">()</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">uni</span><span style="color:#666666;">.</span><span style="color:#80A665;">showModal</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">title</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">\u4FDD\u5B58\u6D77\u62A5</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">content</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">\u9009\u62E9\u7B2C\u4E09\u5F20\u6D77\u62A5\u4FDD\u5B58\u5230\u672C\u5730\u76F8\u518C\u4E2D</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">confirmText</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">\u4FDD\u5B58</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#80A665;">success</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">res</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">res</span><span style="color:#666666;">.</span><span style="color:#BD976A;">confirm</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">$refs</span><span style="color:#666666;">.</span><span style="color:#BD976A;">savePoster</span><span style="color:#666666;">.</span><span style="color:#80A665;">posterToPhotosAlbum</span><span style="color:#666666;">(</span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">tempFilePath</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#666666;">};</span></span>
<span class="line"><span style="color:#666666;">&lt;/</span><span style="color:#4D9375;">script</span><span style="color:#666666;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">style</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#666666;">.</span><span style="color:#BD976A;">savePoster</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">width</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">100</span><span style="color:#CB7676;">%</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">overflow</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C99076;">hidden</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">white-space</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C99076;">nowrap</span><span style="color:#666666;">;</span><span style="color:#DBD7CAEE;"> // \u6EDA\u52A8\u5FC5\u987B\u52A0\u7684\u5C5E\u6027</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#666666;">.</span><span style="color:#BD976A;">savePosterItem</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">display</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C99076;">inline-block</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">width</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">80</span><span style="color:#CB7676;">%</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">height</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">1000</span><span style="color:#DBD7CAEE;">rpx</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">margin</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">20</span><span style="color:#DBD7CAEE;">rpx</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">text-align</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C99076;">center</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#758575DD;">/* border: 1rpx solid #007AFF; */</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#666666;">.</span><span style="color:#BD976A;">savePosterItem</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">image</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">width</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">100</span><span style="color:#CB7676;">%</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">height</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">100</span><span style="color:#CB7676;">%</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#666666;">.</span><span style="color:#BD976A;">savePosterItem</span><span style="color:#666666;">:</span><span style="color:#BD976A;">first-of-type</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">margin-left</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">40</span><span style="color:#DBD7CAEE;">rpx</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#666666;">.</span><span style="color:#BD976A;">savePosterItem</span><span style="color:#666666;">:</span><span style="color:#BD976A;">last-of-type</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">margin-right</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">40</span><span style="color:#DBD7CAEE;">rpx</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#666666;">.</span><span style="color:#BD976A;">savePosterBtn</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">margin-top</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">40</span><span style="color:#DBD7CAEE;">rpx</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">width</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">80</span><span style="color:#CB7676;">%</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#666666;">&lt;/</span><span style="color:#4D9375;">style</span><span style="color:#666666;">&gt;</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">template</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">view</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">scroll-view</span></span>
<span class="line"><span style="color:#999999;">      </span><span style="color:#B07D48;">scroll-x</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">true</span><span style="color:#B56959AA;">&quot;</span></span>
<span class="line"><span style="color:#999999;">      </span><span style="color:#B07D48;">class</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">savePoster</span><span style="color:#B56959AA;">&quot;</span></span>
<span class="line"><span style="color:#999999;">      :</span><span style="color:#B07D48;">scroll-with-animation</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#1E754F;">true</span><span style="color:#B56959AA;">&quot;</span></span>
<span class="line"><span style="color:#999999;">      @</span><span style="color:#B07D48;">scroll</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B07D48;">scroll</span><span style="color:#B56959AA;">&quot;</span></span>
<span class="line"><span style="color:#999999;">    &gt;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">view</span><span style="color:#999999;"> </span><span style="color:#B07D48;">class</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">savePosterItem</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">image</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">v-show</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B07D48;">tempFilePath</span><span style="color:#B56959AA;">&quot;</span><span style="color:#393A34;"> </span><span style="color:#999999;">:</span><span style="color:#B07D48;">src</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B07D48;">tempFilePath</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">&gt;&lt;/</span><span style="color:#1E754F;">image</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">save-poster-com</span></span>
<span class="line"><span style="color:#999999;">          </span><span style="color:#B07D48;">v-show</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#AB5959;">!</span><span style="color:#B07D48;">tempFilePath</span><span style="color:#B56959AA;">&quot;</span></span>
<span class="line"><span style="color:#999999;">          </span><span style="color:#B07D48;">ref</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">savePoster</span><span style="color:#B56959AA;">&quot;</span></span>
<span class="line"><span style="color:#999999;">          :</span><span style="color:#B07D48;">canvasInfo</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B07D48;">canvasInfo</span><span style="color:#B56959AA;">&quot;</span></span>
<span class="line"><span style="color:#999999;">        &gt;&lt;/</span><span style="color:#1E754F;">save-poster-com</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">&lt;/</span><span style="color:#1E754F;">view</span><span style="color:#999999;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">view</span><span style="color:#999999;"> </span><span style="color:#B07D48;">class</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">savePosterItem</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">image</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">v-show</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B07D48;">tempFilePath</span><span style="color:#B56959AA;">&quot;</span><span style="color:#393A34;"> </span><span style="color:#999999;">:</span><span style="color:#B07D48;">src</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B07D48;">tempFilePath</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">&gt;&lt;/</span><span style="color:#1E754F;">image</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">save-poster-com</span></span>
<span class="line"><span style="color:#999999;">          </span><span style="color:#B07D48;">v-show</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#AB5959;">!</span><span style="color:#B07D48;">tempFilePath</span><span style="color:#B56959AA;">&quot;</span></span>
<span class="line"><span style="color:#999999;">          </span><span style="color:#B07D48;">ref</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">savePoster</span><span style="color:#B56959AA;">&quot;</span></span>
<span class="line"><span style="color:#999999;">          :</span><span style="color:#B07D48;">canvasInfo</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B07D48;">canvasInfo</span><span style="color:#B56959AA;">&quot;</span></span>
<span class="line"><span style="color:#999999;">        &gt;&lt;/</span><span style="color:#1E754F;">save-poster-com</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">&lt;/</span><span style="color:#1E754F;">view</span><span style="color:#999999;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">view</span><span style="color:#999999;"> </span><span style="color:#B07D48;">class</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">savePosterItem</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">image</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">v-show</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B07D48;">tempFilePath</span><span style="color:#B56959AA;">&quot;</span><span style="color:#393A34;"> </span><span style="color:#999999;">:</span><span style="color:#B07D48;">src</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B07D48;">tempFilePath</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">&gt;&lt;/</span><span style="color:#1E754F;">image</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">save-poster-com</span></span>
<span class="line"><span style="color:#999999;">          </span><span style="color:#B07D48;">v-show</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#AB5959;">!</span><span style="color:#B07D48;">tempFilePath</span><span style="color:#B56959AA;">&quot;</span></span>
<span class="line"><span style="color:#999999;">          </span><span style="color:#B07D48;">ref</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">savePoster</span><span style="color:#B56959AA;">&quot;</span></span>
<span class="line"><span style="color:#999999;">          :</span><span style="color:#B07D48;">canvasInfo</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B07D48;">canvasInfo</span><span style="color:#B56959AA;">&quot;</span></span>
<span class="line"><span style="color:#999999;">        &gt;&lt;/</span><span style="color:#1E754F;">save-poster-com</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">&lt;/</span><span style="color:#1E754F;">view</span><span style="color:#999999;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">view</span><span style="color:#999999;"> </span><span style="color:#B07D48;">class</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">savePosterItem</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">image</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">v-show</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B07D48;">tempFilePath</span><span style="color:#B56959AA;">&quot;</span><span style="color:#393A34;"> </span><span style="color:#999999;">:</span><span style="color:#B07D48;">src</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B07D48;">tempFilePath</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">&gt;&lt;/</span><span style="color:#1E754F;">image</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">save-poster-com</span></span>
<span class="line"><span style="color:#999999;">          </span><span style="color:#B07D48;">v-show</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#AB5959;">!</span><span style="color:#B07D48;">tempFilePath</span><span style="color:#B56959AA;">&quot;</span></span>
<span class="line"><span style="color:#999999;">          </span><span style="color:#B07D48;">ref</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">savePoster</span><span style="color:#B56959AA;">&quot;</span></span>
<span class="line"><span style="color:#999999;">          :</span><span style="color:#B07D48;">canvasInfo</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B07D48;">canvasInfo</span><span style="color:#B56959AA;">&quot;</span></span>
<span class="line"><span style="color:#999999;">        &gt;&lt;/</span><span style="color:#1E754F;">save-poster-com</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">&lt;/</span><span style="color:#1E754F;">view</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">&lt;/</span><span style="color:#1E754F;">scroll-view</span><span style="color:#999999;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">button</span><span style="color:#999999;"> </span><span style="color:#B07D48;">class</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">savePosterBtn</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;"> </span><span style="color:#B07D48;">type</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">primary</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;"> @</span><span style="color:#B07D48;">click</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B07D48;">saveBtnFun</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">      \u4FDD\u5B58\u6D77\u62A5</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">&lt;/</span><span style="color:#1E754F;">button</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">&lt;/</span><span style="color:#1E754F;">view</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#999999;">&lt;/</span><span style="color:#1E754F;">template</span><span style="color:#999999;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">script</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">SavePosterCom</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">from</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">@/components/SavePosterCom/SavePosterCom.vue</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#1E754F;">export</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">default</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">name</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">savePosterTwo</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">components</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">SavePosterCom</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#59873A;">data</span><span style="color:#999999;">()</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">canvasInfo</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">canvasWidth</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">350</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">canvasHeight</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">550</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">canvasId</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">save-poster</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">canvasBgUrl</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">https://img0.baidu.com/it/u=3057618655,2802941403&amp;fm=26&amp;fmt=auto&amp;gp=0.jpg</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">avatarUrl</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">https://img0.baidu.com/it/u=1680160535,2861893475&amp;fm=26&amp;fmt=auto&amp;gp=0.jpg</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">qrCodeUrl</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">https://bkimg.cdn.bcebos.com/pic/2934349b033b5bb571dc8c5133d3d539b600bc12?x-bce-process=image/resize,m_lfit,w_268,limit_1/format,f_jpg</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">tempFilePath</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">};</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#59873A;">onLoad</span><span style="color:#999999;">()</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">drawCanvasImage</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">drawCircularAvatar</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">drawText</span><span style="color:#393A34;"> </span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">$refs</span><span style="color:#999999;">.</span><span style="color:#B07D48;">savePoster</span><span style="color:#999999;">.</span><span style="color:#B07D48;">$options</span><span style="color:#999999;">.</span><span style="color:#B07D48;">methods</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">$refs</span><span style="color:#999999;">.</span><span style="color:#B07D48;">savePoster</span><span style="color:#999999;">.</span><span style="color:#59873A;">canvasInit</span><span style="color:#999999;">(({</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">context</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">comThis</span><span style="color:#393A34;"> </span><span style="color:#999999;">})</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">      </span><span style="color:#A0ADA0;">// \u83B7\u53D6\u753B\u5E03\u5BBD\u9AD8</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">canvasWH</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">comThis</span><span style="color:#999999;">.</span><span style="color:#B07D48;">canvasWH</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#999999;">      </span><span style="color:#A0ADA0;">// \u7ED8\u5236\u6D77\u62A5\u80CC\u666F\u56FE</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">promise_1</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#59873A;">drawCanvasImage</span><span style="color:#999999;">(</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">context</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">canvasBgUrl</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">canvasWH</span><span style="color:#999999;">.</span><span style="color:#B07D48;">canvasWidth</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">canvasWH</span><span style="color:#999999;">.</span><span style="color:#B07D48;">canvasHeight</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#999999;">      </span><span style="color:#A0ADA0;">// \u5FC5\u987B\u5148\u7ED8\u5236\u73A9\u6D77\u62A5\u80CC\u666F\u56FE \u518D\u53BB\u64CD\u4F5C\u5176\u4ED6\u7ED8\u5236\u5185\u5BB9</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">promise_1</span><span style="color:#999999;">.</span><span style="color:#59873A;">then</span><span style="color:#999999;">((</span><span style="color:#B07D48;">res</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">promise_2</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#59873A;">drawCircularAvatar</span><span style="color:#999999;">(</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#B07D48;">context</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">avatarUrl</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#B07D48;">canvasWH</span><span style="color:#999999;">.</span><span style="color:#B07D48;">canvasWidth</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">/</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">2</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#B07D48;">canvasWH</span><span style="color:#999999;">.</span><span style="color:#B07D48;">canvasHeight</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">/</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">7</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#2F798A;">40</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">promise_3</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#59873A;">drawText</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">context</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">context</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">text</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">\u5CB3\u4E91\u9E4F</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">dx</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">canvasWH</span><span style="color:#999999;">.</span><span style="color:#B07D48;">canvasWidth</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">/</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">2</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">+</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">30</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">dy</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">canvasWH</span><span style="color:#999999;">.</span><span style="color:#B07D48;">canvasHeight</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">/</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">3.6</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">fontSize</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">20</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">fontColor</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">red</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">promise_4</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#59873A;">drawCanvasImage</span><span style="color:#999999;">(</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#B07D48;">context</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">qrCodeUrl</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#2F798A;">100</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#2F798A;">100</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#B07D48;">canvasWH</span><span style="color:#999999;">.</span><span style="color:#B07D48;">canvasWidth</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">/</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">2</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">+</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">50</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#B07D48;">canvasWH</span><span style="color:#999999;">.</span><span style="color:#B07D48;">canvasHeight</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">100</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">$refs</span><span style="color:#999999;">.</span><span style="color:#B07D48;">savePoster</span><span style="color:#999999;">.</span><span style="color:#59873A;">startDrawToImage</span><span style="color:#999999;">(</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#B07D48;">context</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#999999;">[</span><span style="color:#B07D48;">promise_1</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">promise_2</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">promise_3</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">promise_4</span><span style="color:#999999;">],</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#999999;">(</span><span style="color:#B07D48;">tempFilePath</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">tempFilePath</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">tempFilePath</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">methods</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#59873A;">scroll</span><span style="color:#999999;">(</span><span style="color:#B07D48;">e</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">scrollWidth</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">e</span><span style="color:#999999;">.</span><span style="color:#B07D48;">detail</span><span style="color:#999999;">.</span><span style="color:#B07D48;">scrollWidth</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">scrollLeft</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">e</span><span style="color:#999999;">.</span><span style="color:#B07D48;">detail</span><span style="color:#999999;">.</span><span style="color:#B07D48;">scrollLeft</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">scale</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">scrollLeft</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">/</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">scrollWidth</span><span style="color:#999999;">).</span><span style="color:#59873A;">toFixed</span><span style="color:#999999;">(</span><span style="color:#2F798A;">2</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">console</span><span style="color:#999999;">.</span><span style="color:#59873A;">log</span><span style="color:#999999;">(</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">scale</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">scale</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#59873A;">saveBtnFun</span><span style="color:#999999;">()</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">uni</span><span style="color:#999999;">.</span><span style="color:#59873A;">showModal</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">title</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">\u4FDD\u5B58\u6D77\u62A5</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">content</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">\u9009\u62E9\u7B2C\u4E09\u5F20\u6D77\u62A5\u4FDD\u5B58\u5230\u672C\u5730\u76F8\u518C\u4E2D</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">confirmText</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">\u4FDD\u5B58</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#59873A;">success</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">res</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">res</span><span style="color:#999999;">.</span><span style="color:#B07D48;">confirm</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">$refs</span><span style="color:#999999;">.</span><span style="color:#B07D48;">savePoster</span><span style="color:#999999;">.</span><span style="color:#59873A;">posterToPhotosAlbum</span><span style="color:#999999;">(</span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">tempFilePath</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#999999;">};</span></span>
<span class="line"><span style="color:#999999;">&lt;/</span><span style="color:#1E754F;">script</span><span style="color:#999999;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">style</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#999999;">.</span><span style="color:#B07D48;">savePoster</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">width</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">100</span><span style="color:#AB5959;">%</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">overflow</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">hidden</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">white-space</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">nowrap</span><span style="color:#999999;">;</span><span style="color:#393A34;"> // \u6EDA\u52A8\u5FC5\u987B\u52A0\u7684\u5C5E\u6027</span></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#999999;">.</span><span style="color:#B07D48;">savePosterItem</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">display</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">inline-block</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">width</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">80</span><span style="color:#AB5959;">%</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">height</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">1000</span><span style="color:#393A34;">rpx</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">margin</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">20</span><span style="color:#393A34;">rpx</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">text-align</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">center</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#A0ADA0;">/* border: 1rpx solid #007AFF; */</span></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#999999;">.</span><span style="color:#B07D48;">savePosterItem</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">image</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">width</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">100</span><span style="color:#AB5959;">%</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">height</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">100</span><span style="color:#AB5959;">%</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#999999;">.</span><span style="color:#B07D48;">savePosterItem</span><span style="color:#999999;">:</span><span style="color:#B07D48;">first-of-type</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">margin-left</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">40</span><span style="color:#393A34;">rpx</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#999999;">.</span><span style="color:#B07D48;">savePosterItem</span><span style="color:#999999;">:</span><span style="color:#B07D48;">last-of-type</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">margin-right</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">40</span><span style="color:#393A34;">rpx</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#999999;">.</span><span style="color:#B07D48;">savePosterBtn</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">margin-top</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">40</span><span style="color:#393A34;">rpx</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">width</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">80</span><span style="color:#AB5959;">%</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#999999;">&lt;/</span><span style="color:#1E754F;">style</span><span style="color:#999999;">&gt;</span></span>
<span class="line"></span></code></pre></div><h3 id="\u7EC4\u4EF6\u6E90\u7801" tabindex="-1">\u7EC4\u4EF6\u6E90\u7801 <a class="header-anchor" href="#\u7EC4\u4EF6\u6E90\u7801" aria-hidden="true">#</a></h3><div class="language-vue"><button class="copy"></button><span class="lang">vue</span><pre class="vp-code-dark"><code><span class="line"><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">template</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">view</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">canvas</span></span>
<span class="line"><span style="color:#666666;">      :</span><span style="color:#BD976A;">canvas-id</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#BD976A;">canvasInfo</span><span style="color:#666666;">.</span><span style="color:#BD976A;">canvasId</span><span style="color:#C98A7DAA;">&quot;</span></span>
<span class="line"><span style="color:#666666;">      :</span><span style="color:#BD976A;">style</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">        </span><span style="color:#B8A965;">width</span><span style="color:#666666;">: </span><span style="color:#BD976A;">canvasWH</span><span style="color:#666666;">.</span><span style="color:#BD976A;">canvasWidth</span><span style="color:#666666;"> </span><span style="color:#CB7676;">+</span><span style="color:#666666;"> </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">px</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#666666;">        </span><span style="color:#B8A965;">height</span><span style="color:#666666;">: </span><span style="color:#BD976A;">canvasWH</span><span style="color:#666666;">.</span><span style="color:#BD976A;">canvasHeight</span><span style="color:#666666;"> </span><span style="color:#CB7676;">+</span><span style="color:#666666;"> </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">px</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#666666;">      }</span><span style="color:#C98A7DAA;">&quot;</span></span>
<span class="line"><span style="color:#666666;">    &gt;&lt;/</span><span style="color:#4D9375;">canvas</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">&lt;/</span><span style="color:#4D9375;">view</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#666666;">&lt;/</span><span style="color:#4D9375;">template</span><span style="color:#666666;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">script</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#4D9375;">export</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">default</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">name</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">savePosterCom</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#80A665;">data</span><span style="color:#666666;">()</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">userPhoneWHInfo</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">canvasWH</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">canvasWidth</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">canvasHeight</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">};</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">props</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">// \u51B3\u5B9A\u4FDD\u5B58\u4E0B\u6765\u7684\u56FE\u7247\u7684\u5BBD\u9AD8</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">canvasInfo</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">type</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">Object</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#80A665;">default</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">()</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">canvasWidth</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">canvasHeight</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">canvasId</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">canvasId</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">};</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">// canvas\u753B\u5E03\u662F\u4E0D\u662F\u5168\u5C4F\uFF0C\u9ED8\u8BA4\u662Ffalse\u3002 false\u65F6\u4F7F\u7528\u5FC5\u987B\u4F20 canvasInfo</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">isFullScreen</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">Boolean</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#80A665;">created</span><span style="color:#666666;">()</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">userPhoneWHInfo</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#80A665;">getPhoneSystemInfo</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">isFullScreen</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">      </span><span style="color:#758575DD;">// \u753B\u5E03\u5168\u5C4F</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">canvasWH</span><span style="color:#666666;">.</span><span style="color:#BD976A;">canvasWidth</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">userPhoneWHInfo</span><span style="color:#666666;">.</span><span style="color:#BD976A;">windowWidth</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">canvasWH</span><span style="color:#666666;">.</span><span style="color:#BD976A;">canvasHeight</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">userPhoneWHInfo</span><span style="color:#666666;">.</span><span style="color:#BD976A;">windowHeight</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">else</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">      </span><span style="color:#758575DD;">// \u6307\u5B9A\u5BBD\u9AD8</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">canvasWH</span><span style="color:#666666;">.</span><span style="color:#BD976A;">canvasWidth</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">canvasInfo</span><span style="color:#666666;">.</span><span style="color:#BD976A;">canvasWidth</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">canvasWH</span><span style="color:#666666;">.</span><span style="color:#BD976A;">canvasHeight</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">canvasInfo</span><span style="color:#666666;">.</span><span style="color:#BD976A;">canvasHeight</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#80A665;">mounted</span><span style="color:#666666;">()</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">methods</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#758575DD;">/**</span></span>
<span class="line"><span style="color:#758575DD;">     * \u83B7\u53D6\u7528\u6237\u624B\u673A\u5C4F\u5E55\u4FE1\u606F</span></span>
<span class="line"><span style="color:#758575DD;">     */</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#80A665;">getPhoneSystemInfo</span><span style="color:#666666;">()</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">res</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">uni</span><span style="color:#666666;">.</span><span style="color:#80A665;">getSystemInfoSync</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">windowWidth</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">res</span><span style="color:#666666;">.</span><span style="color:#BD976A;">windowWidth</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">windowHeight</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">res</span><span style="color:#666666;">.</span><span style="color:#BD976A;">windowHeight</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">};</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#758575DD;">/** \u83B7\u53D6 CanvasContext\u5B9E\u4F8B</span></span>
<span class="line"><span style="color:#758575DD;">     * </span><span style="color:#666666;">@</span><span style="color:#4D9375;">param</span><span style="color:#758575DD;"> </span><span style="color:#666666;">{</span><span style="color:#5DA9A7;">String</span><span style="color:#666666;">}</span><span style="color:#758575DD;"> </span><span style="color:#BD976A;">canvasId</span></span>
<span class="line"><span style="color:#758575DD;">     */</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#80A665;">getCanvasContextInit</span><span style="color:#666666;">(</span><span style="color:#BD976A;">canvasId</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">uni</span><span style="color:#666666;">.</span><span style="color:#80A665;">createCanvasContext</span><span style="color:#666666;">(</span><span style="color:#BD976A;">canvasId</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C99076;">this</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#758575DD;">/** \u4FDD\u5B58\u6D77\u62A5\u7EC4\u4EF6\u521D\u59CB\u5316</span></span>
<span class="line"><span style="color:#758575DD;">     * </span><span style="color:#666666;">@</span><span style="color:#4D9375;">param</span><span style="color:#758575DD;"> </span><span style="color:#666666;">{</span><span style="color:#5DA9A7;">Function</span><span style="color:#666666;">}</span><span style="color:#758575DD;"> </span><span style="color:#BD976A;">callback</span><span style="color:#758575DD;">(context) \u56DE\u8C03\u51FD\u6570</span></span>
<span class="line"><span style="color:#758575DD;">     */</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#80A665;">canvasInit</span><span style="color:#666666;">(</span><span style="color:#BD976A;">callback</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#CB7676;">let</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">context</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#80A665;">getCanvasContextInit</span><span style="color:#666666;">(</span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">canvasInfo</span><span style="color:#666666;">.</span><span style="color:#BD976A;">canvasId</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">context</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#80A665;">callback</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">context</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">context</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">comThis</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C99076;">this</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#758575DD;">/** \u5C06\u4E0A\u8BC9\u7684\u7ED8\u5236\u753B\u5230\u753B\u5E03\u4E2D \u5E76\u4E14 \u5C06\u753B\u5E03\u5BFC\u51FA\u4E3A\u56FE\u7247</span></span>
<span class="line"><span style="color:#758575DD;">     *  </span><span style="color:#666666;">@</span><span style="color:#4D9375;">param</span><span style="color:#758575DD;"> </span><span style="color:#BD976A;">context</span><span style="color:#758575DD;"> \u753B\u5E03</span></span>
<span class="line"><span style="color:#758575DD;">     *  </span><span style="color:#666666;">@</span><span style="color:#4D9375;">param</span><span style="color:#758575DD;"> </span><span style="color:#666666;">{</span><span style="color:#5DA9A7;">Promise[]</span><span style="color:#666666;">}</span><span style="color:#758575DD;"> \u5B58\u653EPromise\u7684\u6570\u7EC4</span></span>
<span class="line"><span style="color:#758575DD;">     *  </span><span style="color:#666666;">@</span><span style="color:#4D9375;">param</span><span style="color:#758575DD;"> </span><span style="color:#666666;">{</span><span style="color:#5DA9A7;">Function</span><span style="color:#666666;">}</span><span style="color:#758575DD;"> </span><span style="color:#BD976A;">callback</span><span style="color:#758575DD;"> \u4FDD\u5B58\u56FE\u7247\u540E\u6267\u884C\u7684\u56DE\u8C03\u51FD\u6570(\u672C\u5730\u56FE\u7247\u4E34\u65F6\u8DEF\u5F84)</span></span>
<span class="line"><span style="color:#758575DD;">     */</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#80A665;">startDrawToImage</span><span style="color:#666666;">(</span><span style="color:#BD976A;">context</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">promiseArr</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">callback</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">      </span><span style="color:#758575DD;">// \u5C06\u4E4B\u524D\u5728\u7ED8\u56FE\u4E0A\u4E0B\u6587\u4E2D\u7684\u63CF\u8FF0\uFF08\u8DEF\u5F84\u3001\u53D8\u5F62\u3001\u6837\u5F0F\uFF09\u753B\u5230 canvas \u4E2D</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#CB7676;">let</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">canvasId</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">canvasInfo</span><span style="color:#666666;">.</span><span style="color:#BD976A;">canvasId</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#CB7676;">let</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">tempFilePath</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;&quot;</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">Promise</span><span style="color:#666666;">.</span><span style="color:#80A665;">all</span><span style="color:#666666;">(</span><span style="color:#BD976A;">promiseArr</span><span style="color:#666666;">).</span><span style="color:#80A665;">then</span><span style="color:#666666;">((</span><span style="color:#BD976A;">res</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">context</span><span style="color:#666666;">.</span><span style="color:#80A665;">draw</span><span style="color:#666666;">(</span><span style="color:#4D9375;">false</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">async</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">()</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#80A665;">callback</span><span style="color:#666666;">(</span><span style="color:#4D9375;">await</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#80A665;">canvasToImage</span><span style="color:#666666;">(</span><span style="color:#BD976A;">canvasId</span><span style="color:#666666;">));</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#758575DD;">/**</span></span>
<span class="line"><span style="color:#758575DD;">     * \u5728canvas\u7ED8\u5236\u4E00\u5F20\u56FE\u7247</span></span>
<span class="line"><span style="color:#758575DD;">     * </span><span style="color:#666666;">@</span><span style="color:#4D9375;">param</span><span style="color:#758575DD;"> </span><span style="color:#BD976A;">context</span><span style="color:#758575DD;"> \u753B\u5E03</span></span>
<span class="line"><span style="color:#758575DD;">     * </span><span style="color:#666666;">@</span><span style="color:#4D9375;">param</span><span style="color:#758575DD;"> </span><span style="color:#BD976A;">src</span><span style="color:#758575DD;"> \u56FE\u7247\u8D44\u6E90</span></span>
<span class="line"><span style="color:#758575DD;">     * </span><span style="color:#666666;">@</span><span style="color:#4D9375;">param</span><span style="color:#758575DD;"> </span><span style="color:#BD976A;">_imageWidth</span><span style="color:#758575DD;"> \u56FE\u7247\u5BBD\u5EA6</span></span>
<span class="line"><span style="color:#758575DD;">     * </span><span style="color:#666666;">@</span><span style="color:#4D9375;">param</span><span style="color:#758575DD;"> </span><span style="color:#BD976A;">_imageHeight</span><span style="color:#758575DD;"> \u56FE\u7247\u9AD8\u5EA6</span></span>
<span class="line"><span style="color:#758575DD;">     */</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#80A665;">drawCanvasImage</span><span style="color:#666666;">(</span><span style="color:#BD976A;">context</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">src</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">_imageWidth</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">_imageHeight</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">dx</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">dy</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">new</span><span style="color:#DBD7CAEE;"> </span><span style="color:#B8A965;">Promise</span><span style="color:#666666;">((</span><span style="color:#BD976A;">resolve</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">reject</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">uni</span><span style="color:#666666;">.</span><span style="color:#80A665;">getImageInfo</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">src</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">src</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#80A665;">success</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">res</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#BD976A;">context</span><span style="color:#666666;">.</span><span style="color:#80A665;">drawImage</span><span style="color:#666666;">(</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#BD976A;">res</span><span style="color:#666666;">.</span><span style="color:#BD976A;">path</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#BD976A;">dx</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">-</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">_imageWidth</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#BD976A;">dy</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">-</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">_imageHeight</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#BD976A;">_imageWidth</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#BD976A;">_imageHeight</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#80A665;">resolve</span><span style="color:#666666;">(</span><span style="color:#BD976A;">context</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#758575DD;">/** \u7ED8\u5236\u4E00\u4E2A\u5706\u5F62\u5934\u50CF</span></span>
<span class="line"><span style="color:#758575DD;">     * </span><span style="color:#666666;">@</span><span style="color:#4D9375;">param</span><span style="color:#758575DD;">  </span><span style="color:#BD976A;">context</span><span style="color:#758575DD;"> \u753B\u5E03</span></span>
<span class="line"><span style="color:#758575DD;">     * </span><span style="color:#666666;">@</span><span style="color:#4D9375;">param</span><span style="color:#758575DD;">  </span><span style="color:#BD976A;">url</span><span style="color:#758575DD;">     \u56FE\u7247\u5730\u5740</span></span>
<span class="line"><span style="color:#758575DD;">     * </span><span style="color:#666666;">@</span><span style="color:#4D9375;">param</span><span style="color:#758575DD;">  </span><span style="color:#BD976A;">_circularX</span><span style="color:#758575DD;">  \u5706\u5FC3X\u5750\u6807</span></span>
<span class="line"><span style="color:#758575DD;">     * </span><span style="color:#666666;">@</span><span style="color:#4D9375;">param</span><span style="color:#758575DD;">  </span><span style="color:#BD976A;">_circularY</span><span style="color:#758575DD;">  \u5706\u5FC3Y\u5750\u6807</span></span>
<span class="line"><span style="color:#758575DD;">     * </span><span style="color:#666666;">@</span><span style="color:#4D9375;">param</span><span style="color:#758575DD;">  </span><span style="color:#BD976A;">_circularR</span><span style="color:#758575DD;">  \u5706\u534A\u5F84</span></span>
<span class="line"><span style="color:#758575DD;">     */</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#80A665;">drawCircularAvatar</span><span style="color:#666666;">(</span><span style="color:#BD976A;">context</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">url</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">_circularX</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">_circularY</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">_circularR</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#CB7676;">let</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">dx</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">_circularX</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">-</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">_circularR</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#CB7676;">let</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">dy</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">_circularY</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">-</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">_circularR</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#CB7676;">let</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">dwidth</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">_circularR</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">*</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">2</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#CB7676;">let</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">dheight</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">_circularR</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">*</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">2</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">new</span><span style="color:#DBD7CAEE;"> </span><span style="color:#B8A965;">Promise</span><span style="color:#666666;">((</span><span style="color:#BD976A;">resolve</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">reject</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">uni</span><span style="color:#666666;">.</span><span style="color:#80A665;">downloadFile</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">url</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">url</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#80A665;">success</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">res</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#BD976A;">context</span><span style="color:#666666;">.</span><span style="color:#80A665;">save</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#BD976A;">context</span><span style="color:#666666;">.</span><span style="color:#80A665;">beginPath</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#666666;">            </span><span style="color:#758575DD;">// _circularX\u5706\u7684x\u5750\u6807  _circularY\u5706\u7684y\u5750\u6807  _circularR\u5706\u7684\u534A\u5F84</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#BD976A;">context</span><span style="color:#666666;">.</span><span style="color:#80A665;">arc</span><span style="color:#666666;">(</span><span style="color:#BD976A;">_circularX</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">_circularY</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">_circularR</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">2</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">*</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">Math</span><span style="color:#666666;">.</span><span style="color:#BD976A;">PI</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#BD976A;">context</span><span style="color:#666666;">.</span><span style="color:#80A665;">clip</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#666666;">            </span><span style="color:#758575DD;">// dx: \u56FE\u50CF\u7684\u5DE6\u4E0A\u89D2\u5728\u76EE\u6807canvas\u4E0A X \u8F74\u7684\u4F4D\u7F6E</span></span>
<span class="line"><span style="color:#666666;">            </span><span style="color:#758575DD;">// dy: \u56FE\u50CF\u7684\u5DE6\u4E0A\u89D2\u5728\u76EE\u6807canvas\u4E0A Y \u8F74\u7684\u4F4D\u7F6E</span></span>
<span class="line"><span style="color:#666666;">            </span><span style="color:#758575DD;">// dwidth: \u5728\u76EE\u6807\u753B\u5E03\u4E0A\u7ED8\u5236\u56FE\u50CF\u7684\u5BBD\u5EA6\uFF0C\u5141\u8BB8\u5BF9\u7ED8\u5236\u7684\u56FE\u50CF\u8FDB\u884C\u7F29\u653E</span></span>
<span class="line"><span style="color:#666666;">            </span><span style="color:#758575DD;">// dheight: \u5728\u76EE\u6807\u753B\u5E03\u4E0A\u7ED8\u5236\u56FE\u50CF\u7684\u9AD8\u5EA6\uFF0C\u5141\u8BB8\u5BF9\u7ED8\u5236\u7684\u56FE\u50CF\u8FDB\u884C\u7F29\u653E</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#BD976A;">context</span><span style="color:#666666;">.</span><span style="color:#80A665;">drawImage</span><span style="color:#666666;">(</span><span style="color:#BD976A;">res</span><span style="color:#666666;">.</span><span style="color:#BD976A;">tempFilePath</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">dx</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">dy</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">dwidth</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">dheight</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#BD976A;">context</span><span style="color:#666666;">.</span><span style="color:#80A665;">restore</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#666666;">            </span><span style="color:#758575DD;">// context.draw()</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#80A665;">resolve</span><span style="color:#666666;">(</span><span style="color:#BD976A;">context</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#758575DD;">/** \u7ED8\u5236\u591A\u884C\u6587\u672C \u6CE8:, \u548C \u7A7A\u683C\u90FD\u7B97\u4E00\u4E2A\u5B57</span></span>
<span class="line"><span style="color:#758575DD;">     * </span><span style="color:#666666;">@</span><span style="color:#4D9375;">param</span><span style="color:#758575DD;"> </span><span style="color:#BD976A;">context</span><span style="color:#758575DD;"> \u753B\u5E03</span></span>
<span class="line"><span style="color:#758575DD;">     * </span><span style="color:#666666;">@</span><span style="color:#4D9375;">param</span><span style="color:#758575DD;"> </span><span style="color:#BD976A;">text</span><span style="color:#758575DD;"> \u9700\u8981\u88AB\u7ED8\u5236\u7684\u6587\u672C</span></span>
<span class="line"><span style="color:#758575DD;">     * </span><span style="color:#666666;">@</span><span style="color:#4D9375;">param</span><span style="color:#758575DD;"> </span><span style="color:#BD976A;">dx</span><span style="color:#758575DD;"> \u5DE6\u4E0A\u89D2x\u5750\u6807</span></span>
<span class="line"><span style="color:#758575DD;">     * </span><span style="color:#666666;">@</span><span style="color:#4D9375;">param</span><span style="color:#758575DD;"> </span><span style="color:#BD976A;">dy</span><span style="color:#758575DD;"> \u53F3\u4E0A\u89D2y\u5750\u6807</span></span>
<span class="line"><span style="color:#758575DD;">     * </span><span style="color:#666666;">@</span><span style="color:#4D9375;">param</span><span style="color:#758575DD;"> </span><span style="color:#BD976A;">rowStrnum</span><span style="color:#758575DD;"> \u6BCF\u884C\u591A\u5C11\u4E2A\u5B57 (\u9ED8\u8BA4\u4E3Atext\u5B57\u4F53\u4E2A\u6570-&gt;\u5355\u884C)</span></span>
<span class="line"><span style="color:#758575DD;">     * </span><span style="color:#666666;">@</span><span style="color:#4D9375;">param</span><span style="color:#758575DD;"> </span><span style="color:#BD976A;">fontSize</span><span style="color:#758575DD;"> \u6587\u5B57\u5927\u5C0F \uFF08\u9ED8\u8BA416\uFF09</span></span>
<span class="line"><span style="color:#758575DD;">     * </span><span style="color:#666666;">@</span><span style="color:#4D9375;">param</span><span style="color:#758575DD;"> </span><span style="color:#BD976A;">fontColor</span><span style="color:#758575DD;"> \u6587\u5B57\u989C\u8272 (\u9ED8\u8BA4black)</span></span>
<span class="line"><span style="color:#758575DD;">     * </span><span style="color:#666666;">@</span><span style="color:#4D9375;">param</span><span style="color:#758575DD;"> </span><span style="color:#BD976A;">lineHeight</span><span style="color:#758575DD;"> \u5355\u884C\u6587\u672C\u884C\u9AD8 (\u9ED8\u8BA40)</span></span>
<span class="line"><span style="color:#758575DD;">     */</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#80A665;">drawText</span><span style="color:#666666;">(</span><span style="color:#BD976A;">options</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#CB7676;">let</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">context</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">text</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">dx</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">dy</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">rowStrnum</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">text</span><span style="color:#666666;">.</span><span style="color:#B8A965;">length</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">lineHeight</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">fontSize</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">16</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">fontColor</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">black</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">options</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">new</span><span style="color:#DBD7CAEE;"> </span><span style="color:#B8A965;">Promise</span><span style="color:#666666;">((</span><span style="color:#BD976A;">resolve</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">reject</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">context</span><span style="color:#666666;">.</span><span style="color:#80A665;">setFontSize</span><span style="color:#666666;">(</span><span style="color:#BD976A;">fontSize</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">context</span><span style="color:#666666;">.</span><span style="color:#80A665;">setFillStyle</span><span style="color:#666666;">(</span><span style="color:#BD976A;">fontColor</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">context</span><span style="color:#666666;">.</span><span style="color:#80A665;">setTextBaseline</span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">middle</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#666666;">        </span><span style="color:#758575DD;">// \u83B7\u53D6\u9700\u8981\u7ED8\u5236\u7684\u6587\u672C\u5BBD\u5EA6</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#CB7676;">let</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">textWidth</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">Number</span><span style="color:#666666;">(</span><span style="color:#BD976A;">context</span><span style="color:#666666;">.</span><span style="color:#80A665;">measureText</span><span style="color:#666666;">(</span><span style="color:#BD976A;">text</span><span style="color:#666666;">).</span><span style="color:#BD976A;">width</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#666666;">        </span><span style="color:#758575DD;">// console.log(&#39;textWidth&#39;,textWidth)</span></span>
<span class="line"><span style="color:#666666;">        </span><span style="color:#758575DD;">// \u83B7\u53D6\u6587\u672C\u7684\u5B57\u6570</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#CB7676;">let</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">textNum</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">text</span><span style="color:#666666;">.</span><span style="color:#B8A965;">length</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#666666;">        </span><span style="color:#758575DD;">// \u83B7\u53D6\u884C\u6570 \u5411\u4E0A\u53D6\u6574</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#CB7676;">let</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">lineNum</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">Math</span><span style="color:#666666;">.</span><span style="color:#80A665;">ceil</span><span style="color:#666666;">(</span><span style="color:#BD976A;">textNum</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">/</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">rowStrnum</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#666666;">        </span><span style="color:#758575DD;">// console.log(&#39;textNum&#39;,textNum)</span></span>
<span class="line"><span style="color:#666666;">        </span><span style="color:#758575DD;">// console.log(&#39;lineNum&#39;,lineNum)</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#4D9375;">for</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#CB7676;">let</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">i</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0</span><span style="color:#666666;">;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">i</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">lineNum</span><span style="color:#666666;">;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">i</span><span style="color:#CB7676;">++</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#CB7676;">let</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">sliceText</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">text</span><span style="color:#666666;">.</span><span style="color:#80A665;">slice</span><span style="color:#666666;">(</span><span style="color:#BD976A;">i</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">*</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">rowStrnum</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">i</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">+</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">1</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">*</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">rowStrnum</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#666666;">          </span><span style="color:#758575DD;">// fillText \u7684 dx = \u6587\u5B57\u6700\u5DE6\u8FB9\u7684\u8DDD\u79BB\u5230\u5C4F\u5E55\u653F\u7B56\u7684\u8DDD\u79BB</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#BD976A;">context</span><span style="color:#666666;">.</span><span style="color:#80A665;">fillText</span><span style="color:#666666;">(</span><span style="color:#BD976A;">sliceText</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">dx</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">-</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">textWidth</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">dy</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">+</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">i</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">*</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">lineHeight</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#80A665;">resolve</span><span style="color:#666666;">(</span><span style="color:#BD976A;">context</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#758575DD;">/** \u5C06\u753B\u5E03\u5BFC\u51FA\u4E3A\u56FE\u7247</span></span>
<span class="line"><span style="color:#758575DD;">     * </span><span style="color:#666666;">@</span><span style="color:#4D9375;">param</span><span style="color:#758575DD;"> </span><span style="color:#BD976A;">canvasId</span><span style="color:#758575DD;"> \u753B\u5E03\u6807\u8BC6</span></span>
<span class="line"><span style="color:#758575DD;">     */</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#80A665;">canvasToImage</span><span style="color:#666666;">(</span><span style="color:#BD976A;">canvasId</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">new</span><span style="color:#DBD7CAEE;"> </span><span style="color:#B8A965;">Promise</span><span style="color:#666666;">((</span><span style="color:#BD976A;">resolve</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">reject</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">uni</span><span style="color:#666666;">.</span><span style="color:#80A665;">canvasToTempFilePath</span><span style="color:#666666;">(</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#B8A965;">canvasId</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">canvasId</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;">// \u753B\u5E03\u6807\u8BC6</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#80A665;">success</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">res</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">              </span><span style="color:#758575DD;">// \u5728H5\u5E73\u53F0\u4E0B\uFF0CtempFilePath \u4E3A base64</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#80A665;">resolve</span><span style="color:#666666;">(</span><span style="color:#BD976A;">res</span><span style="color:#666666;">.</span><span style="color:#BD976A;">tempFilePath</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#80A665;">fail</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">err</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#BD976A;">console</span><span style="color:#666666;">.</span><span style="color:#80A665;">log</span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">err</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">err</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#80A665;">reject</span><span style="color:#666666;">(</span><span style="color:#BD976A;">err</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#C99076;">this</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#758575DD;">/** \u4FDD\u5B58\u751F\u6210\u7684\u56FE\u7247\u5230\u672C\u5730\u76F8\u518C\u4E2D</span></span>
<span class="line"><span style="color:#758575DD;">     *  </span><span style="color:#666666;">@</span><span style="color:#4D9375;">param</span><span style="color:#758575DD;"> </span><span style="color:#666666;">{</span><span style="color:#5DA9A7;">String</span><span style="color:#666666;">}</span><span style="color:#758575DD;"> </span><span style="color:#BD976A;">filePath</span><span style="color:#758575DD;"> \u56FE\u7247\u4E34\u65F6\u8DEF\u52B2</span></span>
<span class="line"><span style="color:#758575DD;">     */</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#80A665;">posterToPhotosAlbum</span><span style="color:#666666;">(</span><span style="color:#BD976A;">filePath</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">uni</span><span style="color:#666666;">.</span><span style="color:#80A665;">showLoading</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">title</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">\u4FDD\u5B58\u4E2D...</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">uni</span><span style="color:#666666;">.</span><span style="color:#80A665;">saveImageToPhotosAlbum</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">filePath</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">filePath</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#80A665;">success</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">res</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#BD976A;">uni</span><span style="color:#666666;">.</span><span style="color:#80A665;">showToast</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#B8A965;">title</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">\u4FDD\u5B58\u6210\u529F\uFF0C\u8BF7\u524D\u5F80\u624B\u673A\u76F8\u518C\u4E2D\u67E5\u770B</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#B8A965;">mask</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">true</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#B8A965;">icon</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">none</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#B8A965;">duration</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">2000</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#80A665;">fail</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">err</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#BD976A;">console</span><span style="color:#666666;">.</span><span style="color:#80A665;">log</span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">err</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">err</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">err</span><span style="color:#666666;">.</span><span style="color:#BD976A;">errMsg</span><span style="color:#666666;">.</span><span style="color:#80A665;">includes</span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">deny</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">||</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">err</span><span style="color:#666666;">.</span><span style="color:#BD976A;">errMsg</span><span style="color:#666666;">.</span><span style="color:#80A665;">includes</span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">denied</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">))</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">            </span><span style="color:#758575DD;">// \u7528\u6237\u9009\u62E9\u62D2\u7EDD</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#80A665;">openSetting</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">else</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">err</span><span style="color:#666666;">.</span><span style="color:#BD976A;">errMsg</span><span style="color:#666666;">.</span><span style="color:#80A665;">includes</span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">fail cancel</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">))</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">            </span><span style="color:#758575DD;">// \u7528\u6237\u5728\u4FDD\u5B58\u56FE\u7247\u65F6 \u53D6\u6D88\u4E86</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#BD976A;">uni</span><span style="color:#666666;">.</span><span style="color:#80A665;">showToast</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#B8A965;">title</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">\u5DF2\u53D6\u6D88\u4FDD\u5B58\uFF0C\u65E0\u6CD5\u4FDD\u5B58\u81F3\u76F8\u518C</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#B8A965;">mask</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">true</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#B8A965;">icon</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">none</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#B8A965;">duration</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">2000</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#4D9375;">return</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#80A665;">complete</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">()</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#BD976A;">uni</span><span style="color:#666666;">.</span><span style="color:#80A665;">hideLoading</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#758575DD;">/**</span></span>
<span class="line"><span style="color:#758575DD;">     * \u6253\u5F00\u6444\u50CF\u5934\u8BBE\u7F6E\u6743\u9650\u9875\u9762</span></span>
<span class="line"><span style="color:#758575DD;">     */</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#80A665;">openSetting</span><span style="color:#666666;">()</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">uni</span><span style="color:#666666;">.</span><span style="color:#80A665;">showModal</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">title</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">\u6E29\u99A8\u63D0\u793A</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">content</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">\u4FDD\u5B58\u56FE\u7247\u81F3\u76F8\u518C\u4E2D\uFF0C\u9700\u8981\u60A8\u540C\u610F\u6DFB\u52A0\u8BBF\u95EE\u76F8\u518C\u6743\u9650</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">cancelText</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">\u62D2\u7EDD</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">confirmText</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">\u540C\u610F</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#80A665;">success</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">res</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">res</span><span style="color:#666666;">.</span><span style="color:#BD976A;">confirm</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#BD976A;">uni</span><span style="color:#666666;">.</span><span style="color:#80A665;">openSetting</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#80A665;">success</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">settingdata</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">settingdata</span><span style="color:#666666;">.</span><span style="color:#BD976A;">authSetting</span><span style="color:#666666;">[</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">scope.writePhotosAlbum</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">])</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                  </span><span style="color:#BD976A;">console</span><span style="color:#666666;">.</span><span style="color:#80A665;">log</span><span style="color:#666666;">(</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                    </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">\u83B7\u53D6\u6743\u9650\u6210\u529F\uFF0C\u7ED9\u51FA\u518D\u6B21\u70B9\u51FB\u56FE\u7247\u4FDD\u5B58\u5230\u76F8\u518C\u7684\u63D0\u793A\u3002</span><span style="color:#C98A7DAA;">&quot;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                  </span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                  </span><span style="color:#BD976A;">uni</span><span style="color:#666666;">.</span><span style="color:#80A665;">showToast</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                    </span><span style="color:#B8A965;">title</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">\u6388\u6743\u6210\u529F\uFF0C\u8BF7\u518D\u6B21\u70B9\u51FB\u4FDD\u5B58</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                    </span><span style="color:#B8A965;">icon</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">none</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                    </span><span style="color:#B8A965;">duration</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">2000</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                  </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">else</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                  </span><span style="color:#BD976A;">console</span><span style="color:#666666;">.</span><span style="color:#80A665;">log</span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">\u83B7\u53D6\u6743\u9650\u5931\u8D25\uFF0C\u7ED9\u51FA\u4E0D\u7ED9\u6743\u9650\u5C31\u65E0\u6CD5\u6B63\u5E38\u4F7F\u7528\u7684\u63D0\u793A</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                  </span><span style="color:#BD976A;">uni</span><span style="color:#666666;">.</span><span style="color:#80A665;">showToast</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                    </span><span style="color:#B8A965;">title</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">\u9700\u8981\u8BBF\u95EE\u76F8\u518C\u6743\u9650</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                    </span><span style="color:#B8A965;">icon</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">none</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                    </span><span style="color:#B8A965;">duration</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">2000</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                  </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#80A665;">fail</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">res</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                </span><span style="color:#BD976A;">console</span><span style="color:#666666;">.</span><span style="color:#80A665;">log</span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">err</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">err</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">else</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#BD976A;">uni</span><span style="color:#666666;">.</span><span style="color:#80A665;">showToast</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#B8A965;">title</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">\u5DF2\u62D2\u7EDD\u6388\u6743\uFF0C\u65E0\u6CD5\u4FDD\u5B58\u81F3\u76F8\u518C</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#B8A965;">mask</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">true</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#B8A965;">icon</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">none</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#B8A965;">duration</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">2000</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#4D9375;">return</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#666666;">};</span></span>
<span class="line"><span style="color:#666666;">&lt;/</span><span style="color:#4D9375;">script</span><span style="color:#666666;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">style</span><span style="color:#666666;">&gt;&lt;/</span><span style="color:#4D9375;">style</span><span style="color:#666666;">&gt;</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">template</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">view</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">canvas</span></span>
<span class="line"><span style="color:#999999;">      :</span><span style="color:#B07D48;">canvas-id</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B07D48;">canvasInfo</span><span style="color:#999999;">.</span><span style="color:#B07D48;">canvasId</span><span style="color:#B56959AA;">&quot;</span></span>
<span class="line"><span style="color:#999999;">      :</span><span style="color:#B07D48;">style</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">        </span><span style="color:#998418;">width</span><span style="color:#999999;">: </span><span style="color:#B07D48;">canvasWH</span><span style="color:#999999;">.</span><span style="color:#B07D48;">canvasWidth</span><span style="color:#999999;"> </span><span style="color:#AB5959;">+</span><span style="color:#999999;"> </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">px</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#999999;">        </span><span style="color:#998418;">height</span><span style="color:#999999;">: </span><span style="color:#B07D48;">canvasWH</span><span style="color:#999999;">.</span><span style="color:#B07D48;">canvasHeight</span><span style="color:#999999;"> </span><span style="color:#AB5959;">+</span><span style="color:#999999;"> </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">px</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#999999;">      }</span><span style="color:#B56959AA;">&quot;</span></span>
<span class="line"><span style="color:#999999;">    &gt;&lt;/</span><span style="color:#1E754F;">canvas</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">&lt;/</span><span style="color:#1E754F;">view</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#999999;">&lt;/</span><span style="color:#1E754F;">template</span><span style="color:#999999;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">script</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#1E754F;">export</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">default</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">name</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">savePosterCom</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#59873A;">data</span><span style="color:#999999;">()</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">userPhoneWHInfo</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{},</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">canvasWH</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">canvasWidth</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">canvasHeight</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">};</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">props</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">// \u51B3\u5B9A\u4FDD\u5B58\u4E0B\u6765\u7684\u56FE\u7247\u7684\u5BBD\u9AD8</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">canvasInfo</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">type</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">Object</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#59873A;">default</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">()</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">canvasWidth</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">canvasHeight</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">canvasId</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">canvasId</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">};</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">// canvas\u753B\u5E03\u662F\u4E0D\u662F\u5168\u5C4F\uFF0C\u9ED8\u8BA4\u662Ffalse\u3002 false\u65F6\u4F7F\u7528\u5FC5\u987B\u4F20 canvasInfo</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">isFullScreen</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">Boolean</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#59873A;">created</span><span style="color:#999999;">()</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">userPhoneWHInfo</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#59873A;">getPhoneSystemInfo</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">isFullScreen</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">      </span><span style="color:#A0ADA0;">// \u753B\u5E03\u5168\u5C4F</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">canvasWH</span><span style="color:#999999;">.</span><span style="color:#B07D48;">canvasWidth</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">userPhoneWHInfo</span><span style="color:#999999;">.</span><span style="color:#B07D48;">windowWidth</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">canvasWH</span><span style="color:#999999;">.</span><span style="color:#B07D48;">canvasHeight</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">userPhoneWHInfo</span><span style="color:#999999;">.</span><span style="color:#B07D48;">windowHeight</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">else</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">      </span><span style="color:#A0ADA0;">// \u6307\u5B9A\u5BBD\u9AD8</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">canvasWH</span><span style="color:#999999;">.</span><span style="color:#B07D48;">canvasWidth</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">canvasInfo</span><span style="color:#999999;">.</span><span style="color:#B07D48;">canvasWidth</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">canvasWH</span><span style="color:#999999;">.</span><span style="color:#B07D48;">canvasHeight</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">canvasInfo</span><span style="color:#999999;">.</span><span style="color:#B07D48;">canvasHeight</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#59873A;">mounted</span><span style="color:#999999;">()</span><span style="color:#393A34;"> </span><span style="color:#999999;">{},</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">methods</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#A0ADA0;">/**</span></span>
<span class="line"><span style="color:#A0ADA0;">     * \u83B7\u53D6\u7528\u6237\u624B\u673A\u5C4F\u5E55\u4FE1\u606F</span></span>
<span class="line"><span style="color:#A0ADA0;">     */</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#59873A;">getPhoneSystemInfo</span><span style="color:#999999;">()</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">res</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">uni</span><span style="color:#999999;">.</span><span style="color:#59873A;">getSystemInfoSync</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">windowWidth</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">res</span><span style="color:#999999;">.</span><span style="color:#B07D48;">windowWidth</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">windowHeight</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">res</span><span style="color:#999999;">.</span><span style="color:#B07D48;">windowHeight</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">};</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#A0ADA0;">/** \u83B7\u53D6 CanvasContext\u5B9E\u4F8B</span></span>
<span class="line"><span style="color:#A0ADA0;">     * </span><span style="color:#999999;">@</span><span style="color:#1E754F;">param</span><span style="color:#A0ADA0;"> </span><span style="color:#999999;">{</span><span style="color:#2E808F;">String</span><span style="color:#999999;">}</span><span style="color:#A0ADA0;"> </span><span style="color:#B07D48;">canvasId</span></span>
<span class="line"><span style="color:#A0ADA0;">     */</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#59873A;">getCanvasContextInit</span><span style="color:#999999;">(</span><span style="color:#B07D48;">canvasId</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">uni</span><span style="color:#999999;">.</span><span style="color:#59873A;">createCanvasContext</span><span style="color:#999999;">(</span><span style="color:#B07D48;">canvasId</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#A0ADA0;">/** \u4FDD\u5B58\u6D77\u62A5\u7EC4\u4EF6\u521D\u59CB\u5316</span></span>
<span class="line"><span style="color:#A0ADA0;">     * </span><span style="color:#999999;">@</span><span style="color:#1E754F;">param</span><span style="color:#A0ADA0;"> </span><span style="color:#999999;">{</span><span style="color:#2E808F;">Function</span><span style="color:#999999;">}</span><span style="color:#A0ADA0;"> </span><span style="color:#B07D48;">callback</span><span style="color:#A0ADA0;">(context) \u56DE\u8C03\u51FD\u6570</span></span>
<span class="line"><span style="color:#A0ADA0;">     */</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#59873A;">canvasInit</span><span style="color:#999999;">(</span><span style="color:#B07D48;">callback</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">context</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#59873A;">getCanvasContextInit</span><span style="color:#999999;">(</span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">canvasInfo</span><span style="color:#999999;">.</span><span style="color:#B07D48;">canvasId</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">context</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#59873A;">callback</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">context</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">context</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">comThis</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#A0ADA0;">/** \u5C06\u4E0A\u8BC9\u7684\u7ED8\u5236\u753B\u5230\u753B\u5E03\u4E2D \u5E76\u4E14 \u5C06\u753B\u5E03\u5BFC\u51FA\u4E3A\u56FE\u7247</span></span>
<span class="line"><span style="color:#A0ADA0;">     *  </span><span style="color:#999999;">@</span><span style="color:#1E754F;">param</span><span style="color:#A0ADA0;"> </span><span style="color:#B07D48;">context</span><span style="color:#A0ADA0;"> \u753B\u5E03</span></span>
<span class="line"><span style="color:#A0ADA0;">     *  </span><span style="color:#999999;">@</span><span style="color:#1E754F;">param</span><span style="color:#A0ADA0;"> </span><span style="color:#999999;">{</span><span style="color:#2E808F;">Promise[]</span><span style="color:#999999;">}</span><span style="color:#A0ADA0;"> \u5B58\u653EPromise\u7684\u6570\u7EC4</span></span>
<span class="line"><span style="color:#A0ADA0;">     *  </span><span style="color:#999999;">@</span><span style="color:#1E754F;">param</span><span style="color:#A0ADA0;"> </span><span style="color:#999999;">{</span><span style="color:#2E808F;">Function</span><span style="color:#999999;">}</span><span style="color:#A0ADA0;"> </span><span style="color:#B07D48;">callback</span><span style="color:#A0ADA0;"> \u4FDD\u5B58\u56FE\u7247\u540E\u6267\u884C\u7684\u56DE\u8C03\u51FD\u6570(\u672C\u5730\u56FE\u7247\u4E34\u65F6\u8DEF\u5F84)</span></span>
<span class="line"><span style="color:#A0ADA0;">     */</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#59873A;">startDrawToImage</span><span style="color:#999999;">(</span><span style="color:#B07D48;">context</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">promiseArr</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">callback</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">      </span><span style="color:#A0ADA0;">// \u5C06\u4E4B\u524D\u5728\u7ED8\u56FE\u4E0A\u4E0B\u6587\u4E2D\u7684\u63CF\u8FF0\uFF08\u8DEF\u5F84\u3001\u53D8\u5F62\u3001\u6837\u5F0F\uFF09\u753B\u5230 canvas \u4E2D</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">canvasId</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">canvasInfo</span><span style="color:#999999;">.</span><span style="color:#B07D48;">canvasId</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">tempFilePath</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;&quot;</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">Promise</span><span style="color:#999999;">.</span><span style="color:#59873A;">all</span><span style="color:#999999;">(</span><span style="color:#B07D48;">promiseArr</span><span style="color:#999999;">).</span><span style="color:#59873A;">then</span><span style="color:#999999;">((</span><span style="color:#B07D48;">res</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">context</span><span style="color:#999999;">.</span><span style="color:#59873A;">draw</span><span style="color:#999999;">(</span><span style="color:#1E754F;">false</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">async</span><span style="color:#393A34;"> </span><span style="color:#999999;">()</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#59873A;">callback</span><span style="color:#999999;">(</span><span style="color:#1E754F;">await</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#59873A;">canvasToImage</span><span style="color:#999999;">(</span><span style="color:#B07D48;">canvasId</span><span style="color:#999999;">));</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#A0ADA0;">/**</span></span>
<span class="line"><span style="color:#A0ADA0;">     * \u5728canvas\u7ED8\u5236\u4E00\u5F20\u56FE\u7247</span></span>
<span class="line"><span style="color:#A0ADA0;">     * </span><span style="color:#999999;">@</span><span style="color:#1E754F;">param</span><span style="color:#A0ADA0;"> </span><span style="color:#B07D48;">context</span><span style="color:#A0ADA0;"> \u753B\u5E03</span></span>
<span class="line"><span style="color:#A0ADA0;">     * </span><span style="color:#999999;">@</span><span style="color:#1E754F;">param</span><span style="color:#A0ADA0;"> </span><span style="color:#B07D48;">src</span><span style="color:#A0ADA0;"> \u56FE\u7247\u8D44\u6E90</span></span>
<span class="line"><span style="color:#A0ADA0;">     * </span><span style="color:#999999;">@</span><span style="color:#1E754F;">param</span><span style="color:#A0ADA0;"> </span><span style="color:#B07D48;">_imageWidth</span><span style="color:#A0ADA0;"> \u56FE\u7247\u5BBD\u5EA6</span></span>
<span class="line"><span style="color:#A0ADA0;">     * </span><span style="color:#999999;">@</span><span style="color:#1E754F;">param</span><span style="color:#A0ADA0;"> </span><span style="color:#B07D48;">_imageHeight</span><span style="color:#A0ADA0;"> \u56FE\u7247\u9AD8\u5EA6</span></span>
<span class="line"><span style="color:#A0ADA0;">     */</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#59873A;">drawCanvasImage</span><span style="color:#999999;">(</span><span style="color:#B07D48;">context</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">src</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">_imageWidth</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">_imageHeight</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">dx</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">dy</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">new</span><span style="color:#393A34;"> </span><span style="color:#998418;">Promise</span><span style="color:#999999;">((</span><span style="color:#B07D48;">resolve</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">reject</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">uni</span><span style="color:#999999;">.</span><span style="color:#59873A;">getImageInfo</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">src</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">src</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#59873A;">success</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">res</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#B07D48;">context</span><span style="color:#999999;">.</span><span style="color:#59873A;">drawImage</span><span style="color:#999999;">(</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#B07D48;">res</span><span style="color:#999999;">.</span><span style="color:#B07D48;">path</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#B07D48;">dx</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">_imageWidth</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#B07D48;">dy</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">_imageHeight</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#B07D48;">_imageWidth</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#B07D48;">_imageHeight</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#59873A;">resolve</span><span style="color:#999999;">(</span><span style="color:#B07D48;">context</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#A0ADA0;">/** \u7ED8\u5236\u4E00\u4E2A\u5706\u5F62\u5934\u50CF</span></span>
<span class="line"><span style="color:#A0ADA0;">     * </span><span style="color:#999999;">@</span><span style="color:#1E754F;">param</span><span style="color:#A0ADA0;">  </span><span style="color:#B07D48;">context</span><span style="color:#A0ADA0;"> \u753B\u5E03</span></span>
<span class="line"><span style="color:#A0ADA0;">     * </span><span style="color:#999999;">@</span><span style="color:#1E754F;">param</span><span style="color:#A0ADA0;">  </span><span style="color:#B07D48;">url</span><span style="color:#A0ADA0;">     \u56FE\u7247\u5730\u5740</span></span>
<span class="line"><span style="color:#A0ADA0;">     * </span><span style="color:#999999;">@</span><span style="color:#1E754F;">param</span><span style="color:#A0ADA0;">  </span><span style="color:#B07D48;">_circularX</span><span style="color:#A0ADA0;">  \u5706\u5FC3X\u5750\u6807</span></span>
<span class="line"><span style="color:#A0ADA0;">     * </span><span style="color:#999999;">@</span><span style="color:#1E754F;">param</span><span style="color:#A0ADA0;">  </span><span style="color:#B07D48;">_circularY</span><span style="color:#A0ADA0;">  \u5706\u5FC3Y\u5750\u6807</span></span>
<span class="line"><span style="color:#A0ADA0;">     * </span><span style="color:#999999;">@</span><span style="color:#1E754F;">param</span><span style="color:#A0ADA0;">  </span><span style="color:#B07D48;">_circularR</span><span style="color:#A0ADA0;">  \u5706\u534A\u5F84</span></span>
<span class="line"><span style="color:#A0ADA0;">     */</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#59873A;">drawCircularAvatar</span><span style="color:#999999;">(</span><span style="color:#B07D48;">context</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">url</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">_circularX</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">_circularY</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">_circularR</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">dx</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">_circularX</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">_circularR</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">dy</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">_circularY</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">_circularR</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">dwidth</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">_circularR</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">*</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">2</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">dheight</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">_circularR</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">*</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">2</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">new</span><span style="color:#393A34;"> </span><span style="color:#998418;">Promise</span><span style="color:#999999;">((</span><span style="color:#B07D48;">resolve</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">reject</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">uni</span><span style="color:#999999;">.</span><span style="color:#59873A;">downloadFile</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">url</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">url</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#59873A;">success</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">res</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#B07D48;">context</span><span style="color:#999999;">.</span><span style="color:#59873A;">save</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#B07D48;">context</span><span style="color:#999999;">.</span><span style="color:#59873A;">beginPath</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#999999;">            </span><span style="color:#A0ADA0;">// _circularX\u5706\u7684x\u5750\u6807  _circularY\u5706\u7684y\u5750\u6807  _circularR\u5706\u7684\u534A\u5F84</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#B07D48;">context</span><span style="color:#999999;">.</span><span style="color:#59873A;">arc</span><span style="color:#999999;">(</span><span style="color:#B07D48;">_circularX</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">_circularY</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">_circularR</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">2</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">*</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">Math</span><span style="color:#999999;">.</span><span style="color:#B07D48;">PI</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#B07D48;">context</span><span style="color:#999999;">.</span><span style="color:#59873A;">clip</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#999999;">            </span><span style="color:#A0ADA0;">// dx: \u56FE\u50CF\u7684\u5DE6\u4E0A\u89D2\u5728\u76EE\u6807canvas\u4E0A X \u8F74\u7684\u4F4D\u7F6E</span></span>
<span class="line"><span style="color:#999999;">            </span><span style="color:#A0ADA0;">// dy: \u56FE\u50CF\u7684\u5DE6\u4E0A\u89D2\u5728\u76EE\u6807canvas\u4E0A Y \u8F74\u7684\u4F4D\u7F6E</span></span>
<span class="line"><span style="color:#999999;">            </span><span style="color:#A0ADA0;">// dwidth: \u5728\u76EE\u6807\u753B\u5E03\u4E0A\u7ED8\u5236\u56FE\u50CF\u7684\u5BBD\u5EA6\uFF0C\u5141\u8BB8\u5BF9\u7ED8\u5236\u7684\u56FE\u50CF\u8FDB\u884C\u7F29\u653E</span></span>
<span class="line"><span style="color:#999999;">            </span><span style="color:#A0ADA0;">// dheight: \u5728\u76EE\u6807\u753B\u5E03\u4E0A\u7ED8\u5236\u56FE\u50CF\u7684\u9AD8\u5EA6\uFF0C\u5141\u8BB8\u5BF9\u7ED8\u5236\u7684\u56FE\u50CF\u8FDB\u884C\u7F29\u653E</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#B07D48;">context</span><span style="color:#999999;">.</span><span style="color:#59873A;">drawImage</span><span style="color:#999999;">(</span><span style="color:#B07D48;">res</span><span style="color:#999999;">.</span><span style="color:#B07D48;">tempFilePath</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">dx</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">dy</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">dwidth</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">dheight</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#B07D48;">context</span><span style="color:#999999;">.</span><span style="color:#59873A;">restore</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#999999;">            </span><span style="color:#A0ADA0;">// context.draw()</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#59873A;">resolve</span><span style="color:#999999;">(</span><span style="color:#B07D48;">context</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#A0ADA0;">/** \u7ED8\u5236\u591A\u884C\u6587\u672C \u6CE8:, \u548C \u7A7A\u683C\u90FD\u7B97\u4E00\u4E2A\u5B57</span></span>
<span class="line"><span style="color:#A0ADA0;">     * </span><span style="color:#999999;">@</span><span style="color:#1E754F;">param</span><span style="color:#A0ADA0;"> </span><span style="color:#B07D48;">context</span><span style="color:#A0ADA0;"> \u753B\u5E03</span></span>
<span class="line"><span style="color:#A0ADA0;">     * </span><span style="color:#999999;">@</span><span style="color:#1E754F;">param</span><span style="color:#A0ADA0;"> </span><span style="color:#B07D48;">text</span><span style="color:#A0ADA0;"> \u9700\u8981\u88AB\u7ED8\u5236\u7684\u6587\u672C</span></span>
<span class="line"><span style="color:#A0ADA0;">     * </span><span style="color:#999999;">@</span><span style="color:#1E754F;">param</span><span style="color:#A0ADA0;"> </span><span style="color:#B07D48;">dx</span><span style="color:#A0ADA0;"> \u5DE6\u4E0A\u89D2x\u5750\u6807</span></span>
<span class="line"><span style="color:#A0ADA0;">     * </span><span style="color:#999999;">@</span><span style="color:#1E754F;">param</span><span style="color:#A0ADA0;"> </span><span style="color:#B07D48;">dy</span><span style="color:#A0ADA0;"> \u53F3\u4E0A\u89D2y\u5750\u6807</span></span>
<span class="line"><span style="color:#A0ADA0;">     * </span><span style="color:#999999;">@</span><span style="color:#1E754F;">param</span><span style="color:#A0ADA0;"> </span><span style="color:#B07D48;">rowStrnum</span><span style="color:#A0ADA0;"> \u6BCF\u884C\u591A\u5C11\u4E2A\u5B57 (\u9ED8\u8BA4\u4E3Atext\u5B57\u4F53\u4E2A\u6570-&gt;\u5355\u884C)</span></span>
<span class="line"><span style="color:#A0ADA0;">     * </span><span style="color:#999999;">@</span><span style="color:#1E754F;">param</span><span style="color:#A0ADA0;"> </span><span style="color:#B07D48;">fontSize</span><span style="color:#A0ADA0;"> \u6587\u5B57\u5927\u5C0F \uFF08\u9ED8\u8BA416\uFF09</span></span>
<span class="line"><span style="color:#A0ADA0;">     * </span><span style="color:#999999;">@</span><span style="color:#1E754F;">param</span><span style="color:#A0ADA0;"> </span><span style="color:#B07D48;">fontColor</span><span style="color:#A0ADA0;"> \u6587\u5B57\u989C\u8272 (\u9ED8\u8BA4black)</span></span>
<span class="line"><span style="color:#A0ADA0;">     * </span><span style="color:#999999;">@</span><span style="color:#1E754F;">param</span><span style="color:#A0ADA0;"> </span><span style="color:#B07D48;">lineHeight</span><span style="color:#A0ADA0;"> \u5355\u884C\u6587\u672C\u884C\u9AD8 (\u9ED8\u8BA40)</span></span>
<span class="line"><span style="color:#A0ADA0;">     */</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#59873A;">drawText</span><span style="color:#999999;">(</span><span style="color:#B07D48;">options</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">context</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">text</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">dx</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">dy</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">rowStrnum</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">text</span><span style="color:#999999;">.</span><span style="color:#998418;">length</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">lineHeight</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">fontSize</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">16</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">fontColor</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">black</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">options</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">new</span><span style="color:#393A34;"> </span><span style="color:#998418;">Promise</span><span style="color:#999999;">((</span><span style="color:#B07D48;">resolve</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">reject</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">context</span><span style="color:#999999;">.</span><span style="color:#59873A;">setFontSize</span><span style="color:#999999;">(</span><span style="color:#B07D48;">fontSize</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">context</span><span style="color:#999999;">.</span><span style="color:#59873A;">setFillStyle</span><span style="color:#999999;">(</span><span style="color:#B07D48;">fontColor</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">context</span><span style="color:#999999;">.</span><span style="color:#59873A;">setTextBaseline</span><span style="color:#999999;">(</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">middle</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#999999;">        </span><span style="color:#A0ADA0;">// \u83B7\u53D6\u9700\u8981\u7ED8\u5236\u7684\u6587\u672C\u5BBD\u5EA6</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">textWidth</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#59873A;">Number</span><span style="color:#999999;">(</span><span style="color:#B07D48;">context</span><span style="color:#999999;">.</span><span style="color:#59873A;">measureText</span><span style="color:#999999;">(</span><span style="color:#B07D48;">text</span><span style="color:#999999;">).</span><span style="color:#B07D48;">width</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#999999;">        </span><span style="color:#A0ADA0;">// console.log(&#39;textWidth&#39;,textWidth)</span></span>
<span class="line"><span style="color:#999999;">        </span><span style="color:#A0ADA0;">// \u83B7\u53D6\u6587\u672C\u7684\u5B57\u6570</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">textNum</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">text</span><span style="color:#999999;">.</span><span style="color:#998418;">length</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#999999;">        </span><span style="color:#A0ADA0;">// \u83B7\u53D6\u884C\u6570 \u5411\u4E0A\u53D6\u6574</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">lineNum</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">Math</span><span style="color:#999999;">.</span><span style="color:#59873A;">ceil</span><span style="color:#999999;">(</span><span style="color:#B07D48;">textNum</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">/</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">rowStrnum</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#999999;">        </span><span style="color:#A0ADA0;">// console.log(&#39;textNum&#39;,textNum)</span></span>
<span class="line"><span style="color:#999999;">        </span><span style="color:#A0ADA0;">// console.log(&#39;lineNum&#39;,lineNum)</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#1E754F;">for</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">i</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0</span><span style="color:#999999;">;</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">i</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">lineNum</span><span style="color:#999999;">;</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">i</span><span style="color:#AB5959;">++</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">sliceText</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">text</span><span style="color:#999999;">.</span><span style="color:#59873A;">slice</span><span style="color:#999999;">(</span><span style="color:#B07D48;">i</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">*</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">rowStrnum</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">i</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">+</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">1</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">*</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">rowStrnum</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#999999;">          </span><span style="color:#A0ADA0;">// fillText \u7684 dx = \u6587\u5B57\u6700\u5DE6\u8FB9\u7684\u8DDD\u79BB\u5230\u5C4F\u5E55\u653F\u7B56\u7684\u8DDD\u79BB</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#B07D48;">context</span><span style="color:#999999;">.</span><span style="color:#59873A;">fillText</span><span style="color:#999999;">(</span><span style="color:#B07D48;">sliceText</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">dx</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">textWidth</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">dy</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">+</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">i</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">*</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">lineHeight</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#59873A;">resolve</span><span style="color:#999999;">(</span><span style="color:#B07D48;">context</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#A0ADA0;">/** \u5C06\u753B\u5E03\u5BFC\u51FA\u4E3A\u56FE\u7247</span></span>
<span class="line"><span style="color:#A0ADA0;">     * </span><span style="color:#999999;">@</span><span style="color:#1E754F;">param</span><span style="color:#A0ADA0;"> </span><span style="color:#B07D48;">canvasId</span><span style="color:#A0ADA0;"> \u753B\u5E03\u6807\u8BC6</span></span>
<span class="line"><span style="color:#A0ADA0;">     */</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#59873A;">canvasToImage</span><span style="color:#999999;">(</span><span style="color:#B07D48;">canvasId</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">new</span><span style="color:#393A34;"> </span><span style="color:#998418;">Promise</span><span style="color:#999999;">((</span><span style="color:#B07D48;">resolve</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">reject</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">uni</span><span style="color:#999999;">.</span><span style="color:#59873A;">canvasToTempFilePath</span><span style="color:#999999;">(</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#998418;">canvasId</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">canvasId</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;">// \u753B\u5E03\u6807\u8BC6</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#59873A;">success</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">res</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">              </span><span style="color:#A0ADA0;">// \u5728H5\u5E73\u53F0\u4E0B\uFF0CtempFilePath \u4E3A base64</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#59873A;">resolve</span><span style="color:#999999;">(</span><span style="color:#B07D48;">res</span><span style="color:#999999;">.</span><span style="color:#B07D48;">tempFilePath</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#59873A;">fail</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">err</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#B07D48;">console</span><span style="color:#999999;">.</span><span style="color:#59873A;">log</span><span style="color:#999999;">(</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">err</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">err</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#59873A;">reject</span><span style="color:#999999;">(</span><span style="color:#B07D48;">err</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#A65E2B;">this</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#A0ADA0;">/** \u4FDD\u5B58\u751F\u6210\u7684\u56FE\u7247\u5230\u672C\u5730\u76F8\u518C\u4E2D</span></span>
<span class="line"><span style="color:#A0ADA0;">     *  </span><span style="color:#999999;">@</span><span style="color:#1E754F;">param</span><span style="color:#A0ADA0;"> </span><span style="color:#999999;">{</span><span style="color:#2E808F;">String</span><span style="color:#999999;">}</span><span style="color:#A0ADA0;"> </span><span style="color:#B07D48;">filePath</span><span style="color:#A0ADA0;"> \u56FE\u7247\u4E34\u65F6\u8DEF\u52B2</span></span>
<span class="line"><span style="color:#A0ADA0;">     */</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#59873A;">posterToPhotosAlbum</span><span style="color:#999999;">(</span><span style="color:#B07D48;">filePath</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">uni</span><span style="color:#999999;">.</span><span style="color:#59873A;">showLoading</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">title</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">\u4FDD\u5B58\u4E2D...</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">uni</span><span style="color:#999999;">.</span><span style="color:#59873A;">saveImageToPhotosAlbum</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">filePath</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">filePath</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#59873A;">success</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">res</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#B07D48;">uni</span><span style="color:#999999;">.</span><span style="color:#59873A;">showToast</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#998418;">title</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">\u4FDD\u5B58\u6210\u529F\uFF0C\u8BF7\u524D\u5F80\u624B\u673A\u76F8\u518C\u4E2D\u67E5\u770B</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#998418;">mask</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">true</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#998418;">icon</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">none</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#998418;">duration</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">2000</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#59873A;">fail</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">err</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#B07D48;">console</span><span style="color:#999999;">.</span><span style="color:#59873A;">log</span><span style="color:#999999;">(</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">err</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">err</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">err</span><span style="color:#999999;">.</span><span style="color:#B07D48;">errMsg</span><span style="color:#999999;">.</span><span style="color:#59873A;">includes</span><span style="color:#999999;">(</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">deny</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">||</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">err</span><span style="color:#999999;">.</span><span style="color:#B07D48;">errMsg</span><span style="color:#999999;">.</span><span style="color:#59873A;">includes</span><span style="color:#999999;">(</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">denied</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">))</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">            </span><span style="color:#A0ADA0;">// \u7528\u6237\u9009\u62E9\u62D2\u7EDD</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#59873A;">openSetting</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">else</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">err</span><span style="color:#999999;">.</span><span style="color:#B07D48;">errMsg</span><span style="color:#999999;">.</span><span style="color:#59873A;">includes</span><span style="color:#999999;">(</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">fail cancel</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">))</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">            </span><span style="color:#A0ADA0;">// \u7528\u6237\u5728\u4FDD\u5B58\u56FE\u7247\u65F6 \u53D6\u6D88\u4E86</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#B07D48;">uni</span><span style="color:#999999;">.</span><span style="color:#59873A;">showToast</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#998418;">title</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">\u5DF2\u53D6\u6D88\u4FDD\u5B58\uFF0C\u65E0\u6CD5\u4FDD\u5B58\u81F3\u76F8\u518C</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#998418;">mask</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">true</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#998418;">icon</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">none</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#998418;">duration</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">2000</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#1E754F;">return</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#59873A;">complete</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">()</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#B07D48;">uni</span><span style="color:#999999;">.</span><span style="color:#59873A;">hideLoading</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#A0ADA0;">/**</span></span>
<span class="line"><span style="color:#A0ADA0;">     * \u6253\u5F00\u6444\u50CF\u5934\u8BBE\u7F6E\u6743\u9650\u9875\u9762</span></span>
<span class="line"><span style="color:#A0ADA0;">     */</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#59873A;">openSetting</span><span style="color:#999999;">()</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">uni</span><span style="color:#999999;">.</span><span style="color:#59873A;">showModal</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">title</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">\u6E29\u99A8\u63D0\u793A</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">content</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">\u4FDD\u5B58\u56FE\u7247\u81F3\u76F8\u518C\u4E2D\uFF0C\u9700\u8981\u60A8\u540C\u610F\u6DFB\u52A0\u8BBF\u95EE\u76F8\u518C\u6743\u9650</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">cancelText</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">\u62D2\u7EDD</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">confirmText</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">\u540C\u610F</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#59873A;">success</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">res</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">res</span><span style="color:#999999;">.</span><span style="color:#B07D48;">confirm</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#B07D48;">uni</span><span style="color:#999999;">.</span><span style="color:#59873A;">openSetting</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#59873A;">success</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">settingdata</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">                </span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">settingdata</span><span style="color:#999999;">.</span><span style="color:#B07D48;">authSetting</span><span style="color:#999999;">[</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">scope.writePhotosAlbum</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">])</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">                  </span><span style="color:#B07D48;">console</span><span style="color:#999999;">.</span><span style="color:#59873A;">log</span><span style="color:#999999;">(</span></span>
<span class="line"><span style="color:#393A34;">                    </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">\u83B7\u53D6\u6743\u9650\u6210\u529F\uFF0C\u7ED9\u51FA\u518D\u6B21\u70B9\u51FB\u56FE\u7247\u4FDD\u5B58\u5230\u76F8\u518C\u7684\u63D0\u793A\u3002</span><span style="color:#B56959AA;">&quot;</span></span>
<span class="line"><span style="color:#393A34;">                  </span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">                  </span><span style="color:#B07D48;">uni</span><span style="color:#999999;">.</span><span style="color:#59873A;">showToast</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">                    </span><span style="color:#998418;">title</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">\u6388\u6743\u6210\u529F\uFF0C\u8BF7\u518D\u6B21\u70B9\u51FB\u4FDD\u5B58</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">                    </span><span style="color:#998418;">icon</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">none</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">                    </span><span style="color:#998418;">duration</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">2000</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">                  </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">                </span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">else</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">                  </span><span style="color:#B07D48;">console</span><span style="color:#999999;">.</span><span style="color:#59873A;">log</span><span style="color:#999999;">(</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">\u83B7\u53D6\u6743\u9650\u5931\u8D25\uFF0C\u7ED9\u51FA\u4E0D\u7ED9\u6743\u9650\u5C31\u65E0\u6CD5\u6B63\u5E38\u4F7F\u7528\u7684\u63D0\u793A</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">                  </span><span style="color:#B07D48;">uni</span><span style="color:#999999;">.</span><span style="color:#59873A;">showToast</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">                    </span><span style="color:#998418;">title</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">\u9700\u8981\u8BBF\u95EE\u76F8\u518C\u6743\u9650</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">                    </span><span style="color:#998418;">icon</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">none</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">                    </span><span style="color:#998418;">duration</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">2000</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">                  </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">                </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#59873A;">fail</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">res</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">                </span><span style="color:#B07D48;">console</span><span style="color:#999999;">.</span><span style="color:#59873A;">log</span><span style="color:#999999;">(</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">err</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">err</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">else</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#B07D48;">uni</span><span style="color:#999999;">.</span><span style="color:#59873A;">showToast</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#998418;">title</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">\u5DF2\u62D2\u7EDD\u6388\u6743\uFF0C\u65E0\u6CD5\u4FDD\u5B58\u81F3\u76F8\u518C</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#998418;">mask</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">true</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#998418;">icon</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">none</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#998418;">duration</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">2000</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#1E754F;">return</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#999999;">};</span></span>
<span class="line"><span style="color:#999999;">&lt;/</span><span style="color:#1E754F;">script</span><span style="color:#999999;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">style</span><span style="color:#999999;">&gt;&lt;/</span><span style="color:#1E754F;">style</span><span style="color:#999999;">&gt;</span></span>
<span class="line"></span></code></pre></div><h2 id="\u5C0F\u7A0B\u5E8F\u767B\u5F55\u6388\u6743-\u83B7\u53D6-\u7528\u6237\u4FE1\u606F\u7684-api-\u8BE6\u89E3-2021-03-04" tabindex="-1">\u5C0F\u7A0B\u5E8F\u767B\u5F55\u6388\u6743 \u83B7\u53D6 \u7528\u6237\u4FE1\u606F\u7684 API \u8BE6\u89E3 (2021-03-04) <a class="header-anchor" href="#\u5C0F\u7A0B\u5E8F\u767B\u5F55\u6388\u6743-\u83B7\u53D6-\u7528\u6237\u4FE1\u606F\u7684-api-\u8BE6\u89E3-2021-03-04" aria-hidden="true">#</a></h2><h3 id="_1-\u767B\u5F55-wx-login" tabindex="-1">1. \u767B\u5F55 wx.login() <a class="header-anchor" href="#_1-\u767B\u5F55-wx-login" aria-hidden="true">#</a></h3><p>\u5728\u767B\u5F55\u65F6\u524D\u7AEF\u9700\u8981\u505A\u7684\u5C31\u662F\u901A\u8FC7 <code>wx.login()</code> \u83B7\u53D6\u5230 <strong>code</strong>\u3002\u540E\u7AEF\u901A\u8FC7\u53BB\u8C03\u7528\u5FAE\u4FE1\u7684\u63A5\u53E3\u8FD4\u56DE\u7ED9\u6211\u4EEC <strong>openID\u3001session_key</strong> \u7B49\u4FE1\u606F\u3002</p><h3 id="_2-wx-checksession" tabindex="-1">2. wx.checkSession() <a class="header-anchor" href="#_2-wx-checksession" aria-hidden="true">#</a></h3><blockquote><p>\u6821\u9A8C\u7528\u6237\u5F53\u524D\u7684 <strong>session_key</strong> \u662F\u5426\u6709\u6548</p></blockquote><p>\u5F53\u7528\u6237\u8C03\u7528 login \u65F6\uFF0C\u7528\u6237\u7684 session_key \u4F1A\u88AB\u66F4\u65B0 \u4E4B\u524D\u65E7\u7684 session_key \u4F1A\u5931\u6548\u3002\u5FAE\u4FE1\u4E0D\u4F1A\u628A session_key \u7684\u6709\u6548\u671F\u544A\u77E5\u5F00\u53D1\u8005\u3002\u5F00\u53D1\u8005\u5728 session_key \u5931\u6548\u65F6\uFF0C\u53EF\u4EE5\u901A\u8FC7\u91CD\u65B0\u6267\u884C\u767B\u5F55\u6D41\u7A0B\u83B7\u53D6\u6709\u6548\u7684 session_key\u3002\u4F46\u662F\u5F00\u53D1\u8005\u53EF\u4EE5\u81EA\u5B9A\u4E49 token\u3002</p><h3 id="_3-\u6388\u6743-wx-authorize" tabindex="-1">3.\u6388\u6743 wx.authorize() <a class="header-anchor" href="#_3-\u6388\u6743-wx-authorize" aria-hidden="true">#</a></h3><blockquote><p>\u63D0\u524D\u5411\u7528\u6237\u53D1\u8D77\u6388\u6743\u8BF7\u6C42\u3002\u8C03\u7528\u540E\u4F1A\u7ACB\u523B\u5F39\u7A97\u8BE2\u95EE\u7528\u6237\u662F\u5426\u540C\u610F\u6388\u6743\u5C0F\u7A0B\u5E8F\u4F7F\u7528\u67D0\u9879\u529F\u80FD\u6216\u83B7\u53D6\u7528\u6237\u7684\u67D0\u4E9B\u6570\u636E\uFF0C\u4F46\u4E0D\u4F1A\u5B9E\u9645\u8C03\u7528\u5BF9\u5E94\u63A5\u53E3\u3002<strong>\u5982\u679C\u7528\u6237\u4E4B\u524D\u5DF2\u7ECF\u540C\u610F\u6388\u6743\uFF0C\u5219\u4E0D\u4F1A\u51FA\u73B0\u5F39\u7A97\uFF0C\u76F4\u63A5\u8FD4\u56DE\u6210\u529F\u3002</strong></p></blockquote><p><strong>\u4E24\u79CD\u60C5\u51B5\uFF1A</strong></p><ol><li><p>\u7528\u6237\u5DF2\u6388\u6743 \u53EF\u4EE5\u77E5\u9053\u8C03\u7528\u6B64\u63A5\u53E3</p></li><li><p>\u7528\u6237\u672A\u6388\u6743 \u9700\u8981\u5F39\u51FA\u6388\u6743\u6846\u5F15\u5BFC\u7528\u6237\u6388\u6743</p></li></ol><p>\u62D2\u7EDD\u6388\u6743\uFF1A\u5173\u95ED\u6388\u6743\u6846\uFF0C\u7528\u6237\u64CD\u4F5C\u65E0\u6548 \u63A5\u6536\u6388\u6743\uFF1A\u5C06\u7528\u6237\u4FE1\u606F\u901A\u8FC7 token \u53D1\u9001\u7ED9\u540E\u53F0\uFF0C\u5E76\u4E3B\u52A8\u8BF7\u6C42\u7528\u6237\u64CD\u4F5C</p><p>\u6CE8\uFF1A scope \u4E3A scope.userInfo \u4E0D\u4F1A\u5F39\u51FA\u6388\u6743\u7A97\u53E3\u4E86\u3002 \u9700\u8981\u901A\u8FC7 button \u6309\u94AE\u7684\u65B9\u5F0F\u7528\u6237\u70B9\u51FB\u624D\u7B97\u6388\u6743\u4E86\u3002</p><h3 id="_4-\u7528\u6237\u4FE1\u606F-wx-getuserinfo" tabindex="-1">4. \u7528\u6237\u4FE1\u606F wx.getUserInfo() <a class="header-anchor" href="#_4-\u7528\u6237\u4FE1\u606F-wx-getuserinfo" aria-hidden="true">#</a></h3><p>\u6CE8\uFF1A \u6B64\u63A5\u53E3\u6709\u8C03\u6574\uFF0C\u4F7F\u7528\u8BE5\u63A5\u53E3\u5C06\u4E0D\u518D\u51FA\u73B0\u6388\u6743\u5F39\u7A97\uFF0C\u9700\u8981\u4F7F\u7528\u4E0B\u9762\u4EE3\u7801\u6765\u5F15\u5BFC\u7528\u6237\u4E3B\u52A8\u8FDB\u884C\u6388\u6743\u64CD\u4F5C\u3002</p><p><code>&lt;button open-type=&quot;getUserInfo&quot; @getuserinfo=&quot;getUserInfo&quot;&gt;</code></p><ol><li><p>\u5F53\u7528\u6237\u6CA1\u6709\u901A\u8FC7 button \u6309\u94AE\u540C\u610F\u6388\u6743\uFF0C\u8C03\u7528\u6B64\u63A5\u53E3\u4F1A\u76F4\u63A5\u62A5\u9519</p></li><li><p>\u5F53\u7528\u6237\u6388\u6743\u8FC7 \u53EF\u4EE5\u76F4\u63A5\u4F7F\u7528\u6B64\u63A5\u53E3\u83B7\u53D6\u7528\u6237\u4FE1\u606F</p></li></ol><div class="language-js"><button class="copy"></button><span class="lang">js</span><pre class="vp-code-dark"><code><span class="line"><span style="color:#BD976A;">wx</span><span style="color:#666666;">.</span><span style="color:#80A665;">getSetting</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#80A665;">success</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">res</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">console</span><span style="color:#666666;">.</span><span style="color:#80A665;">log</span><span style="color:#666666;">(</span><span style="color:#BD976A;">res</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">// \u8BC1\u660E\u5DF2\u7ECF\u6388\u6743</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">res</span><span style="color:#666666;">.</span><span style="color:#BD976A;">authSetting</span><span style="color:#666666;">[</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">scope.userInfo</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">])</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">wx</span><span style="color:#666666;">.</span><span style="color:#80A665;">getUserInfo</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#80A665;">success</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">res</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#BD976A;">console</span><span style="color:#666666;">.</span><span style="color:#80A665;">log</span><span style="color:#666666;">(</span><span style="color:#BD976A;">res</span><span style="color:#666666;">.</span><span style="color:#BD976A;">userInfo</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#666666;">});</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#B07D48;">wx</span><span style="color:#999999;">.</span><span style="color:#59873A;">getSetting</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#59873A;">success</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">res</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">console</span><span style="color:#999999;">.</span><span style="color:#59873A;">log</span><span style="color:#999999;">(</span><span style="color:#B07D48;">res</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">// \u8BC1\u660E\u5DF2\u7ECF\u6388\u6743</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">res</span><span style="color:#999999;">.</span><span style="color:#B07D48;">authSetting</span><span style="color:#999999;">[</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">scope.userInfo</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">])</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">wx</span><span style="color:#999999;">.</span><span style="color:#59873A;">getUserInfo</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#59873A;">success</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">res</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#B07D48;">console</span><span style="color:#999999;">.</span><span style="color:#59873A;">log</span><span style="color:#999999;">(</span><span style="color:#B07D48;">res</span><span style="color:#999999;">.</span><span style="color:#B07D48;">userInfo</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#999999;">});</span></span>
<span class="line"></span></code></pre></div><h3 id="\u5B57\u6BB5\u89E3\u91CA" tabindex="-1">\u5B57\u6BB5\u89E3\u91CA <a class="header-anchor" href="#\u5B57\u6BB5\u89E3\u91CA" aria-hidden="true">#</a></h3><ul><li><p>openId: \u7528\u6237\u552F\u4E00\u6807\u8BC6</p></li><li><p>session_key \u4F1A\u8BDD\u5BC6\u94A5 session_key \u662F\u5BF9\u7528\u6237\u6570\u636E\u8FDB\u884C\u52A0\u5BC6\u7B7E\u540D\u7684\u5BC6\u94A5\u3002\u4E3A\u4E86\u5E94\u7528\u81EA\u8EAB\u7684\u6570\u636E\u5B89\u5168\uFF0C\u53EA\u5728\u5F00\u53D1\u670D\u52A1\u5668\u548C\u5FAE\u4FE1\u670D\u52A1\u5668\u4E2D\u4EA4\u4E92\uFF0C\u4E0D\u4F1A\u53D1\u9001\u5230\u524D\u7AEF\u3002</p></li><li><p>unionID \u7528\u6237\u5728\u5F00\u653E\u5E73\u53F0\u7684\u552F\u4E00\u6807\u8BC6\u7B26\u3002\u5982\u679C\u5F00\u53D1\u8005\u62E5\u6709\u591A\u4E2A\u79FB\u52A8\u5E94\u7528\u3001\u7F51\u7AD9\u5E94\u7528\u3001\u548C\u516C\u4F17\u5E10\u53F7\uFF08\u5305\u62EC\u5C0F\u7A0B\u5E8F\uFF09\uFF0C\u53EF\u901A\u8FC7 unionid \u6765\u533A\u5206\u7528\u6237\u7684\u552F\u4E00\u6027\u3002</p></li></ul><h3 id="\u767B\u5F55\u6388\u6743\u6D41\u7A0B" tabindex="-1">\u767B\u5F55\u6388\u6743\u6D41\u7A0B <a class="header-anchor" href="#\u767B\u5F55\u6388\u6743\u6D41\u7A0B" aria-hidden="true">#</a></h3><div class="language-"><button class="copy"></button><span class="lang"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#dbd7caee;">\u8FDB\u5165\u5C0F\u7A0B\u5E8F -&gt; wx.login() \u83B7\u53D6code -&gt; wx.getUserInfo()</span></span>
<span class="line"><span style="color:#dbd7caee;"></span></span>
<span class="line"><span style="color:#dbd7caee;">wx.getUserInfo() \u6210\u529F -&gt; \u6388\u6743\u8FC7 -&gt; \u8C03\u540E\u53F0\u670D\u52A1\u5668login\u63A5\u53E3</span></span>
<span class="line"><span style="color:#dbd7caee;"></span></span>
<span class="line"><span style="color:#dbd7caee;">wx.getUserInfo() \u5931\u8D25 -&gt; \u672A\u6388\u6743\u8FC7 -&gt; \u663E\u793A\u5F39\u7A97\u767B\u5F55\u6309\u94AE\uFF0C\u5F15\u5BFC\u7528\u6237\u6388\u6743</span></span>
<span class="line"><span style="color:#dbd7caee;"></span></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393a34;">\u8FDB\u5165\u5C0F\u7A0B\u5E8F -&gt; wx.login() \u83B7\u53D6code -&gt; wx.getUserInfo()</span></span>
<span class="line"><span style="color:#393a34;"></span></span>
<span class="line"><span style="color:#393a34;">wx.getUserInfo() \u6210\u529F -&gt; \u6388\u6743\u8FC7 -&gt; \u8C03\u540E\u53F0\u670D\u52A1\u5668login\u63A5\u53E3</span></span>
<span class="line"><span style="color:#393a34;"></span></span>
<span class="line"><span style="color:#393a34;">wx.getUserInfo() \u5931\u8D25 -&gt; \u672A\u6388\u6743\u8FC7 -&gt; \u663E\u793A\u5F39\u7A97\u767B\u5F55\u6309\u94AE\uFF0C\u5F15\u5BFC\u7528\u6237\u6388\u6743</span></span>
<span class="line"><span style="color:#393a34;"></span></span></code></pre></div><h2 id="\u5FAE\u4FE1\u5C0F\u7A0B\u5E8F-\u5F00\u53D1\u7248-\u4F53\u9A8C\u7248-\u6B63\u5F0F\u7248-\u73AF\u5883\u5224\u65AD-2021-03-08" tabindex="-1">\u5FAE\u4FE1\u5C0F\u7A0B\u5E8F \u5F00\u53D1\u7248 \u4F53\u9A8C\u7248 \u6B63\u5F0F\u7248 \u73AF\u5883\u5224\u65AD (2021-03-08) <a class="header-anchor" href="#\u5FAE\u4FE1\u5C0F\u7A0B\u5E8F-\u5F00\u53D1\u7248-\u4F53\u9A8C\u7248-\u6B63\u5F0F\u7248-\u73AF\u5883\u5224\u65AD-2021-03-08" aria-hidden="true">#</a></h2><blockquote><p>uniapp \u7684 uni.getAccountInfoSync() \u76EE\u524D\u53EA\u652F\u6301 \u5FAE\u4FE1\u5C0F\u7A0B\u5E8F\u3001\u767E\u5EA6\u5C0F\u7A0B\u5E8F\u3001QQ \u5C0F\u7A0B\u5E8F</p></blockquote><div class="language-js"><button class="copy"></button><span class="lang">js</span><pre class="vp-code-dark"><code><span class="line"><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">accountInfo</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">wx</span><span style="color:#666666;">.</span><span style="color:#80A665;">getAccountInfoSync</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#758575DD;">// develop \u5F00\u53D1\u7248  trial \u4F53\u9A8C\u7248 release \u6B63\u5F0F\u7248</span></span>
<span class="line"><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">accountInfo</span><span style="color:#666666;">.</span><span style="color:#BD976A;">miniProgram</span><span style="color:#666666;">.</span><span style="color:#BD976A;">envVersion</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">===</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">develop</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">// \u5F00\u53D1\u7248</span></span>
<span class="line"><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">else</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">accountInfo</span><span style="color:#666666;">.</span><span style="color:#BD976A;">miniProgram</span><span style="color:#666666;">.</span><span style="color:#BD976A;">envVersion</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">===</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">trial</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">// \u4F53\u9A8C\u7248</span></span>
<span class="line"><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">else</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">accountInfo</span><span style="color:#666666;">.</span><span style="color:#BD976A;">miniProgram</span><span style="color:#666666;">.</span><span style="color:#BD976A;">envVersion</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">===</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">release</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">// \u6B63\u5F0F\u7248</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">accountInfo</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">wx</span><span style="color:#999999;">.</span><span style="color:#59873A;">getAccountInfoSync</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#A0ADA0;">// develop \u5F00\u53D1\u7248  trial \u4F53\u9A8C\u7248 release \u6B63\u5F0F\u7248</span></span>
<span class="line"><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">accountInfo</span><span style="color:#999999;">.</span><span style="color:#B07D48;">miniProgram</span><span style="color:#999999;">.</span><span style="color:#B07D48;">envVersion</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">===</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">develop</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">// \u5F00\u53D1\u7248</span></span>
<span class="line"><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">else</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">accountInfo</span><span style="color:#999999;">.</span><span style="color:#B07D48;">miniProgram</span><span style="color:#999999;">.</span><span style="color:#B07D48;">envVersion</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">===</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">trial</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">// \u4F53\u9A8C\u7248</span></span>
<span class="line"><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">else</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">accountInfo</span><span style="color:#999999;">.</span><span style="color:#B07D48;">miniProgram</span><span style="color:#999999;">.</span><span style="color:#B07D48;">envVersion</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">===</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">release</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">// \u6B63\u5F0F\u7248</span></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="\u9489\u9489\u5C0F\u7A0B\u5E8F-\u5F00\u53D1\u7248-\u4F53\u9A8C\u7248-\u6B63\u5F0F\u7248-\u73AF\u5883\u5224\u65AD-2021-03-08" tabindex="-1">\u9489\u9489\u5C0F\u7A0B\u5E8F \u5F00\u53D1\u7248 \u4F53\u9A8C\u7248 \u6B63\u5F0F\u7248 \u73AF\u5883\u5224\u65AD (2021-03-08) <a class="header-anchor" href="#\u9489\u9489\u5C0F\u7A0B\u5E8F-\u5F00\u53D1\u7248-\u4F53\u9A8C\u7248-\u6B63\u5F0F\u7248-\u73AF\u5883\u5224\u65AD-2021-03-08" aria-hidden="true">#</a></h2><blockquote><p>\u4F7F\u7528\u573A\u666F\uFF1A \u4E0D\u540C\u73AF\u5883\u9700\u8981\u4F7F\u7528\u4E0D\u540C\u7684\u63A5\u53E3\u5730\u5740\u7B49\u53D8\u91CF\u3002 \u4F7F\u7528 uniapp \u4E3A\u4F8B</p></blockquote><div class="language-js"><button class="copy"></button><span class="lang">js</span><pre class="vp-code-dark"><code><span class="line"><span style="color:#758575DD;">// #ifdef MP-ALIPAY</span></span>
<span class="line"><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">dd</span><span style="color:#666666;">.</span><span style="color:#BD976A;">isIDE</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">// IDE\u5F00\u53D1\u73AF\u5883\u4E0B</span></span>
<span class="line"><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">else</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">__appxStartupParams</span><span style="color:#666666;">.</span><span style="color:#BD976A;">source</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">===</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">trial</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">// \u9489\u9489\u4F53\u9A8C\u7248</span></span>
<span class="line"><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">else</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">// \u6CE8\uFF1A \u5728\u5C0F\u7A0B\u5E8F\u5F00\u53D1\u8005\u5DE5\u5177\u8FDB\u884C\u771F\u673A\u8C03\u8BD5\u4E0D\u662F\u8FDB\u5165  dd.isIDE \u4E5F\u4E0D\u662F trial\u3002\u6240\u4EE5\u9ED8\u8BA4\u8FDB\u5165 else</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">// \u9ED8\u8BA4\u4F7F\u7528\u6B63\u5F0F</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#758575DD;">// #endif</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#A0ADA0;">// #ifdef MP-ALIPAY</span></span>
<span class="line"><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">dd</span><span style="color:#999999;">.</span><span style="color:#B07D48;">isIDE</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">// IDE\u5F00\u53D1\u73AF\u5883\u4E0B</span></span>
<span class="line"><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">else</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">__appxStartupParams</span><span style="color:#999999;">.</span><span style="color:#B07D48;">source</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">===</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">trial</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">// \u9489\u9489\u4F53\u9A8C\u7248</span></span>
<span class="line"><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">else</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">// \u6CE8\uFF1A \u5728\u5C0F\u7A0B\u5E8F\u5F00\u53D1\u8005\u5DE5\u5177\u8FDB\u884C\u771F\u673A\u8C03\u8BD5\u4E0D\u662F\u8FDB\u5165  dd.isIDE \u4E5F\u4E0D\u662F trial\u3002\u6240\u4EE5\u9ED8\u8BA4\u8FDB\u5165 else</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">// \u9ED8\u8BA4\u4F7F\u7528\u6B63\u5F0F</span></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#A0ADA0;">// #endif</span></span>
<span class="line"></span></code></pre></div><h2 id="uniapp-\u5C0F\u7A0B\u5E8F\u7B7E\u540D\u529F\u80FD\u57FA\u672C\u5B9E\u73B0-2021-03-09" tabindex="-1">uniapp \u5C0F\u7A0B\u5E8F\u7B7E\u540D\u529F\u80FD\u57FA\u672C\u5B9E\u73B0 (2021-03-09) <a class="header-anchor" href="#uniapp-\u5C0F\u7A0B\u5E8F\u7B7E\u540D\u529F\u80FD\u57FA\u672C\u5B9E\u73B0-2021-03-09" aria-hidden="true">#</a></h2><div class="language-vue"><button class="copy"></button><span class="lang">vue</span><pre class="vp-code-dark"><code><span class="line"><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">template</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">view</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#BD976A;">class</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">signature-body</span><span style="color:#C98A7DAA;">&quot;</span></span>
<span class="line"><span style="color:#666666;">    :</span><span style="color:#BD976A;">style</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">{ </span><span style="color:#B8A965;">width</span><span style="color:#666666;">: </span><span style="color:#BD976A;">canvasWidth</span><span style="color:#666666;"> </span><span style="color:#CB7676;">+</span><span style="color:#666666;"> </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">%</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">, </span><span style="color:#B8A965;">height</span><span style="color:#666666;">: </span><span style="color:#BD976A;">canvasHeight</span><span style="color:#666666;"> </span><span style="color:#CB7676;">+</span><span style="color:#666666;"> </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">rpx</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;"> }</span><span style="color:#C98A7DAA;">&quot;</span></span>
<span class="line"><span style="color:#666666;">  &gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">canvas</span></span>
<span class="line"><span style="color:#666666;">      </span><span style="color:#BD976A;">class</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">canvas-editor1</span><span style="color:#C98A7DAA;">&quot;</span></span>
<span class="line"><span style="color:#666666;">      :</span><span style="color:#BD976A;">canvas-id</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#BD976A;">cid</span><span style="color:#C98A7DAA;">&quot;</span></span>
<span class="line"><span style="color:#666666;">      :</span><span style="color:#BD976A;">id</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#BD976A;">cid</span><span style="color:#C98A7DAA;">&quot;</span></span>
<span class="line"><span style="color:#666666;">      @</span><span style="color:#BD976A;">touchstart</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#BD976A;">touchstart</span><span style="color:#C98A7DAA;">&quot;</span></span>
<span class="line"><span style="color:#666666;">      @</span><span style="color:#BD976A;">touchmove</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#BD976A;">touchmove</span><span style="color:#C98A7DAA;">&quot;</span></span>
<span class="line"><span style="color:#666666;">      @</span><span style="color:#BD976A;">touchend</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#BD976A;">touchend</span><span style="color:#C98A7DAA;">&quot;</span></span>
<span class="line"><span style="color:#666666;">    &gt;&lt;/</span><span style="color:#4D9375;">canvas</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">&lt;/</span><span style="color:#4D9375;">view</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#666666;">&lt;/</span><span style="color:#4D9375;">template</span><span style="color:#666666;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">script</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#4D9375;">export</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">default</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">name</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">signature</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">props</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">cid</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">type</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">String</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">default</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">myCanvas</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">canvasWidth</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">type</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">Number</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">default</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">100</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">canvasHeight</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">type</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">Number</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">default</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">500</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#80A665;">data</span><span style="color:#666666;">()</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">Strokes</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">[],</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">width</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;">// \u5C4F\u5E55\u5BBD\u5EA6</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">height</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;">// \u5C4F\u5E55\u9AD8\u5EA6</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">dom</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">null</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;">// canvas DOM\u8282\u70B9</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">};</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#80A665;">mounted</span><span style="color:#666666;">()</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">// \u56DE\u8C03\u4F1A\u5EF6\u8FDF\u5230\u4E0B\u6B21 DOM \u66F4\u65B0\u5FAA\u73AF\u4E4B\u540E\u6267\u884C\u3002\u5728\u4FEE\u6539\u6570\u636E\u4E4B\u540E\u7ACB\u5373\u4F7F\u7528\u5B83\uFF0C\u7136\u540E\u7B49\u5F85 DOM \u66F4\u65B0</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#80A665;">$nextTick</span><span style="color:#666666;">(()</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">      </span><span style="color:#758575DD;">// \u83B7\u53D6\u624B\u673A\u76F8\u5173\u4FE1\u606F</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">uni</span><span style="color:#666666;">.</span><span style="color:#80A665;">getSystemInfo</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#80A665;">success</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">res</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">width</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">res</span><span style="color:#666666;">.</span><span style="color:#BD976A;">windowWidth</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">height</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">res</span><span style="color:#666666;">.</span><span style="color:#BD976A;">windowHeight</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#666666;">      </span><span style="color:#758575DD;">// \u83B7\u53D6\u5230 canvas</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">dom</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">uni</span><span style="color:#666666;">.</span><span style="color:#80A665;">createCanvasContext</span><span style="color:#666666;">(</span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">cid</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C99076;">this</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">methods</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">// \u624B\u6307\u89E6\u6478\u5C4F\u5E55\u65F6\u89E6\u53D1</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#80A665;">touchstart</span><span style="color:#666666;">(</span><span style="color:#BD976A;">e</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">      </span><span style="color:#758575DD;">// \u53D6\u6D88\u4E8B\u4EF6\u7684\u9ED8\u8BA4\u52A8\u4F5C</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">e</span><span style="color:#666666;">.</span><span style="color:#80A665;">preventDefault</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#666666;">      </span><span style="color:#758575DD;">// \u7981\u6B62\u4E8B\u4EF6\u5192\u6CE1</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">e</span><span style="color:#666666;">.</span><span style="color:#80A665;">stopPropagation</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#666666;">      </span><span style="color:#758575DD;">// \u8BB0\u5F55\u76F8\u5173\u4FE1\u606F</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">Strokes</span><span style="color:#666666;">.</span><span style="color:#80A665;">push</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">imageData</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">null</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">style</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">color</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">#000000</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">lineWidth</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">3</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">points</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">[</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#B8A965;">x</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">e</span><span style="color:#666666;">.</span><span style="color:#BD976A;">touches</span><span style="color:#666666;">[</span><span style="color:#4C9A91;">0</span><span style="color:#666666;">].</span><span style="color:#BD976A;">x</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#B8A965;">y</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">e</span><span style="color:#666666;">.</span><span style="color:#BD976A;">touches</span><span style="color:#666666;">[</span><span style="color:#4C9A91;">0</span><span style="color:#666666;">].</span><span style="color:#BD976A;">y</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#B8A965;">type</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">e</span><span style="color:#666666;">.</span><span style="color:#BD976A;">type</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">],</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#80A665;">drawLine</span><span style="color:#666666;">(</span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">Strokes</span><span style="color:#666666;">[</span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">Strokes</span><span style="color:#666666;">.</span><span style="color:#B8A965;">length</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">-</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">1</span><span style="color:#666666;">],</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">e</span><span style="color:#666666;">.</span><span style="color:#BD976A;">type</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">// \u624B\u6307\u5728\u5C4F\u5E55\u6ED1\u52A8\u65F6\u89E6\u53D1</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#80A665;">touchmove</span><span style="color:#666666;">(</span><span style="color:#BD976A;">e</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">      </span><span style="color:#758575DD;">// \u53D6\u6D88\u4E8B\u4EF6\u7684\u9ED8\u8BA4\u52A8\u4F5C</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">e</span><span style="color:#666666;">.</span><span style="color:#80A665;">preventDefault</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#666666;">      </span><span style="color:#758575DD;">// \u7981\u6B62\u4E8B\u4EF6\u5192\u6CE1</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">e</span><span style="color:#666666;">.</span><span style="color:#80A665;">stopPropagation</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">Strokes</span><span style="color:#666666;">[</span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">Strokes</span><span style="color:#666666;">.</span><span style="color:#B8A965;">length</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">-</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">1</span><span style="color:#666666;">].</span><span style="color:#BD976A;">points</span><span style="color:#666666;">.</span><span style="color:#80A665;">push</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">x</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">e</span><span style="color:#666666;">.</span><span style="color:#BD976A;">touches</span><span style="color:#666666;">[</span><span style="color:#4C9A91;">0</span><span style="color:#666666;">].</span><span style="color:#BD976A;">x</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">y</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">e</span><span style="color:#666666;">.</span><span style="color:#BD976A;">touches</span><span style="color:#666666;">[</span><span style="color:#4C9A91;">0</span><span style="color:#666666;">].</span><span style="color:#BD976A;">y</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">type</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">e</span><span style="color:#666666;">.</span><span style="color:#BD976A;">type</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#80A665;">drawLine</span><span style="color:#666666;">(</span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">Strokes</span><span style="color:#666666;">[</span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">Strokes</span><span style="color:#666666;">.</span><span style="color:#B8A965;">length</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">-</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">1</span><span style="color:#666666;">],</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">e</span><span style="color:#666666;">.</span><span style="color:#BD976A;">type</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">// \u624B\u6307\u5728\u5C4F\u5E55\u7ED3\u675F\u6ED1\u52A8\u65F6\u89E6\u53D1</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#80A665;">touchend</span><span style="color:#666666;">(</span><span style="color:#BD976A;">e</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">      </span><span style="color:#758575DD;">// \u53D6\u6D88\u4E8B\u4EF6\u7684\u9ED8\u8BA4\u52A8\u4F5C</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">e</span><span style="color:#666666;">.</span><span style="color:#80A665;">preventDefault</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#666666;">      </span><span style="color:#758575DD;">// \u7981\u6B62\u4E8B\u4EF6\u5192\u6CE1</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">e</span><span style="color:#666666;">.</span><span style="color:#80A665;">stopPropagation</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">Strokes</span><span style="color:#666666;">[</span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">Strokes</span><span style="color:#666666;">.</span><span style="color:#B8A965;">length</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">-</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">1</span><span style="color:#666666;">].</span><span style="color:#BD976A;">points</span><span style="color:#666666;">.</span><span style="color:#B8A965;">length</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">2</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">        </span><span style="color:#758575DD;">//\u5F53\u6B64\u8DEF\u5F84\u53EA\u6709\u4E00\u4E2A\u70B9\u7684\u65F6\u5019</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">Strokes</span><span style="color:#666666;">.</span><span style="color:#80A665;">pop</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">// \u753B\u7EBF\u7684\u64CD\u4F5C</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#80A665;">drawLine</span><span style="color:#666666;">(</span><span style="color:#BD976A;">StrokesItem</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">type</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">      </span><span style="color:#758575DD;">// \u8BBE\u7F6E\u7EBF\u6761\u7AEF\u70B9\u6837\u5F0F</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">dom</span><span style="color:#666666;">.</span><span style="color:#80A665;">setLineCap</span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">round</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#666666;">      </span><span style="color:#758575DD;">// \u8BBE\u7F6E\u8FB9\u6846\u989C\u8272</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">dom</span><span style="color:#666666;">.</span><span style="color:#80A665;">setStrokeStyle</span><span style="color:#666666;">(</span><span style="color:#BD976A;">StrokesItem</span><span style="color:#666666;">.</span><span style="color:#BD976A;">style</span><span style="color:#666666;">.</span><span style="color:#BD976A;">color</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#666666;">      </span><span style="color:#758575DD;">// \u8BBE\u7F6E\u7EBF\u6761\u5BBD\u5EA6</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">dom</span><span style="color:#666666;">.</span><span style="color:#80A665;">setLineWidth</span><span style="color:#666666;">(</span><span style="color:#BD976A;">StrokesItem</span><span style="color:#666666;">.</span><span style="color:#BD976A;">style</span><span style="color:#666666;">.</span><span style="color:#BD976A;">lineWidth</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#666666;">      </span><span style="color:#758575DD;">// \u5C06\u8DEF\u5F84\u79FB\u52A8\u5230\u63A5\u89E6\u5C4F\u5E55\u7684\u6307\u5B9A\u70B9</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">dom</span><span style="color:#666666;">.</span><span style="color:#80A665;">moveTo</span><span style="color:#666666;">(</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">StrokesItem</span><span style="color:#666666;">.</span><span style="color:#BD976A;">points</span><span style="color:#666666;">[</span><span style="color:#BD976A;">StrokesItem</span><span style="color:#666666;">.</span><span style="color:#BD976A;">points</span><span style="color:#666666;">.</span><span style="color:#B8A965;">length</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">-</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">2</span><span style="color:#666666;">].</span><span style="color:#BD976A;">x</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">StrokesItem</span><span style="color:#666666;">.</span><span style="color:#BD976A;">points</span><span style="color:#666666;">[</span><span style="color:#BD976A;">StrokesItem</span><span style="color:#666666;">.</span><span style="color:#BD976A;">points</span><span style="color:#666666;">.</span><span style="color:#B8A965;">length</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">-</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">2</span><span style="color:#666666;">].</span><span style="color:#BD976A;">y</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">dom</span><span style="color:#666666;">.</span><span style="color:#80A665;">lineTo</span><span style="color:#666666;">(</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">StrokesItem</span><span style="color:#666666;">.</span><span style="color:#BD976A;">points</span><span style="color:#666666;">[</span><span style="color:#BD976A;">StrokesItem</span><span style="color:#666666;">.</span><span style="color:#BD976A;">points</span><span style="color:#666666;">.</span><span style="color:#B8A965;">length</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">-</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">1</span><span style="color:#666666;">].</span><span style="color:#BD976A;">x</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">StrokesItem</span><span style="color:#666666;">.</span><span style="color:#BD976A;">points</span><span style="color:#666666;">[</span><span style="color:#BD976A;">StrokesItem</span><span style="color:#666666;">.</span><span style="color:#BD976A;">points</span><span style="color:#666666;">.</span><span style="color:#B8A965;">length</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">-</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">1</span><span style="color:#666666;">].</span><span style="color:#BD976A;">y</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#666666;">      </span><span style="color:#758575DD;">// \u753B\u51FA\u5F53\u524D\u8DEF\u5F84\u7684\u8FB9\u6846</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">dom</span><span style="color:#666666;">.</span><span style="color:#80A665;">stroke</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">dom</span><span style="color:#666666;">.</span><span style="color:#80A665;">draw</span><span style="color:#666666;">(</span><span style="color:#4D9375;">true</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">// \u6E05\u7A7A\u753B\u5E03</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#80A665;">clearCanvas</span><span style="color:#666666;">()</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">Strokes</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">[];</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">dom</span><span style="color:#666666;">.</span><span style="color:#BD976A;">fillStyle</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">#FFFFFF</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">dom</span><span style="color:#666666;">.</span><span style="color:#80A665;">clearRect</span><span style="color:#666666;">(</span><span style="color:#4C9A91;">0</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">width</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">height</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">dom</span><span style="color:#666666;">.</span><span style="color:#80A665;">beginPath</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">dom</span><span style="color:#666666;">.</span><span style="color:#80A665;">draw</span><span style="color:#666666;">(</span><span style="color:#4D9375;">true</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">dom</span><span style="color:#666666;">.</span><span style="color:#80A665;">closePath</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">// \u4FDD\u5B58\u753B\u5E03 \u6267\u884C\u7684\u65B9\u6CD5</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#80A665;">saveCanvas</span><span style="color:#666666;">(</span><span style="color:#BD976A;">fn</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#80A665;">fn</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#666666;">};</span></span>
<span class="line"><span style="color:#666666;">&lt;/</span><span style="color:#4D9375;">script</span><span style="color:#666666;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">style</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">lang</span><span style="color:#DBD7CAEE;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">scss</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">scoped</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#666666;">.</span><span style="color:#BD976A;">signature-body</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">border</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">1</span><span style="color:#CB7676;">px</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C99076;">solid</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C99076;">red</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">margin</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">20</span><span style="color:#DBD7CAEE;">rpx</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#666666;">.</span><span style="color:#BD976A;">canvas-editor1</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">width</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">100</span><span style="color:#CB7676;">%</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">height</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">100</span><span style="color:#CB7676;">%</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#666666;">&lt;/</span><span style="color:#4D9375;">style</span><span style="color:#666666;">&gt;</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">template</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">view</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#B07D48;">class</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">signature-body</span><span style="color:#B56959AA;">&quot;</span></span>
<span class="line"><span style="color:#999999;">    :</span><span style="color:#B07D48;">style</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">{ </span><span style="color:#998418;">width</span><span style="color:#999999;">: </span><span style="color:#B07D48;">canvasWidth</span><span style="color:#999999;"> </span><span style="color:#AB5959;">+</span><span style="color:#999999;"> </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">%</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">, </span><span style="color:#998418;">height</span><span style="color:#999999;">: </span><span style="color:#B07D48;">canvasHeight</span><span style="color:#999999;"> </span><span style="color:#AB5959;">+</span><span style="color:#999999;"> </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">rpx</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;"> }</span><span style="color:#B56959AA;">&quot;</span></span>
<span class="line"><span style="color:#999999;">  &gt;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">canvas</span></span>
<span class="line"><span style="color:#999999;">      </span><span style="color:#B07D48;">class</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">canvas-editor1</span><span style="color:#B56959AA;">&quot;</span></span>
<span class="line"><span style="color:#999999;">      :</span><span style="color:#B07D48;">canvas-id</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B07D48;">cid</span><span style="color:#B56959AA;">&quot;</span></span>
<span class="line"><span style="color:#999999;">      :</span><span style="color:#B07D48;">id</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B07D48;">cid</span><span style="color:#B56959AA;">&quot;</span></span>
<span class="line"><span style="color:#999999;">      @</span><span style="color:#B07D48;">touchstart</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B07D48;">touchstart</span><span style="color:#B56959AA;">&quot;</span></span>
<span class="line"><span style="color:#999999;">      @</span><span style="color:#B07D48;">touchmove</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B07D48;">touchmove</span><span style="color:#B56959AA;">&quot;</span></span>
<span class="line"><span style="color:#999999;">      @</span><span style="color:#B07D48;">touchend</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B07D48;">touchend</span><span style="color:#B56959AA;">&quot;</span></span>
<span class="line"><span style="color:#999999;">    &gt;&lt;/</span><span style="color:#1E754F;">canvas</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">&lt;/</span><span style="color:#1E754F;">view</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#999999;">&lt;/</span><span style="color:#1E754F;">template</span><span style="color:#999999;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">script</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#1E754F;">export</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">default</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">name</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">signature</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">props</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">cid</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">type</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">String</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">default</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">myCanvas</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">canvasWidth</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">type</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">Number</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">default</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">100</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">canvasHeight</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">type</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">Number</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">default</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">500</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#59873A;">data</span><span style="color:#999999;">()</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">Strokes</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">[],</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">width</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;">// \u5C4F\u5E55\u5BBD\u5EA6</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">height</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;">// \u5C4F\u5E55\u9AD8\u5EA6</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">dom</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">null</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;">// canvas DOM\u8282\u70B9</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">};</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#59873A;">mounted</span><span style="color:#999999;">()</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">// \u56DE\u8C03\u4F1A\u5EF6\u8FDF\u5230\u4E0B\u6B21 DOM \u66F4\u65B0\u5FAA\u73AF\u4E4B\u540E\u6267\u884C\u3002\u5728\u4FEE\u6539\u6570\u636E\u4E4B\u540E\u7ACB\u5373\u4F7F\u7528\u5B83\uFF0C\u7136\u540E\u7B49\u5F85 DOM \u66F4\u65B0</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#59873A;">$nextTick</span><span style="color:#999999;">(()</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">      </span><span style="color:#A0ADA0;">// \u83B7\u53D6\u624B\u673A\u76F8\u5173\u4FE1\u606F</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">uni</span><span style="color:#999999;">.</span><span style="color:#59873A;">getSystemInfo</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#59873A;">success</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">res</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">width</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">res</span><span style="color:#999999;">.</span><span style="color:#B07D48;">windowWidth</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">height</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">res</span><span style="color:#999999;">.</span><span style="color:#B07D48;">windowHeight</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#999999;">      </span><span style="color:#A0ADA0;">// \u83B7\u53D6\u5230 canvas</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">dom</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">uni</span><span style="color:#999999;">.</span><span style="color:#59873A;">createCanvasContext</span><span style="color:#999999;">(</span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">cid</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">methods</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">// \u624B\u6307\u89E6\u6478\u5C4F\u5E55\u65F6\u89E6\u53D1</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#59873A;">touchstart</span><span style="color:#999999;">(</span><span style="color:#B07D48;">e</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">      </span><span style="color:#A0ADA0;">// \u53D6\u6D88\u4E8B\u4EF6\u7684\u9ED8\u8BA4\u52A8\u4F5C</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">e</span><span style="color:#999999;">.</span><span style="color:#59873A;">preventDefault</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#999999;">      </span><span style="color:#A0ADA0;">// \u7981\u6B62\u4E8B\u4EF6\u5192\u6CE1</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">e</span><span style="color:#999999;">.</span><span style="color:#59873A;">stopPropagation</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#999999;">      </span><span style="color:#A0ADA0;">// \u8BB0\u5F55\u76F8\u5173\u4FE1\u606F</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">Strokes</span><span style="color:#999999;">.</span><span style="color:#59873A;">push</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">imageData</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">null</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">style</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">color</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">#000000</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">lineWidth</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">3</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">points</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">[</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#998418;">x</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">e</span><span style="color:#999999;">.</span><span style="color:#B07D48;">touches</span><span style="color:#999999;">[</span><span style="color:#2F798A;">0</span><span style="color:#999999;">].</span><span style="color:#B07D48;">x</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#998418;">y</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">e</span><span style="color:#999999;">.</span><span style="color:#B07D48;">touches</span><span style="color:#999999;">[</span><span style="color:#2F798A;">0</span><span style="color:#999999;">].</span><span style="color:#B07D48;">y</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#998418;">type</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">e</span><span style="color:#999999;">.</span><span style="color:#B07D48;">type</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">],</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#59873A;">drawLine</span><span style="color:#999999;">(</span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">Strokes</span><span style="color:#999999;">[</span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">Strokes</span><span style="color:#999999;">.</span><span style="color:#998418;">length</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">1</span><span style="color:#999999;">],</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">e</span><span style="color:#999999;">.</span><span style="color:#B07D48;">type</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">// \u624B\u6307\u5728\u5C4F\u5E55\u6ED1\u52A8\u65F6\u89E6\u53D1</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#59873A;">touchmove</span><span style="color:#999999;">(</span><span style="color:#B07D48;">e</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">      </span><span style="color:#A0ADA0;">// \u53D6\u6D88\u4E8B\u4EF6\u7684\u9ED8\u8BA4\u52A8\u4F5C</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">e</span><span style="color:#999999;">.</span><span style="color:#59873A;">preventDefault</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#999999;">      </span><span style="color:#A0ADA0;">// \u7981\u6B62\u4E8B\u4EF6\u5192\u6CE1</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">e</span><span style="color:#999999;">.</span><span style="color:#59873A;">stopPropagation</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">Strokes</span><span style="color:#999999;">[</span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">Strokes</span><span style="color:#999999;">.</span><span style="color:#998418;">length</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">1</span><span style="color:#999999;">].</span><span style="color:#B07D48;">points</span><span style="color:#999999;">.</span><span style="color:#59873A;">push</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">x</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">e</span><span style="color:#999999;">.</span><span style="color:#B07D48;">touches</span><span style="color:#999999;">[</span><span style="color:#2F798A;">0</span><span style="color:#999999;">].</span><span style="color:#B07D48;">x</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">y</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">e</span><span style="color:#999999;">.</span><span style="color:#B07D48;">touches</span><span style="color:#999999;">[</span><span style="color:#2F798A;">0</span><span style="color:#999999;">].</span><span style="color:#B07D48;">y</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">type</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">e</span><span style="color:#999999;">.</span><span style="color:#B07D48;">type</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#59873A;">drawLine</span><span style="color:#999999;">(</span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">Strokes</span><span style="color:#999999;">[</span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">Strokes</span><span style="color:#999999;">.</span><span style="color:#998418;">length</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">1</span><span style="color:#999999;">],</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">e</span><span style="color:#999999;">.</span><span style="color:#B07D48;">type</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">// \u624B\u6307\u5728\u5C4F\u5E55\u7ED3\u675F\u6ED1\u52A8\u65F6\u89E6\u53D1</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#59873A;">touchend</span><span style="color:#999999;">(</span><span style="color:#B07D48;">e</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">      </span><span style="color:#A0ADA0;">// \u53D6\u6D88\u4E8B\u4EF6\u7684\u9ED8\u8BA4\u52A8\u4F5C</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">e</span><span style="color:#999999;">.</span><span style="color:#59873A;">preventDefault</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#999999;">      </span><span style="color:#A0ADA0;">// \u7981\u6B62\u4E8B\u4EF6\u5192\u6CE1</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">e</span><span style="color:#999999;">.</span><span style="color:#59873A;">stopPropagation</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">Strokes</span><span style="color:#999999;">[</span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">Strokes</span><span style="color:#999999;">.</span><span style="color:#998418;">length</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">1</span><span style="color:#999999;">].</span><span style="color:#B07D48;">points</span><span style="color:#999999;">.</span><span style="color:#998418;">length</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">2</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">        </span><span style="color:#A0ADA0;">//\u5F53\u6B64\u8DEF\u5F84\u53EA\u6709\u4E00\u4E2A\u70B9\u7684\u65F6\u5019</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">Strokes</span><span style="color:#999999;">.</span><span style="color:#59873A;">pop</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">// \u753B\u7EBF\u7684\u64CD\u4F5C</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#59873A;">drawLine</span><span style="color:#999999;">(</span><span style="color:#B07D48;">StrokesItem</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">type</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">      </span><span style="color:#A0ADA0;">// \u8BBE\u7F6E\u7EBF\u6761\u7AEF\u70B9\u6837\u5F0F</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">dom</span><span style="color:#999999;">.</span><span style="color:#59873A;">setLineCap</span><span style="color:#999999;">(</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">round</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#999999;">      </span><span style="color:#A0ADA0;">// \u8BBE\u7F6E\u8FB9\u6846\u989C\u8272</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">dom</span><span style="color:#999999;">.</span><span style="color:#59873A;">setStrokeStyle</span><span style="color:#999999;">(</span><span style="color:#B07D48;">StrokesItem</span><span style="color:#999999;">.</span><span style="color:#B07D48;">style</span><span style="color:#999999;">.</span><span style="color:#B07D48;">color</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#999999;">      </span><span style="color:#A0ADA0;">// \u8BBE\u7F6E\u7EBF\u6761\u5BBD\u5EA6</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">dom</span><span style="color:#999999;">.</span><span style="color:#59873A;">setLineWidth</span><span style="color:#999999;">(</span><span style="color:#B07D48;">StrokesItem</span><span style="color:#999999;">.</span><span style="color:#B07D48;">style</span><span style="color:#999999;">.</span><span style="color:#B07D48;">lineWidth</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#999999;">      </span><span style="color:#A0ADA0;">// \u5C06\u8DEF\u5F84\u79FB\u52A8\u5230\u63A5\u89E6\u5C4F\u5E55\u7684\u6307\u5B9A\u70B9</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">dom</span><span style="color:#999999;">.</span><span style="color:#59873A;">moveTo</span><span style="color:#999999;">(</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">StrokesItem</span><span style="color:#999999;">.</span><span style="color:#B07D48;">points</span><span style="color:#999999;">[</span><span style="color:#B07D48;">StrokesItem</span><span style="color:#999999;">.</span><span style="color:#B07D48;">points</span><span style="color:#999999;">.</span><span style="color:#998418;">length</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">2</span><span style="color:#999999;">].</span><span style="color:#B07D48;">x</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">StrokesItem</span><span style="color:#999999;">.</span><span style="color:#B07D48;">points</span><span style="color:#999999;">[</span><span style="color:#B07D48;">StrokesItem</span><span style="color:#999999;">.</span><span style="color:#B07D48;">points</span><span style="color:#999999;">.</span><span style="color:#998418;">length</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">2</span><span style="color:#999999;">].</span><span style="color:#B07D48;">y</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">dom</span><span style="color:#999999;">.</span><span style="color:#59873A;">lineTo</span><span style="color:#999999;">(</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">StrokesItem</span><span style="color:#999999;">.</span><span style="color:#B07D48;">points</span><span style="color:#999999;">[</span><span style="color:#B07D48;">StrokesItem</span><span style="color:#999999;">.</span><span style="color:#B07D48;">points</span><span style="color:#999999;">.</span><span style="color:#998418;">length</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">1</span><span style="color:#999999;">].</span><span style="color:#B07D48;">x</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">StrokesItem</span><span style="color:#999999;">.</span><span style="color:#B07D48;">points</span><span style="color:#999999;">[</span><span style="color:#B07D48;">StrokesItem</span><span style="color:#999999;">.</span><span style="color:#B07D48;">points</span><span style="color:#999999;">.</span><span style="color:#998418;">length</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">1</span><span style="color:#999999;">].</span><span style="color:#B07D48;">y</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#999999;">      </span><span style="color:#A0ADA0;">// \u753B\u51FA\u5F53\u524D\u8DEF\u5F84\u7684\u8FB9\u6846</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">dom</span><span style="color:#999999;">.</span><span style="color:#59873A;">stroke</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">dom</span><span style="color:#999999;">.</span><span style="color:#59873A;">draw</span><span style="color:#999999;">(</span><span style="color:#1E754F;">true</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">// \u6E05\u7A7A\u753B\u5E03</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#59873A;">clearCanvas</span><span style="color:#999999;">()</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">Strokes</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#999999;">[];</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">dom</span><span style="color:#999999;">.</span><span style="color:#B07D48;">fillStyle</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">#FFFFFF</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">dom</span><span style="color:#999999;">.</span><span style="color:#59873A;">clearRect</span><span style="color:#999999;">(</span><span style="color:#2F798A;">0</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">width</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">height</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">dom</span><span style="color:#999999;">.</span><span style="color:#59873A;">beginPath</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">dom</span><span style="color:#999999;">.</span><span style="color:#59873A;">draw</span><span style="color:#999999;">(</span><span style="color:#1E754F;">true</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">dom</span><span style="color:#999999;">.</span><span style="color:#59873A;">closePath</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">// \u4FDD\u5B58\u753B\u5E03 \u6267\u884C\u7684\u65B9\u6CD5</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#59873A;">saveCanvas</span><span style="color:#999999;">(</span><span style="color:#B07D48;">fn</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#59873A;">fn</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#999999;">};</span></span>
<span class="line"><span style="color:#999999;">&lt;/</span><span style="color:#1E754F;">script</span><span style="color:#999999;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">style</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">lang</span><span style="color:#393A34;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">scss</span><span style="color:#B56959AA;">&quot;</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">scoped</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#999999;">.</span><span style="color:#B07D48;">signature-body</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">border</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">1</span><span style="color:#AB5959;">px</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">solid</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">red</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">margin</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">20</span><span style="color:#393A34;">rpx</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#999999;">.</span><span style="color:#B07D48;">canvas-editor1</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">width</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">100</span><span style="color:#AB5959;">%</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">height</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">100</span><span style="color:#AB5959;">%</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#999999;">&lt;/</span><span style="color:#1E754F;">style</span><span style="color:#999999;">&gt;</span></span>
<span class="line"></span></code></pre></div><h2 id="\u56FE\u7247\u8DEF\u5F84-2021-03-12" tabindex="-1">\u56FE\u7247\u8DEF\u5F84 (2021-03-12) <a class="header-anchor" href="#\u56FE\u7247\u8DEF\u5F84-2021-03-12" aria-hidden="true">#</a></h2><p>img \u6807\u7B7E\u4E0A\u7684\u8DEF\u5F84\u4F7F\u7528\u7EDD\u5BF9\u8DEF\u5F84</p><p>\u80CC\u666F\u56FE\u4E0A\u7684\u8DEF\u5F84\u4F7F\u7528\u76F8\u5BF9\u8DEF\u5F84</p><h2 id="\u5FAE\u4FE1\u5C0F\u7A0B\u5E8F-base64-\u683C\u5F0F\u56FE\u7247\u8F6C-http-\u5730\u5740-2021-03-17" tabindex="-1">\u5FAE\u4FE1\u5C0F\u7A0B\u5E8F base64 \u683C\u5F0F\u56FE\u7247\u8F6C http \u5730\u5740 (2021-03-17) <a class="header-anchor" href="#\u5FAE\u4FE1\u5C0F\u7A0B\u5E8F-base64-\u683C\u5F0F\u56FE\u7247\u8F6C-http-\u5730\u5740-2021-03-17" aria-hidden="true">#</a></h2><div class="language-js"><button class="copy"></button><span class="lang">js</span><pre class="vp-code-dark"><code><span class="line"><span style="color:#80A665;">base64ToImg</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">base64Data</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#BD976A;">uni</span><span style="color:#666666;">.</span><span style="color:#80A665;">showToast</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">title</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">\u52A0\u8F7D\u4E2D</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">icon</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">loading</span><span style="color:#C98A7DAA;">&#39;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">})</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">new</span><span style="color:#DBD7CAEE;"> </span><span style="color:#B8A965;">Promise</span><span style="color:#666666;">((</span><span style="color:#BD976A;">resolve</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">reject</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">      </span><span style="color:#758575DD;">// \u5148\u83B7\u5F97\u4E00\u4E2A\u6587\u4EF6\u5B9E\u4F8B</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#CB7676;">var</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">fileManager</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">wx</span><span style="color:#666666;">.</span><span style="color:#80A665;">getFileSystemManager</span><span style="color:#666666;">()</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#CB7676;">var</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">qrCodeSrc</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">\`</span><span style="color:#666666;">\${</span><span style="color:#C98A7D;">wx</span><span style="color:#666666;">.</span><span style="color:#C98A7D;">env</span><span style="color:#666666;">.</span><span style="color:#C98A7D;">USER_DATA_PATH</span><span style="color:#666666;">}</span><span style="color:#C98A7D;">/qrcode.png</span><span style="color:#C98A7DAA;">\`</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">fileManager</span><span style="color:#666666;">.</span><span style="color:#80A665;">writeFile</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">filePath</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">qrCodeSrc</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">data</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">base64Data</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">encoding</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">base64</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#80A665;">success</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">res</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#80A665;">setTimeout</span><span style="color:#666666;">(()</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#80A665;">resolve</span><span style="color:#666666;">(</span><span style="color:#BD976A;">qrCodeSrc</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#666666;">},</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">2000</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#80A665;">fail</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">ret</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#BD976A;">console</span><span style="color:#666666;">.</span><span style="color:#80A665;">log</span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">error:</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">ret</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#80A665;">reject</span><span style="color:#666666;">(</span><span style="color:#BD976A;">ret</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">})</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">})</span></span>
<span class="line"><span style="color:#666666;">},</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#59873A;">base64ToImg</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">base64Data</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B07D48;">uni</span><span style="color:#999999;">.</span><span style="color:#59873A;">showToast</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">title</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">\u52A0\u8F7D\u4E2D</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">icon</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">loading</span><span style="color:#B56959AA;">&#39;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">})</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">new</span><span style="color:#393A34;"> </span><span style="color:#998418;">Promise</span><span style="color:#999999;">((</span><span style="color:#B07D48;">resolve</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">reject</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">      </span><span style="color:#A0ADA0;">// \u5148\u83B7\u5F97\u4E00\u4E2A\u6587\u4EF6\u5B9E\u4F8B</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#AB5959;">var</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">fileManager</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">wx</span><span style="color:#999999;">.</span><span style="color:#59873A;">getFileSystemManager</span><span style="color:#999999;">()</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#AB5959;">var</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">qrCodeSrc</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">\`</span><span style="color:#999999;">\${</span><span style="color:#B56959;">wx</span><span style="color:#999999;">.</span><span style="color:#B56959;">env</span><span style="color:#999999;">.</span><span style="color:#B56959;">USER_DATA_PATH</span><span style="color:#999999;">}</span><span style="color:#B56959;">/qrcode.png</span><span style="color:#B56959AA;">\`</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">fileManager</span><span style="color:#999999;">.</span><span style="color:#59873A;">writeFile</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">filePath</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">qrCodeSrc</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">data</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">base64Data</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">encoding</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">base64</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#59873A;">success</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">res</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#59873A;">setTimeout</span><span style="color:#999999;">(()</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#59873A;">resolve</span><span style="color:#999999;">(</span><span style="color:#B07D48;">qrCodeSrc</span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#999999;">},</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">2000</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#59873A;">fail</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">ret</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#B07D48;">console</span><span style="color:#999999;">.</span><span style="color:#59873A;">log</span><span style="color:#999999;">(</span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">error:</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">ret</span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#59873A;">reject</span><span style="color:#999999;">(</span><span style="color:#B07D48;">ret</span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">})</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">})</span></span>
<span class="line"><span style="color:#999999;">},</span></span>
<span class="line"></span></code></pre></div><h2 id="uniapp-\u5C0F\u7A0B\u5E8F\u9876\u90E8\u680F\u5207\u6362" tabindex="-1">uniapp \u5C0F\u7A0B\u5E8F\u9876\u90E8\u680F\u5207\u6362 <a class="header-anchor" href="#uniapp-\u5C0F\u7A0B\u5E8F\u9876\u90E8\u680F\u5207\u6362" aria-hidden="true">#</a></h2><p><img src="https://gitee.com/xiaopeng77/typora-img/raw/master/imgs/image-20210401153108524.png" alt="image-20210401153108524"></p><ul><li><p>\u5728\u5C0F\u7A0B\u5E8F\u4F7F\u7528<code>refs</code> \u4F1A\u51FA\u73B0\u95EE\u9898</p></li><li><p><a href="https://blog.csdn.net/qq_36959274/article/details/108762635" target="_blank" rel="noreferrer">uniapp \u5C0F\u7A0B\u5E8F\u83B7\u53D6\u5143\u7D20\u7684 DOM \u8282\u70B9\u76F8\u5173\u4FE1\u606F</a></p></li></ul><div class="language-vue"><button class="copy"></button><span class="lang">vue</span><pre class="vp-code-dark"><code><span class="line"><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">template</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">view</span><span style="color:#666666;"> </span><span style="color:#BD976A;">class</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">intelligentCustomerBox</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">view</span><span style="color:#666666;"> </span><span style="color:#BD976A;">class</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">headerBox</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">view</span><span style="color:#666666;"> </span><span style="color:#BD976A;">class</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">ic-HeaderBox</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">block</span><span style="color:#666666;"> </span><span style="color:#BD976A;">v-for</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">(</span><span style="color:#BD976A;">item</span><span style="color:#666666;">, </span><span style="color:#BD976A;">index</span><span style="color:#666666;">) </span><span style="color:#CB7676;">in</span><span style="color:#666666;"> </span><span style="color:#BD976A;">headerList</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;"> :</span><span style="color:#BD976A;">key</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#BD976A;">index</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">view</span></span>
<span class="line"><span style="color:#666666;">            :</span><span style="color:#BD976A;">class</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">[</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">headerItem</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">, </span><span style="color:#BD976A;">item</span><span style="color:#666666;">.</span><span style="color:#BD976A;">active</span><span style="color:#666666;"> </span><span style="color:#CB7676;">?</span><span style="color:#666666;"> </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">headerItem-active</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;"> </span><span style="color:#CB7676;">:</span><span style="color:#666666;"> </span><span style="color:#C98A7DAA;">&#39;&#39;</span><span style="color:#666666;">]</span><span style="color:#C98A7DAA;">&quot;</span></span>
<span class="line"><span style="color:#666666;">            @</span><span style="color:#BD976A;">click</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#80A665;">tapAcitve</span><span style="color:#666666;">(</span><span style="color:#BD976A;">index</span><span style="color:#666666;">)</span><span style="color:#C98A7DAA;">&quot;</span></span>
<span class="line"><span style="color:#666666;">            &gt;{{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">item</span><span style="color:#666666;">.</span><span style="color:#BD976A;">name</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">}}&lt;/</span><span style="color:#4D9375;">view</span></span>
<span class="line"><span style="color:#666666;">          &gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">&lt;/</span><span style="color:#4D9375;">block</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">&lt;/</span><span style="color:#4D9375;">view</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">view</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">class</span><span style="color:#DBD7CAEE;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">headerLine</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">:</span><span style="color:#BD976A;">style</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#B8A965;">left</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">headerLineLeft</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">}</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">&gt;&lt;/</span><span style="color:#4D9375;">view</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">&lt;/</span><span style="color:#4D9375;">view</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">&lt;/</span><span style="color:#4D9375;">view</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#666666;">&lt;/</span><span style="color:#4D9375;">template</span><span style="color:#666666;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">script</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#4D9375;">export</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">default</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">name</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">intelligentCustomer</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#80A665;">data</span><span style="color:#666666;">()</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">headerLineLeft</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">headerList</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">[</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">name</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">\u667A\u80FD\u5BA2\u670D</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">value</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">1</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">active</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">true</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">name</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">\u5728\u7EBF\u5DE5\u5355</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">value</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">2</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">active</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">false</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">name</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">\u5728\u7EBF\u6295\u8BC9</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">value</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">3</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">active</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">false</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">],</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">};</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#80A665;">mounted</span><span style="color:#666666;">()</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#80A665;">setHeaderLineLeft</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">methods</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#80A665;">setHeaderLineLeft</span><span style="color:#666666;">()</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#CB7676;">let</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">headerBox</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">uni</span><span style="color:#666666;">.</span><span style="color:#80A665;">createSelectorQuery</span><span style="color:#666666;">().</span><span style="color:#80A665;">select</span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">.headerItem-active</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">headerBox</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">.</span><span style="color:#80A665;">fields</span><span style="color:#666666;">({</span><span style="color:#DBD7CAEE;"> </span><span style="color:#B8A965;">rect</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">true</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#B8A965;">size</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">true</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">},</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">data</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">headerLineLeft</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">data</span><span style="color:#666666;">.</span><span style="color:#BD976A;">left</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">+</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">data</span><span style="color:#666666;">.</span><span style="color:#BD976A;">width</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">/</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">2</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">-</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">12</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">+</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">px</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">})</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">.</span><span style="color:#80A665;">exec</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#80A665;">tapAcitve</span><span style="color:#666666;">(</span><span style="color:#BD976A;">index</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">headerList</span><span style="color:#666666;">[</span><span style="color:#BD976A;">index</span><span style="color:#666666;">].</span><span style="color:#BD976A;">active</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#4D9375;">return</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">headerList</span><span style="color:#666666;">.</span><span style="color:#80A665;">forEach</span><span style="color:#666666;">((</span><span style="color:#BD976A;">item</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">index</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">item</span><span style="color:#666666;">.</span><span style="color:#BD976A;">active</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">false</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">headerList</span><span style="color:#666666;">[</span><span style="color:#BD976A;">index</span><span style="color:#666666;">].</span><span style="color:#BD976A;">active</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">true</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#CB7676;">let</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">selectClass</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">.headerItem</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">+</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">index</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#80A665;">setTimeout</span><span style="color:#666666;">(()</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#80A665;">setHeaderLineLeft</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">},</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">10</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#666666;">};</span></span>
<span class="line"><span style="color:#666666;">&lt;/</span><span style="color:#4D9375;">script</span><span style="color:#666666;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">style</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">lang</span><span style="color:#DBD7CAEE;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">scss</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">page </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">width</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">100</span><span style="color:#CB7676;">%</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">height</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">100</span><span style="color:#CB7676;">%</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">background</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">$uni-bg-color-grey</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#666666;">&lt;/</span><span style="color:#4D9375;">style</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">style</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">lang</span><span style="color:#DBD7CAEE;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">scss</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">scoped</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#666666;">.</span><span style="color:#BD976A;">intelligentCustomerBox</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">width</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">100</span><span style="color:#CB7676;">%</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">height</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">100</span><span style="color:#CB7676;">%</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#666666;">.</span><span style="color:#BD976A;">headerBox</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">width</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">100</span><span style="color:#CB7676;">%</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">height</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">80</span><span style="color:#DBD7CAEE;">rpx</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">background</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">#</span><span style="color:#C99076;">fff</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">.</span><span style="color:#BD976A;">ic-HeaderBox</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">width</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">90</span><span style="color:#CB7676;">%</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">display</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C99076;">flex</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">align-items</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C99076;">center</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">justify-content</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C99076;">space-around</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">margin</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C99076;">auto</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">.</span><span style="color:#BD976A;">headerItem</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">flex</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">1</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">text-align</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C99076;">center</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">color</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">#</span><span style="color:#C99076;">000</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">font-weight</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">500</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">font-size</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">30</span><span style="color:#DBD7CAEE;">rpx</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">.</span><span style="color:#BD976A;">headerItem-active</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">color</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#B8A965;">rgb</span><span style="color:#666666;">(</span><span style="color:#4C9A91;">221</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">167</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">107</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">.</span><span style="color:#BD976A;">headerLine</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">width</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">50</span><span style="color:#DBD7CAEE;">rpx</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">height</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">8</span><span style="color:#DBD7CAEE;">rpx</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">background</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#B8A965;">rgb</span><span style="color:#666666;">(</span><span style="color:#4C9A91;">221</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">167</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">107</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">border-radius</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">5</span><span style="color:#CB7676;">px</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">position</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C99076;">relative</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">top</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">8</span><span style="color:#CB7676;">px</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">transition</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C99076;">all</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0.2</span><span style="color:#CB7676;">s</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C99076;">linear</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#666666;">&lt;/</span><span style="color:#4D9375;">style</span><span style="color:#666666;">&gt;</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">template</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">view</span><span style="color:#999999;"> </span><span style="color:#B07D48;">class</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">intelligentCustomerBox</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">view</span><span style="color:#999999;"> </span><span style="color:#B07D48;">class</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">headerBox</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">view</span><span style="color:#999999;"> </span><span style="color:#B07D48;">class</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">ic-HeaderBox</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">block</span><span style="color:#999999;"> </span><span style="color:#B07D48;">v-for</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">(</span><span style="color:#B07D48;">item</span><span style="color:#999999;">, </span><span style="color:#B07D48;">index</span><span style="color:#999999;">) </span><span style="color:#AB5959;">in</span><span style="color:#999999;"> </span><span style="color:#B07D48;">headerList</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;"> :</span><span style="color:#B07D48;">key</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B07D48;">index</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">view</span></span>
<span class="line"><span style="color:#999999;">            :</span><span style="color:#B07D48;">class</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">[</span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">headerItem</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">, </span><span style="color:#B07D48;">item</span><span style="color:#999999;">.</span><span style="color:#B07D48;">active</span><span style="color:#999999;"> </span><span style="color:#AB5959;">?</span><span style="color:#999999;"> </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">headerItem-active</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;"> </span><span style="color:#AB5959;">:</span><span style="color:#999999;"> </span><span style="color:#B56959AA;">&#39;&#39;</span><span style="color:#999999;">]</span><span style="color:#B56959AA;">&quot;</span></span>
<span class="line"><span style="color:#999999;">            @</span><span style="color:#B07D48;">click</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#59873A;">tapAcitve</span><span style="color:#999999;">(</span><span style="color:#B07D48;">index</span><span style="color:#999999;">)</span><span style="color:#B56959AA;">&quot;</span></span>
<span class="line"><span style="color:#999999;">            &gt;{{</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">item</span><span style="color:#999999;">.</span><span style="color:#B07D48;">name</span><span style="color:#393A34;"> </span><span style="color:#999999;">}}&lt;/</span><span style="color:#1E754F;">view</span></span>
<span class="line"><span style="color:#999999;">          &gt;</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">&lt;/</span><span style="color:#1E754F;">block</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">&lt;/</span><span style="color:#1E754F;">view</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">view</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">class</span><span style="color:#393A34;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">headerLine</span><span style="color:#B56959AA;">&quot;</span><span style="color:#393A34;"> </span><span style="color:#999999;">:</span><span style="color:#B07D48;">style</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">{</span><span style="color:#393A34;"> </span><span style="color:#998418;">left</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">headerLineLeft</span><span style="color:#393A34;"> </span><span style="color:#999999;">}</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">&gt;&lt;/</span><span style="color:#1E754F;">view</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">&lt;/</span><span style="color:#1E754F;">view</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">&lt;/</span><span style="color:#1E754F;">view</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#999999;">&lt;/</span><span style="color:#1E754F;">template</span><span style="color:#999999;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">script</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#1E754F;">export</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">default</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">name</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">intelligentCustomer</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#59873A;">data</span><span style="color:#999999;">()</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">headerLineLeft</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">headerList</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">[</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">name</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">\u667A\u80FD\u5BA2\u670D</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">value</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">1</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">active</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">true</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">name</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">\u5728\u7EBF\u5DE5\u5355</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">value</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">2</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">active</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">false</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">name</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">\u5728\u7EBF\u6295\u8BC9</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">value</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">3</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">active</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">false</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">],</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">};</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#59873A;">mounted</span><span style="color:#999999;">()</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#59873A;">setHeaderLineLeft</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">methods</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#59873A;">setHeaderLineLeft</span><span style="color:#999999;">()</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">headerBox</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">uni</span><span style="color:#999999;">.</span><span style="color:#59873A;">createSelectorQuery</span><span style="color:#999999;">().</span><span style="color:#59873A;">select</span><span style="color:#999999;">(</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">.headerItem-active</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">headerBox</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">.</span><span style="color:#59873A;">fields</span><span style="color:#999999;">({</span><span style="color:#393A34;"> </span><span style="color:#998418;">rect</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">true</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#998418;">size</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">true</span><span style="color:#393A34;"> </span><span style="color:#999999;">},</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">data</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">headerLineLeft</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">data</span><span style="color:#999999;">.</span><span style="color:#B07D48;">left</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">+</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">data</span><span style="color:#999999;">.</span><span style="color:#B07D48;">width</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">/</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">2</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">12</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">+</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">px</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">})</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">.</span><span style="color:#59873A;">exec</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#59873A;">tapAcitve</span><span style="color:#999999;">(</span><span style="color:#B07D48;">index</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">headerList</span><span style="color:#999999;">[</span><span style="color:#B07D48;">index</span><span style="color:#999999;">].</span><span style="color:#B07D48;">active</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#1E754F;">return</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">headerList</span><span style="color:#999999;">.</span><span style="color:#59873A;">forEach</span><span style="color:#999999;">((</span><span style="color:#B07D48;">item</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">index</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">item</span><span style="color:#999999;">.</span><span style="color:#B07D48;">active</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">false</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">headerList</span><span style="color:#999999;">[</span><span style="color:#B07D48;">index</span><span style="color:#999999;">].</span><span style="color:#B07D48;">active</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">true</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">selectClass</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">.headerItem</span><span style="color:#B56959AA;">&quot;</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">+</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">index</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#59873A;">setTimeout</span><span style="color:#999999;">(()</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#59873A;">setHeaderLineLeft</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">},</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">10</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#999999;">};</span></span>
<span class="line"><span style="color:#999999;">&lt;/</span><span style="color:#1E754F;">script</span><span style="color:#999999;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">style</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">lang</span><span style="color:#393A34;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">scss</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">page </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">width</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">100</span><span style="color:#AB5959;">%</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">height</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">100</span><span style="color:#AB5959;">%</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">background</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">$uni-bg-color-grey</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#999999;">&lt;/</span><span style="color:#1E754F;">style</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">style</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">lang</span><span style="color:#393A34;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">scss</span><span style="color:#B56959AA;">&quot;</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">scoped</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#999999;">.</span><span style="color:#B07D48;">intelligentCustomerBox</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">width</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">100</span><span style="color:#AB5959;">%</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">height</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">100</span><span style="color:#AB5959;">%</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#999999;">.</span><span style="color:#B07D48;">headerBox</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">width</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">100</span><span style="color:#AB5959;">%</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">height</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">80</span><span style="color:#393A34;">rpx</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">background</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">#</span><span style="color:#A65E2B;">fff</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">.</span><span style="color:#B07D48;">ic-HeaderBox</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">width</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">90</span><span style="color:#AB5959;">%</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">display</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">flex</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">align-items</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">center</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">justify-content</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">space-around</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">margin</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">auto</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">.</span><span style="color:#B07D48;">headerItem</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">flex</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">1</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">text-align</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">center</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">color</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">#</span><span style="color:#A65E2B;">000</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">font-weight</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">500</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">font-size</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">30</span><span style="color:#393A34;">rpx</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">.</span><span style="color:#B07D48;">headerItem-active</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">color</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#998418;">rgb</span><span style="color:#999999;">(</span><span style="color:#2F798A;">221</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">167</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">107</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">.</span><span style="color:#B07D48;">headerLine</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">width</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">50</span><span style="color:#393A34;">rpx</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">height</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">8</span><span style="color:#393A34;">rpx</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">background</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#998418;">rgb</span><span style="color:#999999;">(</span><span style="color:#2F798A;">221</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">167</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">107</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">border-radius</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">5</span><span style="color:#AB5959;">px</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">position</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">relative</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">top</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">8</span><span style="color:#AB5959;">px</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">transition</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">all</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0.2</span><span style="color:#AB5959;">s</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">linear</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#999999;">&lt;/</span><span style="color:#1E754F;">style</span><span style="color:#999999;">&gt;</span></span>
<span class="line"></span></code></pre></div><h2 id="\u5C0F\u7A0B\u5E8F\u6253\u5F00-pdf-\u6587\u4EF6" tabindex="-1">\u5C0F\u7A0B\u5E8F\u6253\u5F00 PDF \u6587\u4EF6 <a class="header-anchor" href="#\u5C0F\u7A0B\u5E8F\u6253\u5F00-pdf-\u6587\u4EF6" aria-hidden="true">#</a></h2><ul><li><p>\u5728 ios \u4E0B\u53EF\u4EE5\u901A\u8FC7 web-view \u76F4\u63A5\u6253\u5F00 PDF \u6587\u4EF6\u8FDB\u884C\u9884\u89C8\u7684\u3002 \u4E0B\u9762\u7684\u65B9\u6CD5 url \u5FC5\u987B\u5728\u5C0F\u7A0B\u5E8F\u540E\u53F0\u914D\u7F6E\u4E1A\u52A1\u57DF\u540D</p></li><li><p>\u5728\u5B89\u5353\u4E0B\u662F\u4E0D\u53EF\u4EE5\u901A\u8FC7 web-view \u8FDB\u884C\u76F4\u63A5\u7684\u9884\u89C8\uFF0C\u5B89\u5353\u4F1A\u76F4\u63A5\u4E0B\u8F7D pdf \u6587\u4EF6\u3002\u5C31\u53EF\u4EE5\u4F7F\u7528\u5B98\u65B9\u7684 API \u4E86\u3002 \u8FD9\u4E2A\u65B9\u6CD5\u5728 iOS \u4E2D\u4E5F\u662F\u53EF\u4EE5\u6B63\u5E38\u4F7F\u7528\u7684\u3002\u4E0D\u8FC7\u8FD9\u65F6\u5019\u5DF2\u7ECF\u8DF3\u51FA\u4E86\u5C0F\u7A0B\u5E8F\uFF0C\u800C\u65E0\u6CD5\u4F7F\u7528\u5C0F\u7A0B\u5E8F\u63D0\u4F9B\u7684\u529F\u80FD\u83DC\u5355\u4E86\u3002</p></li><li><p>\u5FAE\u4FE1\u5C0F\u7A0B\u5E8F\u63D0\u4F9B\u4E86 wx.getSystemInfo \u83B7\u53D6\u8BBE\u5907\u4FE1\u606F\u7684\u63A5\u53E3\uFF0C\u76F4\u63A5\u8C03\u7528\u5C31\u53EF\u4EE5\u4E86\u3002</p></li></ul><div class="language-js"><button class="copy"></button><span class="lang">js</span><pre class="vp-code-dark"><code><span class="line"><span style="color:#BD976A;">wx</span><span style="color:#666666;">.</span><span style="color:#80A665;">getSystemInfo</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#80A665;">success</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">function</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">res</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">// systemInfo.platform \u5C31\u662F\u7CFB\u7EDF\u540D\u79F0\uFF0C\u7136\u540E\u518D\u5206\u522B\u8C03\u7528\u4E0D\u540C\u7684\u65B9\u6CD5\u9884\u89C8\u6587\u6863\u5373\u53EF\u3002</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#666666;">});</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#B07D48;">wx</span><span style="color:#999999;">.</span><span style="color:#59873A;">getSystemInfo</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#59873A;">success</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">function</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">res</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">// systemInfo.platform \u5C31\u662F\u7CFB\u7EDF\u540D\u79F0\uFF0C\u7136\u540E\u518D\u5206\u522B\u8C03\u7528\u4E0D\u540C\u7684\u65B9\u6CD5\u9884\u89C8\u6587\u6863\u5373\u53EF\u3002</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#999999;">});</span></span>
<span class="line"></span></code></pre></div><div class="language-js"><button class="copy"></button><span class="lang">js</span><pre class="vp-code-dark"><code><span class="line"><span style="color:#BD976A;">wx</span><span style="color:#666666;">.</span><span style="color:#80A665;">downloadFile</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">url</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">url</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#80A665;">success</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">function</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">res</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">console</span><span style="color:#666666;">.</span><span style="color:#80A665;">log</span><span style="color:#666666;">(</span><span style="color:#BD976A;">res</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">var</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">Path</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">res</span><span style="color:#666666;">.</span><span style="color:#BD976A;">tempFilePath</span><span style="color:#666666;">;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;">//\u8FD4\u56DE\u7684\u6587\u4EF6\u4E34\u65F6\u5730\u5740\uFF0C\u7528\u4E8E\u540E\u9762\u6253\u5F00\u672C\u5730\u9884\u89C8\u6240\u7528</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">wx</span><span style="color:#666666;">.</span><span style="color:#80A665;">openDocument</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">filePath</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">Path</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#80A665;">success</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">function</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">res</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">console</span><span style="color:#666666;">.</span><span style="color:#80A665;">log</span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">\u6253\u5F00\u6210\u529F</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#80A665;">fail</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">function</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">res</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">console</span><span style="color:#666666;">.</span><span style="color:#80A665;">log</span><span style="color:#666666;">(</span><span style="color:#BD976A;">res</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#666666;">});</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#B07D48;">wx</span><span style="color:#999999;">.</span><span style="color:#59873A;">downloadFile</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">url</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">url</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#59873A;">success</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">function</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">res</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">console</span><span style="color:#999999;">.</span><span style="color:#59873A;">log</span><span style="color:#999999;">(</span><span style="color:#B07D48;">res</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">var</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">Path</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">res</span><span style="color:#999999;">.</span><span style="color:#B07D48;">tempFilePath</span><span style="color:#999999;">;</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;">//\u8FD4\u56DE\u7684\u6587\u4EF6\u4E34\u65F6\u5730\u5740\uFF0C\u7528\u4E8E\u540E\u9762\u6253\u5F00\u672C\u5730\u9884\u89C8\u6240\u7528</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">wx</span><span style="color:#999999;">.</span><span style="color:#59873A;">openDocument</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">filePath</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">Path</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#59873A;">success</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">function</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">res</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">console</span><span style="color:#999999;">.</span><span style="color:#59873A;">log</span><span style="color:#999999;">(</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">\u6253\u5F00\u6210\u529F</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#59873A;">fail</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">function</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">res</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">console</span><span style="color:#999999;">.</span><span style="color:#59873A;">log</span><span style="color:#999999;">(</span><span style="color:#B07D48;">res</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#999999;">});</span></span>
<span class="line"></span></code></pre></div><h2 id="\u624B\u5199-\u8FDB\u5EA6\u6761\u7EC4\u4EF6" tabindex="-1">\u624B\u5199 \u8FDB\u5EA6\u6761\u7EC4\u4EF6 <a class="header-anchor" href="#\u624B\u5199-\u8FDB\u5EA6\u6761\u7EC4\u4EF6" aria-hidden="true">#</a></h2><div class="language-js"><button class="copy"></button><span class="lang">js</span><pre class="vp-code-dark"><code><span class="line"><span style="color:#758575DD;">// \u4F7F\u7528 \u89C4\u5219</span></span>
<span class="line"><span style="color:#666666;">&lt;</span><span style="color:#B8A965;">progressBar</span></span>
<span class="line"><span style="color:#DBD7CAEE;">	</span><span style="color:#FDAEB7;">:progressTitle=&quot;&#39;\u8FDB\u5EA6\u6761\u6807\u9898&#39;&quot;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">	</span><span style="color:#FDAEB7;">:progressTotalNum=&quot;1000&quot;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">	</span><span style="color:#FDAEB7;">:progressActiveNum=&quot;780&quot;</span></span>
<span class="line"><span style="color:#666666;">&gt;&lt;/</span><span style="color:#B8A965;">progressBar</span><span style="color:#666666;">&gt;</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#A0ADA0;">// \u4F7F\u7528 \u89C4\u5219</span></span>
<span class="line"><span style="color:#999999;">&lt;</span><span style="color:#998418;">progressBar</span></span>
<span class="line"><span style="color:#393A34;">	</span><span style="color:#B31D28;">:progressTitle=&quot;&#39;\u8FDB\u5EA6\u6761\u6807\u9898&#39;&quot;</span></span>
<span class="line"><span style="color:#393A34;">	</span><span style="color:#B31D28;">:progressTotalNum=&quot;1000&quot;</span></span>
<span class="line"><span style="color:#393A34;">	</span><span style="color:#B31D28;">:progressActiveNum=&quot;780&quot;</span></span>
<span class="line"><span style="color:#999999;">&gt;&lt;/</span><span style="color:#998418;">progressBar</span><span style="color:#999999;">&gt;</span></span>
<span class="line"></span></code></pre></div><div class="language-js"><button class="copy"></button><span class="lang">js</span><pre class="vp-code-dark"><code><span class="line"><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">template</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">view</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">class</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">progressBarBox</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">view</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">class</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">progressTitle</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">&gt;{{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">progressTitle</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">}}&lt;/</span><span style="color:#4D9375;">view</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">view</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">class</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">barBox</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#FDAEB7;">:style=&quot;{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#FDAEB7;">height:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">progressBarHeight</span><span style="color:#DBD7CAEE;"> </span><span style="color:#FDAEB7;">+</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">rpx</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#FDAEB7;">}&quot;&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#FDAEB7;">&lt;view</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">class</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">progressBarActive</span><span style="color:#C98A7DAA;">&quot;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#FDAEB7;">:style=&quot;barActiveStyle&quot;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">ref</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">progressBarActive</span><span style="color:#C98A7DAA;">&quot;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">&gt;&lt;/</span><span style="color:#4D9375;">view</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">view</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">class</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">progressBarTotal</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">ref</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">progressBarTotal</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">text</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">class</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">activeNumber</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">&gt;{{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">progressActiveNum</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">}}&lt;/</span><span style="color:#4D9375;">text</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">&lt;/</span><span style="color:#4D9375;">view</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">&lt;/</span><span style="color:#4D9375;">view</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">&lt;/</span><span style="color:#4D9375;">view</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#CB7676;">&lt;/</span><span style="color:#BD976A;">template</span><span style="color:#CB7676;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">script</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">export default </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#BD976A;">name</span><span style="color:#DBD7CAEE;">: </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">progressBar</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#80A665;">data</span><span style="color:#666666;">()</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    return {</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">barActiveStyle</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  props: </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">// \u9009\u62E9\u7684\u8FDB\u5EA6\u6761\u90E8\u5206\u7684\u989C\u8272</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">activeBgColor</span><span style="color:#DBD7CAEE;">: </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">type</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">String</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">default</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">#277AFF</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">// \u8FDB\u5EA6\u6761\u9AD8\u5EA6</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">progressBarHeight</span><span style="color:#DBD7CAEE;">: </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">type</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">String</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">default</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">30</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">// \u8FDB\u5EA6\u6761title</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">progressTitle</span><span style="color:#DBD7CAEE;">: </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">require</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">true</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">type</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">String</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">default</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">\u8FDB\u5EA6\u6761</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">// \u8FDB\u5EA6\u6761\u603B\u503C</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">progressTotalNum</span><span style="color:#DBD7CAEE;">: </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">type</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">Number</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">default</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">1000</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">// \u8FDB\u5EA6\u6761\u503C</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">progressActiveNum</span><span style="color:#DBD7CAEE;">: </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">type</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">Number</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">require</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">true</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">default</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  mounted() </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">// \u6C42 \u9009\u62E9\u7684\u8FDB\u5EA6\u6761\u90E8\u5206\u6240\u5360\u767E\u5206\u6BD4</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">let</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">progressActiveNum</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">Number</span><span style="color:#666666;">(</span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">progressActiveNum</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">let</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">progressTotalNum</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">Number</span><span style="color:#666666;">(</span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">progressTotalNum</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#80A665;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">progressActiveNum</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">      </span><span style="color:#758575DD;">// \u8FDB\u5EA6\u6761\u503C &lt; 0 \u9ED8\u8BA4 \u7B49\u4E8E 0</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">progressActiveNum</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0</span><span style="color:#DBD7CAEE;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#80A665;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">progressActiveNum</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">progressTotalNum</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">      </span><span style="color:#758575DD;">// \u5982\u679C\u8FD9\u4E2A\u8FDB\u5EA6\u6761\u6570\u91CF &gt; \u603B\u6570\u91CF \u9ED8\u8BA4\u4E3A\u603B\u6570\u91CF</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">progressActiveNum</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">progressTotalNum</span><span style="color:#DBD7CAEE;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">// \u8FDB\u5EA6\u6240\u5360\u767E\u5206\u6BD4</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">let</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">progressPercentage</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">progressActiveNum</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">/</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">progressTotalNum</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">*</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">100</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">+</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">%</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#DBD7CAEE;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">barActiveStyle</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">backgroundColor</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">activeBgColor</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#666666;">      </span><span style="color:#758575DD;">// height: this.progressBarHeight + &quot;rpx&quot;,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">width</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">0%</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#80A665;">setTimeout</span><span style="color:#666666;">(()</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">barActiveStyle</span><span style="color:#666666;">.</span><span style="color:#BD976A;">width</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">progressPercentage</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">},</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">100</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">};</span></span>
<span class="line"><span style="color:#666666;">&lt;/</span><span style="color:#4D9375;">script</span><span style="color:#666666;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">style</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">lang</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">less</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">scoped</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">.progressBarBox </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#BD976A;">width</span><span style="color:#DBD7CAEE;">: </span><span style="color:#4C9A91;">100</span><span style="color:#CB7676;">%</span><span style="color:#DBD7CAEE;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#BD976A;">height</span><span style="color:#DBD7CAEE;">: </span><span style="color:#4C9A91;">100</span><span style="color:#CB7676;">%</span><span style="color:#DBD7CAEE;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#BD976A;">margin</span><span style="color:#DBD7CAEE;">: 20</span><span style="color:#BD976A;">rpx</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0</span><span style="color:#DBD7CAEE;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#BD976A;">position</span><span style="color:#DBD7CAEE;">: </span><span style="color:#BD976A;">relative</span><span style="color:#DBD7CAEE;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">.</span><span style="color:#BD976A;">progressTitle</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    font-</span><span style="color:#B8A965;">size</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> 20</span><span style="color:#BD976A;">rpx</span><span style="color:#DBD7CAEE;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">font</span><span style="color:#CB7676;">-</span><span style="color:#BD976A;">weight</span><span style="color:#DBD7CAEE;">: </span><span style="color:#4C9A91;">500</span><span style="color:#DBD7CAEE;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">color</span><span style="color:#DBD7CAEE;">: #</span><span style="color:#4C9A91;">576783</span><span style="color:#DBD7CAEE;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">margin</span><span style="color:#DBD7CAEE;">: 20</span><span style="color:#BD976A;">rpx</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0</span><span style="color:#DBD7CAEE;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">.</span><span style="color:#BD976A;">barBox</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">width</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">95</span><span style="color:#CB7676;">%</span><span style="color:#DBD7CAEE;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">position</span><span style="color:#DBD7CAEE;">: </span><span style="color:#BD976A;">relative</span><span style="color:#DBD7CAEE;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">.</span><span style="color:#BD976A;">progressBarActive</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">height</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">100</span><span style="color:#CB7676;">%</span><span style="color:#DBD7CAEE;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">height</span><span style="color:#DBD7CAEE;">: </span><span style="color:#4C9A91;">100</span><span style="color:#CB7676;">%</span><span style="color:#DBD7CAEE;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">border</span><span style="color:#CB7676;">-</span><span style="color:#BD976A;">radius</span><span style="color:#DBD7CAEE;">: 20</span><span style="color:#BD976A;">rpx</span><span style="color:#DBD7CAEE;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">position</span><span style="color:#DBD7CAEE;">: </span><span style="color:#BD976A;">absolute</span><span style="color:#DBD7CAEE;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">transition</span><span style="color:#DBD7CAEE;">: </span><span style="color:#BD976A;">all</span><span style="color:#DBD7CAEE;"> 0</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">6</span><span style="color:#BD976A;">s</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">ease</span><span style="color:#DBD7CAEE;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">.</span><span style="color:#BD976A;">progressBarTotal</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">width</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">100</span><span style="color:#CB7676;">%</span><span style="color:#DBD7CAEE;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">height</span><span style="color:#DBD7CAEE;">: </span><span style="color:#4C9A91;">100</span><span style="color:#CB7676;">%</span><span style="color:#DBD7CAEE;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">background</span><span style="color:#DBD7CAEE;">: #</span><span style="color:#BD976A;">eeeeee</span><span style="color:#DBD7CAEE;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">border</span><span style="color:#CB7676;">-</span><span style="color:#BD976A;">radius</span><span style="color:#DBD7CAEE;">: 20</span><span style="color:#BD976A;">rpx</span><span style="color:#DBD7CAEE;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">.</span><span style="color:#BD976A;">activeNumber</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">display</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">inline</span><span style="color:#CB7676;">-</span><span style="color:#BD976A;">block</span><span style="color:#DBD7CAEE;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">font</span><span style="color:#CB7676;">-</span><span style="color:#BD976A;">size</span><span style="color:#DBD7CAEE;">: 18</span><span style="color:#BD976A;">rpx</span><span style="color:#DBD7CAEE;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">font</span><span style="color:#CB7676;">-</span><span style="color:#BD976A;">weight</span><span style="color:#DBD7CAEE;">: </span><span style="color:#4C9A91;">500</span><span style="color:#DBD7CAEE;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">color</span><span style="color:#DBD7CAEE;">: #</span><span style="color:#4C9A91;">576783</span><span style="color:#DBD7CAEE;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">opacity</span><span style="color:#DBD7CAEE;">: </span><span style="color:#4C9A91;">0.6</span><span style="color:#DBD7CAEE;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">position</span><span style="color:#DBD7CAEE;">: </span><span style="color:#BD976A;">absolute</span><span style="color:#DBD7CAEE;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">right</span><span style="color:#DBD7CAEE;">: </span><span style="color:#CB7676;">-</span><span style="color:#4C9A91;">7</span><span style="color:#CB7676;">%</span><span style="color:#DBD7CAEE;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#666666;">&lt;/</span><span style="color:#4D9375;">style</span><span style="color:#666666;">&gt;</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">template</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">view</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">class</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">progressBarBox</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">view</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">class</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">progressTitle</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">&gt;{{</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">progressTitle</span><span style="color:#393A34;"> </span><span style="color:#999999;">}}&lt;/</span><span style="color:#1E754F;">view</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">view</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">class</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">barBox</span><span style="color:#B56959AA;">&quot;</span><span style="color:#393A34;"> </span><span style="color:#B31D28;">:style=&quot;{</span><span style="color:#393A34;"> </span><span style="color:#B31D28;">height:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">progressBarHeight</span><span style="color:#393A34;"> </span><span style="color:#B31D28;">+</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">rpx</span><span style="color:#B56959AA;">&#39;</span><span style="color:#393A34;"> </span><span style="color:#B31D28;">}&quot;&gt;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B31D28;">&lt;view</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">class</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">progressBarActive</span><span style="color:#B56959AA;">&quot;</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B31D28;">:style=&quot;barActiveStyle&quot;</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">ref</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">progressBarActive</span><span style="color:#B56959AA;">&quot;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">&gt;&lt;/</span><span style="color:#1E754F;">view</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">view</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">class</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">progressBarTotal</span><span style="color:#B56959AA;">&quot;</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">ref</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">progressBarTotal</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">text</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">class</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">activeNumber</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">&gt;{{</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">progressActiveNum</span><span style="color:#393A34;"> </span><span style="color:#999999;">}}&lt;/</span><span style="color:#1E754F;">text</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">&lt;/</span><span style="color:#1E754F;">view</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">&lt;/</span><span style="color:#1E754F;">view</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">&lt;/</span><span style="color:#1E754F;">view</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#AB5959;">&lt;/</span><span style="color:#B07D48;">template</span><span style="color:#AB5959;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">script</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">export default </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B07D48;">name</span><span style="color:#393A34;">: </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">progressBar</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#59873A;">data</span><span style="color:#999999;">()</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    return {</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">barActiveStyle</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{},</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span><span style="color:#393A34;">;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">}</span><span style="color:#393A34;">,</span></span>
<span class="line"><span style="color:#393A34;">  props: </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">// \u9009\u62E9\u7684\u8FDB\u5EA6\u6761\u90E8\u5206\u7684\u989C\u8272</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">activeBgColor</span><span style="color:#393A34;">: </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">type</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">String</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">default</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">#277AFF</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">// \u8FDB\u5EA6\u6761\u9AD8\u5EA6</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">progressBarHeight</span><span style="color:#393A34;">: </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">type</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">String</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">default</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">30</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">// \u8FDB\u5EA6\u6761title</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">progressTitle</span><span style="color:#393A34;">: </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">require</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">true</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">type</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">String</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">default</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">\u8FDB\u5EA6\u6761</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">// \u8FDB\u5EA6\u6761\u603B\u503C</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">progressTotalNum</span><span style="color:#393A34;">: </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">type</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">Number</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">default</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">1000</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">// \u8FDB\u5EA6\u6761\u503C</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">progressActiveNum</span><span style="color:#393A34;">: </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">type</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">Number</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">require</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">true</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">default</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">}</span><span style="color:#393A34;">,</span></span>
<span class="line"><span style="color:#393A34;">  mounted() </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">// \u6C42 \u9009\u62E9\u7684\u8FDB\u5EA6\u6761\u90E8\u5206\u6240\u5360\u767E\u5206\u6BD4</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">let</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">progressActiveNum</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#59873A;">Number</span><span style="color:#999999;">(</span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">progressActiveNum</span><span style="color:#999999;">)</span><span style="color:#393A34;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">let</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">progressTotalNum</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#59873A;">Number</span><span style="color:#999999;">(</span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">progressTotalNum</span><span style="color:#999999;">)</span><span style="color:#393A34;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#59873A;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">progressActiveNum</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">      </span><span style="color:#A0ADA0;">// \u8FDB\u5EA6\u6761\u503C &lt; 0 \u9ED8\u8BA4 \u7B49\u4E8E 0</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">progressActiveNum</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0</span><span style="color:#393A34;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#59873A;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">progressActiveNum</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">progressTotalNum</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">      </span><span style="color:#A0ADA0;">// \u5982\u679C\u8FD9\u4E2A\u8FDB\u5EA6\u6761\u6570\u91CF &gt; \u603B\u6570\u91CF \u9ED8\u8BA4\u4E3A\u603B\u6570\u91CF</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">progressActiveNum</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">progressTotalNum</span><span style="color:#393A34;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">// \u8FDB\u5EA6\u6240\u5360\u767E\u5206\u6BD4</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">let</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">progressPercentage</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">progressActiveNum</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">/</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">progressTotalNum</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">*</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">100</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">+</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">%</span><span style="color:#B56959AA;">&quot;</span><span style="color:#393A34;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">barActiveStyle</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">backgroundColor</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">activeBgColor</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#999999;">      </span><span style="color:#A0ADA0;">// height: this.progressBarHeight + &quot;rpx&quot;,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">width</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">0%</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span><span style="color:#393A34;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#59873A;">setTimeout</span><span style="color:#999999;">(()</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">barActiveStyle</span><span style="color:#999999;">.</span><span style="color:#B07D48;">width</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">progressPercentage</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">},</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">100</span><span style="color:#999999;">)</span><span style="color:#393A34;">;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">}</span><span style="color:#393A34;">,</span></span>
<span class="line"><span style="color:#393A34;">};</span></span>
<span class="line"><span style="color:#999999;">&lt;/</span><span style="color:#1E754F;">script</span><span style="color:#999999;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">style</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">lang</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">less</span><span style="color:#B56959AA;">&quot;</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">scoped</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">.progressBarBox </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B07D48;">width</span><span style="color:#393A34;">: </span><span style="color:#2F798A;">100</span><span style="color:#AB5959;">%</span><span style="color:#393A34;">;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B07D48;">height</span><span style="color:#393A34;">: </span><span style="color:#2F798A;">100</span><span style="color:#AB5959;">%</span><span style="color:#393A34;">;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B07D48;">margin</span><span style="color:#393A34;">: 20</span><span style="color:#B07D48;">rpx</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0</span><span style="color:#393A34;">;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B07D48;">position</span><span style="color:#393A34;">: </span><span style="color:#B07D48;">relative</span><span style="color:#393A34;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">.</span><span style="color:#B07D48;">progressTitle</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    font-</span><span style="color:#998418;">size</span><span style="color:#999999;">:</span><span style="color:#393A34;"> 20</span><span style="color:#B07D48;">rpx</span><span style="color:#393A34;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">font</span><span style="color:#AB5959;">-</span><span style="color:#B07D48;">weight</span><span style="color:#393A34;">: </span><span style="color:#2F798A;">500</span><span style="color:#393A34;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">color</span><span style="color:#393A34;">: #</span><span style="color:#2F798A;">576783</span><span style="color:#393A34;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">margin</span><span style="color:#393A34;">: 20</span><span style="color:#B07D48;">rpx</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0</span><span style="color:#393A34;">;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">.</span><span style="color:#B07D48;">barBox</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">width</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">95</span><span style="color:#AB5959;">%</span><span style="color:#393A34;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">position</span><span style="color:#393A34;">: </span><span style="color:#B07D48;">relative</span><span style="color:#393A34;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">.</span><span style="color:#B07D48;">progressBarActive</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">height</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">100</span><span style="color:#AB5959;">%</span><span style="color:#393A34;">;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">height</span><span style="color:#393A34;">: </span><span style="color:#2F798A;">100</span><span style="color:#AB5959;">%</span><span style="color:#393A34;">;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">border</span><span style="color:#AB5959;">-</span><span style="color:#B07D48;">radius</span><span style="color:#393A34;">: 20</span><span style="color:#B07D48;">rpx</span><span style="color:#393A34;">;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">position</span><span style="color:#393A34;">: </span><span style="color:#B07D48;">absolute</span><span style="color:#393A34;">;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">transition</span><span style="color:#393A34;">: </span><span style="color:#B07D48;">all</span><span style="color:#393A34;"> 0</span><span style="color:#999999;">.</span><span style="color:#393A34;">6</span><span style="color:#B07D48;">s</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">ease</span><span style="color:#393A34;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">.</span><span style="color:#B07D48;">progressBarTotal</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">width</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">100</span><span style="color:#AB5959;">%</span><span style="color:#393A34;">;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">height</span><span style="color:#393A34;">: </span><span style="color:#2F798A;">100</span><span style="color:#AB5959;">%</span><span style="color:#393A34;">;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">background</span><span style="color:#393A34;">: #</span><span style="color:#B07D48;">eeeeee</span><span style="color:#393A34;">;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">border</span><span style="color:#AB5959;">-</span><span style="color:#B07D48;">radius</span><span style="color:#393A34;">: 20</span><span style="color:#B07D48;">rpx</span><span style="color:#393A34;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">.</span><span style="color:#B07D48;">activeNumber</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">display</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">inline</span><span style="color:#AB5959;">-</span><span style="color:#B07D48;">block</span><span style="color:#393A34;">;</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">font</span><span style="color:#AB5959;">-</span><span style="color:#B07D48;">size</span><span style="color:#393A34;">: 18</span><span style="color:#B07D48;">rpx</span><span style="color:#393A34;">;</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">font</span><span style="color:#AB5959;">-</span><span style="color:#B07D48;">weight</span><span style="color:#393A34;">: </span><span style="color:#2F798A;">500</span><span style="color:#393A34;">;</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">color</span><span style="color:#393A34;">: #</span><span style="color:#2F798A;">576783</span><span style="color:#393A34;">;</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">opacity</span><span style="color:#393A34;">: </span><span style="color:#2F798A;">0.6</span><span style="color:#393A34;">;</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">position</span><span style="color:#393A34;">: </span><span style="color:#B07D48;">absolute</span><span style="color:#393A34;">;</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">right</span><span style="color:#393A34;">: </span><span style="color:#AB5959;">-</span><span style="color:#2F798A;">7</span><span style="color:#AB5959;">%</span><span style="color:#393A34;">;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#999999;">&lt;/</span><span style="color:#1E754F;">style</span><span style="color:#999999;">&gt;</span></span>
<span class="line"></span></code></pre></div><h2 id="" tabindex="-1"><a class="header-anchor" href="#" aria-hidden="true">#</a></h2>`,91),e=[o];function c(t,r,y,A,D,B){return a(),n("div",null,e)}const C=s(p,[["render",c]]);export{E as __pageData,C as default};
